{"MEH-3000":{"key":"MEH-3000","status":"Open","summary":"TODO: Unhandled MMIO Access","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-04-10","issuetype":"Sub-task","worklogs":[{"id":"146442","started":"2017-04-10","time":"01:41:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Tracked and fix the problems caused by this TODO","author":"ziaa"}]},"MEH-2999":{"key":"MEH-2999","status":"Open","summary":"PWM - Device Assignment","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":374400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-04-07","issuetype":"Task","worklogs":[]},"MEH-2998":{"key":"MEH-2998","status":"Open","summary":"SPI - Device Assignment","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-04-07","issuetype":"Task","worklogs":[]},"MEH-2997":{"key":"MEH-2997","status":"Open","summary":"USBMUX Device Assignment","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":28800,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-04-07","issuetype":"Task","worklogs":[]},"MEH-2996":{"key":"MEH-2996","status":"Open","summary":"SPL-A3","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-04-06","issuetype":"Workpackage","worklogs":[]},"MEH-2995":{"key":"MEH-2995","status":"Open","summary":"Cluster VM reboot not successful with Graphics Virtualization","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":230400,"timespent":115200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-04-06","issuetype":"Bug","worklogs":[{"id":"146305","started":"2017-04-03","time":"08:00:00.000-0500","timespent":4,"timespent_seconds":115200,"displayname":"Griffin, Clyde","comment":"Working on extensions to the nice work Sharjeel has advanced.  There are still a number of holes in the VM Life Cycle management story that need to be fixed in order to have full confidence that a VM can be successfully brought up and down multitple times.  When these issues are tacked I will directly address the VGT initialization problem on vm0 reboot, if the problem still exists.","author":"cgriffin"}]},"MEH-2992":{"key":"MEH-2992","status":"Open","summary":"PCR3","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-04-04","issuetype":"Workpackage","worklogs":[]},"MEH-2977":{"key":"MEH-2977","status":"Resolved","summary":"Rename MEHV_POChar to mehv_ops","customfield_11642":"","start":"","customfield_11643":"2017-04-07","end":"2017-04-07","timeoriginalestimate":0,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-29","issuetype":"Task","worklogs":[{"id":"146315","started":"2017-04-06","time":"02:29:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Updated driver\/apps for Neusoft and MRB bsps.\r\nSanity tested. ","author":"javedm"}]},"MEH-2971":{"key":"MEH-2971","status":"Open","summary":"TODO: Move ACPI_Init to hv_vm_acpi","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-27","issuetype":"Sub-task","worklogs":[]},"MEH-2970":{"key":"MEH-2970","status":"Resolved","summary":"Verify vm reboot use cases","customfield_11642":"","start":"","customfield_11643":"2017-04-04","end":"2017-04-04","timeoriginalestimate":0,"timespent":32400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-24","issuetype":"Task","worklogs":[{"id":"145445","started":"2017-03-27","time":"04:38:00.000-0500","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"Tested Sharjeel's patches on Neusoft over master branch.\r\nIVI VM was not booting if autoboot was disabled.\r\nGot GPF on some reboot use cases. GPF was due to a missing initialization of the initial PML4 table of VMs. Fixed it.\r\nAfter the fix, reboot worked but GVT-g was not working. Came to notice that GVT-g was not working without reboot patches either.\r\nSent updates.\r\n","author":"javedm"},{"id":"145501","started":"2017-03-28","time":"10:05:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Discussion with Sharjeel about his sync up with Arvind which was related to a change in reboot approach. We identified that if Cluster VM is rebooted while IVI VM is in running state, IVI VM can never be rebooted and will never recover.\r\nApplied Sharjeel's patches on MEHV 2.0 and tried to test. Also included the patch from Intel to fix screen distortion. It turned out that application running from IVI did not appear on the display. Rebuilt the kernels without Intel's patch and things worked.\r\nContinued to test VM0 reboot but got VGT errors on VM0. Reported the issue to Sharjeel.","author":"javedm"}]},"MEH-2968":{"key":"MEH-2968","status":"Open","summary":"Kernel warning on VM1 in intel_display.c on winston init","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-03-22","issuetype":"Sub-task","worklogs":[{"id":"145437","started":"2017-03-27","time":"02:56:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"- setup environment with latest poc5 baseline on mrb \r\n- issue did not reproduce on mrb ","author":"aarehman"}]},"MEH-2964":{"key":"MEH-2964","status":"Open","summary":"Boot Time Optimizations","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["gantt_show_closed","intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-03-20","issuetype":"Workpackage","worklogs":[]},"MEH-2963":{"key":"MEH-2963","status":"Resolved","summary":"Reboot of Cluster VM does not reboot IVI VM","customfield_11642":"","start":"","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":230400,"timespent":298800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-03-20","issuetype":"Bug","worklogs":[{"id":"144922","started":"2017-03-15","time":"09:33:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Created a confluence page containing details of VM Life Cycle Management Component\r\nhttp:\/\/confluence.alm.mentorg.com:8090\/display\/HV\/VM+Life+Cycle+Management","author":"ssohail"},{"id":"144923","started":"2017-03-16","time":"09:34:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Created Environment to reboot cluster-VM is such an order that vgt instances can be reboot. Provided the analysis about expected problems","author":"ssohail"},{"id":"144924","started":"2017-03-17","time":"09:36:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Recreated the environment. Added code into Cluster-VM to call vgt_destroy in shutdown sequence. Did some fixes to make things work","author":"ssohail"},{"id":"144926","started":"2017-03-20","time":"09:38:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Added code into hypervisor for kicking IVI VM restart sequence whenever its ioreq-server is destroyed by cluster-VM. After adding all implementations, found problems in system reboot. Cluster-VM reboots but IVI VM stops in reboot process.","author":"ssohail"},{"id":"144927","started":"2017-03-21","time":"09:41:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Spend the whole day debugging the problem. Finally approached the problem and did a temporary fix. Details are in comment","author":"ssohail"},{"id":"144928","started":"2017-03-22","time":"09:42:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Simplified the system reboot solution. Made it look simple. Extended it to work from both hv-shell and cluster-VM shell. Added some checks into vgt reset code to get rid of any possible corner case.\r\nPrepared a solution which requires no kernel patching","author":"ssohail"},{"id":"145948","started":"2017-03-30","time":"03:13:00.000-0500","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"Reproduced the VGT errors on MRB.\r\nThe only difference between Sharjeel's set up and mine was missing vgt_mgr files in VM0's rootfs. Worked with Sharjeel to reproduce the issue on his target.\r\n\r\nStarted to debug the issue. The error is coming from vgt\/aperture_gm.c.\r\nI suspected that proper cleanups are not happening so I tried to reboot VM0 from within itself to let it do all its shutdown procedures but I noticed that it never shuts down vgt. That is, it does not call i915_vgt_stop which properly cleans up the GM space etc. I forced it but it didnt work. Discussed with Clyde if we should try to make i915 and VGT a loadable module.\r\n \r\nHad a small discussion with Asad and he said that we may try to power cycle the GPU using some ACPI methods.","author":"javedm"},{"id":"145949","started":"2017-03-31","time":"03:22:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Tried to investigate issue pointed out by Clyde that IVI VM does not go throught the proper shutdown process.\r\nLooks like when we reboot VM1, then HV_Arch_Shutdown_VM IS called.\r\nIn case of VM1 shutdown, however, HV_Arch_Shutdown_VM is NOT called.\r\nWhen we do a \"vm_boot 1\" after shutdown, HV_Arch_Shutdown_VM is called.\r\nLooks like we may need to review the lifecycle state machine.","author":"javedm"},{"id":"145968","started":"2017-03-27","time":"05:30:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Cleaned-up the solution and made commits.\r\nTested VM Life Cycle management on MRB with current state of Master","author":"ssohail"},{"id":"145969","started":"2017-03-28","time":"05:31:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Tested on Neusoft with madeeha.\r\nneusoft was not working with latest state of master.\r\nChecked-out previous commit from SPLA-2 branch.\r\nCherry-picked VM Life cycle management changes and tested it on Neusoft\r\nRebooting VM1 worked fine but rebooting VM0 produced problems","author":"ssohail"},{"id":"145970","started":"2017-03-29","time":"05:33:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Found that problem also appears on MRB. the reason why I was unable to see it before was the absence of some vgt invoking scripts from the file-system I was using.\r\nAdding those script produced the eeror on MRB as well.\r\nThe nature of problem is however a littlke different.\r\nFor MRB VM1 vgt instance creation fails but for Neusoft VM) instance creation fails.","author":"ssohail"},{"id":"145971","started":"2017-03-30","time":"05:36:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Did some debugging on MRB to find out the cause.\r\nInitiated discussion with Clyde. Asked for his help.\r\nTried few changes in VM shutdown sequence.\r\nNo progress made at my side but Clyde's thoughts are pointing towards lack of proper vgt shutdown which is probably the reason of the problem.\r\nCorrupted device space probably need to be cleared in the shutdown sequence.","author":"ssohail"},{"id":"145972","started":"2017-04-03","time":"05:38:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Tried to forcefully add vgt_destroy() call in VM shutdown sequence.\r\nThis change did not solve the problem.\r\nThere are further mmio space and device space cleaning required which happens in proper unloading of vgt-i915 driver.","author":"ssohail"}]},"MEH-2962":{"key":"MEH-2962","status":"Open","summary":"C Samples - M9\/P.8 from Neusoft","customfield_11642":"2017-05-17","start":"2017-05-17","customfield_11643":"2017-05-17","end":"2017-05-17","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-03-19","issuetype":"Requirement","worklogs":[]},"MEH-2961":{"key":"MEH-2961","status":"Open","summary":"B Samples - M.7\/P.8 from Neusoft","customfield_11642":"2017-03-31","start":"2017-03-31","customfield_11643":"2017-03-31","end":"2017-03-31","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-03-19","issuetype":"Requirement","worklogs":[]},"MEH-2960":{"key":"MEH-2960","status":"Open","summary":"SPL-C M.10\/D.6","customfield_11642":"2017-04-01","start":"2017-04-01","customfield_11643":"2017-08-22","end":"2017-08-22","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-03-19","issuetype":"Workpackage","worklogs":[]},"MEH-2959":{"key":"MEH-2959","status":"Open","summary":"SPL-B M.8\/D.5","customfield_11642":"","start":"","customfield_11643":"2017-05-30","end":"2017-05-30","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-03-19","issuetype":"Workpackage","worklogs":[]},"MEH-2958":{"key":"MEH-2958","status":"Open","summary":"GVT-g Alpha Release from Intel","customfield_11642":"2017-07-07","start":"2017-07-07","customfield_11643":"2017-07-07","end":"2017-07-07","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-03-19","issuetype":"Requirement","worklogs":[]},"MEH-2957":{"key":"MEH-2957","status":"Open","summary":"GVT-g Pre-Alpha Release from Intel","customfield_11642":"2017-05-26","start":"2017-05-26","customfield_11643":"2017-05-26","end":"2017-05-26","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-03-19","issuetype":"Requirement","worklogs":[]},"MEH-2956":{"key":"MEH-2956","status":"Open","summary":"GVT-g EC6 Release from Intel","customfield_11642":"2017-04-28","start":"2017-04-28","customfield_11643":"2017-04-28","end":"2017-04-28","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-03-19","issuetype":"Requirement","worklogs":[]},"MEH-2955":{"key":"MEH-2955","status":"Resolved","summary":"Code Standardization","customfield_11642":"","start":"","customfield_11643":"2017-03-22","end":"2017-03-22","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-03-14","issuetype":"Sub-task","worklogs":[{"id":"144929","started":"2017-03-13","time":"09:46:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Cleanup in os\/drivers and os\/include","author":"ssohail"},{"id":"144930","started":"2017-03-14","time":"09:47:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Cleanup and standardization in os\/rtl directory","author":"ssohail"}]},"MEH-2953":{"key":"MEH-2953","status":"Resolved","summary":"Verify Clydes Patch for NFS timeout and do boottime analysis","customfield_11642":"","start":"","customfield_11643":"2017-03-13","end":"2017-03-13","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-03-13","issuetype":"Task","worklogs":[{"id":"144056","started":"2017-03-13","time":"08:11:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Tested Clyde's patch for NFS and did the breakdown of boottiming.\r\n\r\nSummary:\r\n  - kernel takes: 6.9 seconds\r\n  - userspace setup takes: 3.258 seconds\r\n\r\nPerspective candidates for improvement:\r\n  - ppgtt->base.clear_range which takes: 3 seconds\r\n\r\nPlease see detailed report attached to the ticket.","author":"aarehman"}]},"MEH-2952":{"key":"MEH-2952","status":"Open","summary":"None","customfield_11642":"2017-03-01","start":"2017-03-01","customfield_11643":"2017-03-21","end":"2017-03-21","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-03-11","issuetype":"Workpackage","worklogs":[]},"MEH-2951":{"key":"MEH-2951","status":"Open","summary":"Implement consistent debug logging","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2017-03-10","issuetype":"Sub-task","worklogs":[]},"MEH-2950":{"key":"MEH-2950","status":"Open","summary":"Fix issues with abstractions and code organization","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2017-03-10","issuetype":"Sub-task","worklogs":[]},"MEH-2949":{"key":"MEH-2949","status":"In Progress","summary":"Conform to Nucleus coding standard across code base","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":97800,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-03-10","issuetype":"Sub-task","worklogs":[{"id":"144529","started":"2017-03-17","time":"07:41:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Studied Nucleus_Coding_Standard_for_C_v1_5.pdf upto 3.1.7 Variables","author":"ziaa"},{"id":"144531","started":"2017-03-17","time":"08:16:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Fisheye refresher.","author":"ziaa"},{"id":"144700","started":"2017-03-20","time":"07:13:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Tabs to spaces","author":"ziaa"},{"id":"144770","started":"2017-03-20","time":"02:49:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Completed study of Nucleus Coding standard document.","author":"ziaa"},{"id":"144771","started":"2017-03-21","time":"03:05:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"First review pass to hv_mem.c, hv_trap.c and hv_mem_extern.h. The file hv_vm_exten.h was just changed to fix compile issue.\r\n\r\nFixed pushed to azia-review branch","author":"ziaa"},{"id":"145043","started":"2017-03-24","time":"05:12:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"    Merged upstream\r\n    Removed deadcode from hs7_ecu.c\r\n    Reviewed hv_vcpu.c\r\n    Updated hv_vm_extern.h to fix compiler errors.\r\n\r\n","author":"ziaa"},{"id":"145278","started":"2017-03-27","time":"05:30:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"From: Zia, Asad\r\nSent: Monday, March 27, 2017 3:19 PM\r\nTo: Raghuraman, Arvind; Griffin, Clyde; Javed, Madeeha\r\nCc: Ahmad, Mumtaz\r\nSubject: Local APIC ID size bug \r\n \r\nHi,\r\n \r\nDuring my review I have found an inconsistency in the size used to store Local APIC ID. In structure mps_lapic_irq_entry_t file os_arch_mps.h, dest_lapic_id is stored as UINT8. In structure CPU_LOCAL_STORAGE file os_arch_cpu.h the lapic_id is declared as UINT32. In file hv_vm_mps.c the UINT32 is downcast to UINT8 before calling MPS_LAPIC_Irq_Add.\r\n \r\nI am looking at Intel processor manual and it looks that in legacy mode that APIC ID is 8bits but in 64bit architecture the APIC ID is 32bit.\r\n \r\nWhich one of these is correct for our mehv-x64-broxton? I will update the code as such.\r\n \r\nRegards,\r\nAsad\r\n","author":"ziaa"},{"id":"145279","started":"2017-03-27","time":"05:34:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Finished review of hv_vm_mps.c.\r\nos_arch_mps.h was just edited to fix compiler errors.","author":"ziaa"},{"id":"145460","started":"2017-03-28","time":"06:03:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Reviewed Reviewed hv_vm_sw.c, pushed to azia-review","author":"ziaa"},{"id":"145592","started":"2017-03-29","time":"07:27:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Refactored hv_vm_sw.c and moved data structures and defines to a new\r\nheader file.\r\nChanges pushed to azia-review","author":"ziaa"},{"id":"145728","started":"2017-03-30","time":"07:50:00.000-0500","timespent":0.1875,"timespent_seconds":5400,"displayname":"Zia, Asad","comment":"Reviewed hv_arch_io.c. Other files changed to fix compilation.\r\nFixed pushed to branch azia-rview","author":"ziaa"},{"id":"145821","started":"2017-03-31","time":"05:17:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Reviewed hv_arch_mmu.c, Updated hv_vm_sw.c. Other files updated as side effect.","author":"ziaa"},{"id":"145935","started":"2017-04-03","time":"01:37:00.000-0500","timespent":0.083333333333333,"timespent_seconds":2400,"displayname":"Zia, Asad","comment":"Reviewed hv_arch_msc.c and hv_arch_msc_extern.h\r\nChanges pushed to azia-review","author":"ziaa"},{"id":"146025","started":"2017-04-04","time":"01:39:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"    Reviewed hv_arch_pci.c.\r\n    \r\n    The following files changed as consequence:\r\n    bsp\/obsolete\/minnowmax\/minnowmax.c\r\n    hv\/arch\/x64\/hv_arch_vm.c\r\n    hv\/drivers\/gvt\/host\/gvt_hypcall_hvm_op.c\r\n    hv\/include\/arch\/x64\/hv_arch_pci_extern.h\r\n\r\nChanges pushed to azia-review","author":"ziaa"},{"id":"146132","started":"2017-04-05","time":"02:15:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Reviewed hv_arch_trap.c and hv_arch_vcpu.c, other files changed as consequence.\r\n\r\nChanges pushed to azia-review.","author":"ziaa"},{"id":"146255","started":"2017-04-06","time":"06:35:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Tried my branch on hardware. It did not work with  error \"Unhandled MMIO Access\"\r\nTracking my footsteps to see where the problem started.","author":"ziaa"},{"id":"146288","started":"2017-04-06","time":"12:21:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Zia, Asad","comment":"I will need to build and try a handful of commits along my branch in order to figure out what commit broke it.\r\nCreated a script that automates the following:\r\n* Builds HV and all artifacts\r\n* Power cycles the board\r\n* Boots a maintenance Linux image form ABL shell\r\n* Copy build artifacts over scp to Neusoft board\r\n* Performs sync and power cycle the board\r\n* Loads new IAS image form ABL shell","author":"ziaa"},{"id":"146289","started":"2017-04-06","time":"12:26:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Fixed build issue with newer gcc and pushed to master.","author":"ziaa"}]},"MEH-2948":{"key":"MEH-2948","status":"In Progress","summary":"Remove redundant APIs","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":57600,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-03-10","issuetype":"Sub-task","worklogs":[{"id":"146043","started":"2017-04-04","time":"06:02:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Cleaned up the Memory management Component implementation","author":"ssohail"}]},"MEH-2947":{"key":"MEH-2947","status":"In Progress","summary":"Remove dead code","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":9000,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-10","issuetype":"Sub-task","worklogs":[{"id":"144717","started":"2017-03-17","time":"08:42:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Removed unused files.\r\nRemoved unnecessary code in #if 0 blocks.\r\nMarked minnowmax bsp as obsolete.\r\n","author":"javedm"},{"id":"144776","started":"2017-03-21","time":"03:38:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Zia, Asad","comment":"Finished review.","author":"ziaa"}]},"MEH-2946":{"key":"MEH-2946","status":"In Progress","summary":"Error checking across the x64 Hypervisor code base","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-03-10","issuetype":"Sub-task","worklogs":[{"id":"146191","started":"2017-04-03","time":"10:01:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"Reviewed following files for proper error checking: \r\n   hv\/drivers\/gvt\/common\/gvt_msg.c\r\n   hv\/include\/drivers\/gvt\/gvt_msg.h\r\n   hv\/arch\/x64\/hv_arch_io.c\r\n   hv\/arch\/x64\/hv_arch_irq.c\r\n   hv\/arch\/x64\/hv_arch_mmu.c\r\n   hv\/arch\/x64\/hv_arch_vm.c\r\n   os\/arch\/x64\/intr_main.c","author":"aarehman"}]},"MEH-2945":{"key":"MEH-2945","status":"Open","summary":"Fix redundant header inclusions across the x64 Hypervisor code base","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-10","issuetype":"Sub-task","worklogs":[]},"MEH-2944":{"key":"MEH-2944","status":"Open","summary":"Code clean up (umbrella task)","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["gantt_show_closed","intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-10","issuetype":"Workpackage","worklogs":[]},"MEH-2943":{"key":"MEH-2943","status":"Resolved","summary":"Misc","customfield_11642":"","start":"","customfield_11643":"2017-04-07","end":"2017-04-07","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-03-10","issuetype":"Workpackage","worklogs":[]},"MEH-2942":{"key":"MEH-2942","status":"Open","summary":"Reboot Issues","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-03-09","issuetype":"Workpackage","worklogs":[]},"MEH-2941":{"key":"MEH-2941","status":"Resolved","summary":"Enable GVT-g from POC 5 on MRB","customfield_11642":"","start":"","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-03-09","issuetype":"Sub-task","worklogs":[{"id":"143638","started":"2017-03-08","time":"09:00:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":" GVT-g is working on POC5. My changes (strictly affecting GVT-g) we sent to Madeeha.\r\n\r\nSome things to note.\r\n\r\nOn the hypervisor side.\r\n\u2022\tI made no changes\r\n\r\nOn the guest kernel side\r\n\u2022\tkernel_0030_Intel-0001-vgt-fix-for-intel-gpu-tools-errors.patch is partially implemented in POC5.  Leave out for now.  We'll need to talk to Intel about this.\r\n\u2022\tFor vm0 & vm1: I modified i915_vgt_kernel.cfg to remove some settings that were duplicated in acpi_no_idle.cfg\r\n\u2022\tkernel_0070_mehv_gvt_tsc_stability.patch is only applicable to VM1\r\n\u2022\tkernel_0060_avoid_opregion_errors.patch was accepted for POC5.  We no longer need to carry it.\r\n\u2022\tI enabled Sharjeels reset work but there are some residual issues.\r\n\u2022\tThe MEHV GVT-g patches applied cleanly and required no modifications. \r\no\tkernel_0021_mehv_ipi_support.patch\r\no\tkernel_0023_mehv_gvt_kernel_mods.patch\r\no\tkernel_0024_mehv_gvt_vminterface.patch\r\no\tkernel_0025_mehv_gvt_main.patch\r\n","author":"cgriffin"}]},"MEH-2940":{"key":"MEH-2940","status":"Resolved","summary":"Enable support for POC 5","customfield_11642":"2017-03-01","start":"2017-03-01","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-03-09","issuetype":"Workpackage","worklogs":[]},"MEH-2939":{"key":"MEH-2939","status":"Resolved","summary":"Eliminate hypercall at end of vgt emulation thread completion","customfield_11642":"","start":"","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":28800,"timespent":54000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-03-09","issuetype":"Sub-task","worklogs":[{"id":"143636","started":"2017-03-07","time":"10:00:00.000-0600","timespent":0.875,"timespent_seconds":25200,"displayname":"Griffin, Clyde","comment":"Worked out the solution to eliminate the thread completion hypercall on VM0 at the end of a VGT emulation trap.","author":"cgriffin"},{"id":"144748","started":"2017-03-17","time":"08:00:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Patch complete.  Checkin pending.","author":"cgriffin"},{"id":"145015","started":"2017-03-20","time":"08:00:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Completed the work to eliminate the emulation complete nofification hypercall.  Spend time testing and making sure the modifications were ready for checking.","author":"cgriffin"}]},"MEH-2938":{"key":"MEH-2938","status":"Resolved","summary":"Automate kernel entry address update in guests.cfg","customfield_11642":"","start":"","customfield_11643":"2017-03-15","end":"2017-03-15","timeoriginalestimate":0,"timespent":25200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-08","issuetype":"Improvement","worklogs":[{"id":"143959","started":"2017-03-10","time":"14:36:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Investigated how size of setup code can be obtained from a bzImage.\r\nFindings in comment.","author":"javedm"},{"id":"144318","started":"2017-03-14","time":"05:29:00.000-0500","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"Wrote and integrated Linux host utility get_setup_size.\r\nUpdate update_its.py to use run this utility and calculate offset of kernel entry and update kernel entry address in linux guest its files to create FIT images.\r\nTested it over various kernel bzImages.","author":"javedm"}]},"MEH-2936":{"key":"MEH-2936","status":"Resolved","summary":"GPU benchmarks SPLA-1 release","customfield_11642":"2017-01-01","start":"2017-01-01","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":28800,"timespent":18000,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-03-07","issuetype":"Task","worklogs":[{"id":"143380","started":"2017-03-07","time":"07:04:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"- no network driver loaded \r\n- no fix for the graphics artifact found in the rootfs \r\n- no vgt.rules or vgt_mgr found in generated rootfs - though graphics are still working perfectly \r\n- tried running video but the version of libva is incompatible:                      \r\n\"mavl-fileplayer: \/usr\/lib\/libva.so.1: version `VA_API_0.34.0' not found (required by \/usr\/lib\/libmavl-apl.so.0)\"\r\n\r\n","author":"aarehman"},{"id":"143381","started":"2017-03-07","time":"07:06:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"updated the gpu benchmarks on confluence page for latest setup.\r\nSummary:\r\n - 50% improvement in VM1 performance \r\n","author":"aarehman"}]},"MEH-2935":{"key":"MEH-2935","status":"Resolved","summary":"Verify Clydes Patches for early vgt instance creation on neusoft","customfield_11642":"2017-01-01","start":"2017-01-01","customfield_11643":"2017-03-09","end":"2017-03-09","timeoriginalestimate":28800,"timespent":46800,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-03-07","issuetype":"Task","worklogs":[{"id":"143374","started":"2017-03-06","time":"06:56:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"- applied patches given by clyde with specific change of bsp of hs7 in hypervisor\r\n\r\nBehaviour: vm0 does not run and system hangs\r\nHaphazard work around: added delay in hv_main for cpu_id=1 of 700 milli seconds\r\n\r\n","author":"aarehman"},{"id":"143685","started":"2017-03-10","time":"06:14:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Rehman, Aabdul","comment":"did analysis of the boot timing of vm1 after applying clydes patches and narrow down single point that can be optimized:\r\n\r\n time taken by ppgtt clear_range operation in i915: 3.32 Seconds","author":"aarehman"}]},"MEH-2934":{"key":"MEH-2934","status":"Resolved","summary":"Running Video on Winston","customfield_11642":"2017-01-01","start":"2017-01-01","customfield_11643":"2017-03-13","end":"2017-03-13","timeoriginalestimate":0,"timespent":72000,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-03-03","issuetype":"Task","worklogs":[{"id":"143076","started":"2017-03-01","time":"07:25:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Rehman, Aabdul","comment":"- The gstreamer packaged with connectOS yocto build system was used but it was causing issues. After some debug effort the problem was identified with gstreamer-omx plugin which is dependent on belagio libraries so it is not useful in our context. \r\n- Then the gstreamer and it's plugins packaged with XEN-POC4 were tried with neusoft setup but they also caused issues so this effort was abandoned as POC5 was delivered by intel. \r\n- Tried running video on XEN-POC5 using gstreamer and media-sdk plugin but there is some issue with mfxsink module which needs further investigation. ","author":"aarehman"},{"id":"143577","started":"2017-03-09","time":"05:04:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"verified that video is running on XEN-POC5 on domU on two different displays simultaneously.  \r\n\r\nAs there was no documentation so the method to configure weston to use two different displays and moving the gstreamer window to second display is documented. \r\n\r\nRequirements to play video:\r\n - libva\r\n - mediasdk\r\n - gstreamer \r\n - weston ","author":"aarehman"},{"id":"143691","started":"2017-03-09","time":"07:03:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"verified that video is running with SPLA-1 release on neusoft and updated the cpu usage numbers for the case when video is running, on the performance sheet. ","author":"aarehman"}]},"MEH-2931":{"key":"MEH-2931","status":"Resolved","summary":"Display artifacts on IVI display on Neusoft hardware","customfield_11642":"2017-01-01","start":"2017-01-01","customfield_11643":"2017-03-03","end":"2017-03-03","timeoriginalestimate":28800,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-03-03","issuetype":"Bug","worklogs":[{"id":"143035","started":"2017-03-03","time":"02:14:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Hi,\r\n\r\nThis is indeed an issue with the bootargs. HDMIA-2 vs HDMI-A-2. Notice the missing dash. I realized that i915 was using a fallback resolution of 1024x768. On debugging it turned out to be a typo on the VM boot args.\r\n\r\nRegards,\r\nAsad\r\n","author":"ziaa"}]},"MEH-2930":{"key":"MEH-2930","status":"Resolved","summary":"SPI device \/dev\/spi0.0 does not come up in Cluster VM.","customfield_11642":"2017-03-06","start":"2017-03-06","customfield_11643":"2017-03-15","end":"2017-03-15","timeoriginalestimate":57600,"timespent":61200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-03","issuetype":"Bug","worklogs":[{"id":"143029","started":"2017-03-03","time":"02:01:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Confirmed if SPI devices are being enumerated properly on VMs or not.\r\nNoticed that spidev module is not being loaded on Cluster VM, sent query to Harshit.\r\nLoaded spidev module manually on Cluster VM but same result.\r\nDisabled SPI devices in IVI VM but same result.\r\nMoved all SPI devices to Cluster VM but same result.\r\nConfirmed that SPI devices are present in per guest ACPI tables by dumping them on host.","author":"javedm"},{"id":"143953","started":"2017-03-07","time":"14:16:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Investigated the issue.\r\nFindings in comments.","author":"javedm"},{"id":"144076","started":"2017-03-13","time":"09:22:00.000-0500","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"- Prepared mehv 1.6 binaries with spi devices all assigned to vm0.\r\n- Prepare mehv 1.6 binaries where dsdt of vm0 has spi0 only and dsdt of vm1 has spi2 and spi3.\r\nSent the mehv binaries to Adeel.\r\n- Prepared native linux binary configured to load in built spi drivers and applied patches from Adeel to run in PIO mode. Ran results of spidev utility provided by Adeel and sent results to Adeel. spi2 and spi3 do not function correctly on native linux either.","author":"javedm"},{"id":"144319","started":"2017-03-14","time":"05:32:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Updated VM description and ACPI tables to assign SPI2 to VM0. And SPI1 and SPI3 to VM1, as requested by Harshit.","author":"javedm"}]},"MEH-2929":{"key":"MEH-2929","status":"Resolved","summary":"Development Drops","customfield_11642":"","start":"","customfield_11643":"2017-03-18","end":"2017-03-18","timeoriginalestimate":28800,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-03-02","issuetype":"Workpackage","worklogs":[]},"MEH-2922":{"key":"MEH-2922","status":"Resolved","summary":"Remove HVM loader and boot VM1 in parallel to VM0 ","customfield_11642":"2017-01-01","start":"2017-01-01","customfield_11643":"2017-03-03","end":"2017-03-03","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-28","issuetype":"Task","worklogs":[{"id":"142799","started":"2017-02-28","time":"23:45:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"- disabled the hvm loader\r\n- made the i915 module loadable in vm1 \r\n- deliberately halted i915 during loading to check if it can wait for signal without any issues\r\n- allowed hypervisor to create ioreq server if vm is in started state \r\n\r\nOn manually loading the i915 after creating a vgt instance in VM0 caused exception in hypervisor os_arch_mmu.c:859\r\n\r\n ","author":"aarehman"}]},"MEH-2921":{"key":"MEH-2921","status":"Resolved","summary":"GVT-g performance optimization and functionality discussions with Intel","customfield_11642":"","start":"","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":0,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Sub-task","worklogs":[{"id":"142792","started":"2017-02-28","time":"18:16:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Griffin, Clyde","comment":"Discussed recent findings and performance gains.  Intel gave us a recommendation that gave us 350ms and a promise for a patch to provide another gain.  Still waiting on that one.","author":"cgriffin"},{"id":"144460","started":"2017-03-14","time":"08:00:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Griffin, Clyde","comment":"Weekly call with Intel to discuss GVT-g issues.","author":"cgriffin"},{"id":"144499","started":"2017-03-14","time":"04:55:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Experimented with vmdisplay indirect display mode.","author":"ziaa"},{"id":"144500","started":"2017-03-17","time":"04:55:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"I tried it Neusoft hardware. We generally have issue with tsd_init=7. When tsd_init is set to 7 even without touching CONFIG_FBDEV_EMULATION, the ksmcube and Winston seems to run ok but no output is visible on the screen. We normaly use tsd_init=1\r\n\r\nWhen I tried your suggestion to both set tsd_init=7 and applied CONFIG_FBDEV_EMULATION changes. I got the same behavior as before, kmscbue gave error that that it did not find crtc. Winston did not work either.\r\n\r\nHere is the kernel command line after applying your changes.\r\n\r\n# cat \/proc\/cmdline \r\nnoxsave maxcpus=1 console=hvc0 consoleblank=0 root=\/dev\/mmcblk0p7 rootfstype=ext4 rw rootwait clocksource=hpet loglevel=4 ip=192.168.10.10:::255.255.255.0::virt-0 no_timer_check i915.nuclear_pageflip=1 i915.tsd_init=7 i915.tsd_delay=20000 drm_kms_helper.edid_firmware=edid.bin video=HDMI-A-1:1920x720@60e videtfo=HDMI-A-2:1280x720@60e virtio_mmio.device=0x1000@0x79020000:16 virtio_mmio.device=0x1000@0x79021000:18\r\n virtio_mmio.device=0x1000@0x79020000:16 virtio_mmio.device=0x1000@0x79021000:18\r\n\r\nThe kernel build configuration is attached.\r\n\r\nRegards,\r\nAsad\r\n\r\nFrom: Singh, Satyeshwar [mailto:satyeshwar.singh@intel.com] \r\nSent: Friday, March 17, 2017 5:21 AM\r\nTo: Cormack, Christopher <christopher.cormack@intel.com>; Teres Alexis, Alan Previn <alan.previn.teres.alexis@intel.com>; Lecluse, Philippe <Philippe.Lecluse@intel.com>; Cowperthwaite, David J <david.j.cowperthwaite@intel.com>; Kampeis, Tibor <Tibor_Kampeis@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Slobodskoy, Vitaly <vitaly.slobodskoy@intel.com>; Volkov, Stanislav <stanislav.volkov@intel.com>; Zinser, Markus <Markus_Zinser@mentor.com>; Chokshi, Mitul <mitul.chokshi@intel.com>; Griffin, Clyde <Clyde_Griffin@mentor.com>; Garcia, Arturo <arturo.garcia@intel.com>\r\nCc: Zia, Asad <Asad_Zia@mentor.com>; Panchagnula Chandrasekar, Kameshwaran <kameshwaran.panchagnula.chandrasekar@intel.com>\r\nSubject: RE: Weekly sync with Mentor on GPU sharing \r\n\r\nHi Clyde\/Asad,\r\nCould you guys please try this: set tsd_init=7 and also my CONFIG_FBDEV_EMULATION patch? I think it may work.\r\n-Satyeshwar\r\n","author":"ziaa"}]},"MEH-2920":{"key":"MEH-2920","status":"Resolved","summary":"In conjunction with early VGT instance creation synchronize VM1 start to maximize VM1 early boot.","customfield_11642":"","start":"","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":0,"timespent":122400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Sub-task","worklogs":[{"id":"142789","started":"2017-02-28","time":"14:06:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Griffin, Clyde","comment":"2017-02-24\r\nWorked on VM1 boot synchronization via hypercall handshakes.  This work is in conjection with the early VGT instance creation and is ongoing.","author":"cgriffin"},{"id":"143140","started":"2017-03-01","time":"09:00:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Worked on various aspects of the early VGT instance creation.  Passed patches to Asad Zia for evaluation.","author":"cgriffin"},{"id":"145017","started":"2017-03-21","time":"20:16:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Worked on finalizing the patches for MRB before checking in.","author":"cgriffin"},{"id":"145018","started":"2017-03-22","time":"20:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Worked on the Neeusoft version of the patches for early VGT instance creation.","author":"cgriffin"},{"id":"145019","started":"2017-03-23","time":"08:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Spent the day working on the Neusoft hardware so I can verify Neusoft specific code paths.  In this case the early VGT instance creation patch for Neusoft requires a separate patch.  This need to be tested.  I am still working on getting everything (BIOS, FileSystems, Kernels) brought up to date on the HW.","author":"cgriffin"}]},"MEH-2919":{"key":"MEH-2919","status":"Resolved","summary":"Investigate necessity and overhead of HVM Loader.","customfield_11642":"","start":"","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":14400,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Sub-task","worklogs":[{"id":"142784","started":"2017-02-28","time":"13:58:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"2017-02-27  \r\nDetermined that HVM loader overhead is insignificant.  The real delay we were experiencing was due to the fact that until VGT instance initialization is complete through udev rules VM1 is not booted.  In our discussions HVM Loader was inappropriately specified as the cause for delay which it is not.  VGT instance creation is the bottle neck and a separate subtasks are defined to deal with creation and synchronization.\r\n\r\n2017-02-28\r\nIn discussions with Satyeshwar we determined that HVM loader should remain as a proper BIOS emulation function preparing VGT for use by finishing initialization sequences.  Satyeshwar stated that even though we are not dependent on all the current init sequences today, down the road we will be.","author":"cgriffin"}]},"MEH-2918":{"key":"MEH-2918","status":"Resolved","summary":"Investigate perfmance gains to be had if VM1's VGT instance is created in tandem with VM0's.","customfield_11642":"","start":"","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":115200,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Sub-task","worklogs":[{"id":"142788","started":"2017-02-28","time":"14:05:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Griffin, Clyde","comment":"2017-02-24\r\nWorked on a solution to create a VGT instance for VM1 at the same time that VM0's instance is created.  Development and testing are ongoing.","author":"cgriffin"},{"id":"145016","started":"2017-03-20","time":"13:00:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Worked on finalizing the solution and preparing patches.","author":"cgriffin"}]},"MEH-2917":{"key":"MEH-2917","status":"Resolved","summary":"Investigate running GVT-g emulation on a interrupt top half and bottom half.","customfield_11642":"","start":"","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":144000,"timespent":1800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Sub-task","worklogs":[{"id":"143633","started":"2017-03-07","time":"09:30:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"During the weekly Intel call with Satyeshwar I brought up the subject that we need to get off the vm emulation thread for read\/write emulations wherever possible.  I suggested we should do emulation real time in the interrupt where possible.  I also suggested using a top half\/bottom half interrupt scheme or a scheme where after the interrupt the current running process is immediately preempted to allow the thread to run.\r\n\r\nSatyeshwar agreed we need to investigate this.","author":"cgriffin"}]},"MEH-2916":{"key":"MEH-2916","status":"Resolved","summary":"Determine cause of 6.5 second delay during VM1 boot","customfield_11642":"","start":"","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":0,"timespent":243000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Sub-task","worklogs":[{"id":"142793","started":"2017-02-28","time":"18:26:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Griffin, Clyde","comment":"Working to figure out 6.5sec delay on boot in VM1.","author":"cgriffin"},{"id":"143139","started":"2017-03-03","time":"09:00:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Ongoing effort to determine boot delays.  Performed a variety of tests with ACPI settings.  Nothing to report as yet.","author":"cgriffin"},{"id":"143631","started":"2017-02-06","time":"09:00:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"I was able to determine that about 1 sec of the 6.5 sec delay is attributed to that portion of code dealing with GTT PDE and PTE creation.  In particular the i915\/vgt code is also touching these pages one at a time to set write protections in the EPT. This requires a hypercall.   As an experiment I just commented out the hypercall to see what the overhead was and saw the ~1sec improvement.  Of course we cannot get rid of the hypercall but we could possibly batch process these write protection requests during initialization.  So  I planned on discussing this issue with Intel on Tues 3\/7 during our weekly call.","author":"cgriffin"},{"id":"143632","started":"2017-03-07","time":"09:00:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"With Intel, discussed the issue of doing write protections serially during initialization.  Satyeshwar said he liked the idea of doing things in batch mode during initialization and would look into a possible patch to our current code base.","author":"cgriffin"},{"id":"143634","started":"2017-03-06","time":"14:00:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Ran through a lot of kernel configuration options to see if the 6.5 sec delay in boot time could be found.  This included modification of all the ACPI options we currently have turned on.  Nothing surfaced.  A detailed review of the kernel config is an ongoing effort.  \r\n\r\nHarshit indicated that he could provide a kernel configu for a tiny kernel.  We could definitely benefit from the effort to start with a fast boot and only add what we need instead of starting with a slow boot and trying to remove everything.","author":"cgriffin"},{"id":"143790","started":"2017-03-09","time":"06:30:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Started investigating delays in NFS boot.","author":"cgriffin"},{"id":"143791","started":"2017-03-10","time":"08:30:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"I was able to determine the reason for the 5 second delay. When mounting an NFS root file system if the file system is not ready for mount the code hard codes a 5sec sleep. If it\u2019s still not ready in 5 sec it sleeps again for 10 sec. And again if not ready at 15 sec it sleeps again for 20 sec. This is why we would see times like 6 sec 17 and 37. Depending on what else was happing the NFS rootfs mount could get delayed and they the big hard coded ssleep(timeout) kicks in. \r\n\r\nI modified the code and put in a delay of 50ms to be retried up to 60sec before failing. This results in a mount reduction from 5.4 sec to 3.4 sec from vm1 boot.\r\n\r\nvm1 begins to try to mount at .348sec from vm1 boot and normally does mount until about 5.3 sec.  With my patch NFS rootsfs gets mounted at about 3.488 sec.  So the holdup is now in vm0.  We need to get to the point where the NFS daemon is running sooner in vm0 and this will allow us to clip off more of that 3 seconds in vm1\r\n\r\nAt any rate mystery solved and as we make improvements to vm0 boot we will see a direct correlation in vm1. \r\n\r\nSee patch vm1_nfs_rootfs_mount_speedup.patch. We can rename this patch later.\r\n\r\n~\/gitrepos\/guest_home\/mehv-x64-broxton\/bsp\/mrb\/target_support\/guests\/linux-vm0\/meta-hyp-vm0\/recipes-kernel\/linux\/poc4\/vm1\/recipes-kernel\/linux-apl-p\/linux-apl-p\/neusoft-siac-vm1\/vm1_nfs_rootfs_mount_speedup.patch\r\n","author":"cgriffin"},{"id":"144458","started":"2017-03-13","time":"08:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Began the effort to rebase my POC4 performance patches on POC5.  ","author":"cgriffin"},{"id":"144459","started":"2017-03-14","time":"12:00:00.000-0500","timespent":0.625,"timespent_seconds":18000,"displayname":"Griffin, Clyde","comment":"Continue working on POC4 performance patch rebase to POC5.","author":"cgriffin"},{"id":"144461","started":"2017-03-15","time":"08:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Retesting performance patches on POC5. \r\n\r\nIn the Intel call Tuesday Mar. 14, 2017 Intel indicated that they probably will not spend more effort helping us resolve performance issues as they have a new release at the end of May that is intended to redo the GVT-g architecture.  This leaves some question about the validity of further investigation of this topic and puts in question whether or not we even use some of the performance gain patches we have.  In the mean time I will continue to get the changes sorted out and put into distinct patch groups.  I'll decide what we take in a day or two.","author":"cgriffin"},{"id":"144462","started":"2017-03-16","time":"12:01:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Worked on integrating my boot performance cadidates with POC5.","author":"cgriffin"},{"id":"144750","started":"2017-03-17","time":"13:00:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"The big delays here are being caused by NFS root mount (5 sec) and VGT GTT initialization (between 0,5 sec and 1 sec TBD).  There are still other unaccounted for reasons why this delay is there.  But I am currently assuming it is other parts the initialization sequence in the i915\/VGT code base. ","author":"cgriffin"}]},"MEH-2915":{"key":"MEH-2915","status":"Open","summary":"Quantify and investigate any opportunities for optimizing boot time w.r.t NFS based FS.","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Task","worklogs":[]},"MEH-2914":{"key":"MEH-2914","status":"Resolved","summary":"Implement performance suggestions Intel grahics team","customfield_11642":"","start":"","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":0,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-28","issuetype":"Sub-task","worklogs":[{"id":"142778","started":"2017-02-28","time":"13:06:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"2017-02-27\r\n\r\nSatyeshwar made the following suggestions.\r\n\r\nAlso, my experience with fast boot optimization takes quite a lot of effort and it comes in via small incremental steps. Having said so, I see a couple of improvements that you can make immediately.\r\n1.      I noticed that you have FB dev emulation turned on from messages like \u201cfbcon: inteldrmfb (fb0) is primary device\u201d. About 300 ms are spent here. This can be turned off by CONFIG_DRM_FBDEV_EMULATION kernel config option.\r\n2.      A more experimental change can be done in init_gm_space. This function is taking 100ms+ and I haven\u2019t seen any adverse effect in either Dom 0 or Dom U by remove the call to this function from vgt\/utility\r\n\r\n#1 failed to build.  Satyeshwar was going to provide a patch.\r\n#2 resulted in a gain of about 350ms.  \r\n\r\nTests were performed and results sent to Intel.","author":"cgriffin"},{"id":"143138","started":"2017-03-02","time":"09:00:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Did some testing with a patch from Intel turning off CONFIG_DRM_FBDEV_EMULATION\r\nI found VM1 to boot 1.5 sec faster and VM0 to boot 2 sec faster.","author":"cgriffin"}]},"MEH-2913":{"key":"MEH-2913","status":"Resolved","summary":"Investigate why MEHV guest CPU performance is slower than Xen","customfield_11642":"","start":"","customfield_11643":"2017-03-13","end":"2017-03-13","timeoriginalestimate":0,"timespent":54000,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-02-27","issuetype":"Bug","worklogs":[{"id":"143039","started":"2017-02-28","time":"02:24:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Investigated if the dd test can actually affect boot time.\r\nResearched about some utilities that can find out CPU load.\r\nResearched about Bogo MIPS to confirm if CPU clock rate is being properly configured on guests.","author":"javedm"},{"id":"143657","started":"2017-03-09","time":"01:07:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Got following benchmark numbers for MEHV. It will help the comparison with Xen data:\r\nroot@neusoft-siac-vm0:~# .\/hamzabench start\r\nStarted data logging\r\nroot@neusoft-siac-vm0:~# dd if=\/dev\/zero bs=5M count=1024 | md5sum\r\n1024+0 records in\r\n1024+0 records out\r\nec4bcc8776ea04479b786e063a9ace45  -\r\nroot@neusoft-siac-vm0:~# .\/hamzabench \r\n########################################################\r\nData dump: cpu-id: 0 total vmexits: 2665797 total time taken: 40.748495438s\r\n 1712 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , \r\n12 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 100 , 0 , \r\n0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 2620990 , 0 , \r\n554 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , \r\n0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 41478 , 0 , \r\n0 , 0 , 951 , 0 , 0 , \r\n******************************************************************\r\n\r\n1712 instances of HV_Arch_Exception_Handler\r\n12 instances of HV_Arch_CPUID_Handler\r\n100 instances of HV_Arch_vmcall_handler\r\n2620990 instances of HV_Arch_CR_Access_Handler\r\n554 instances of HV_Arch_IO_Instruction_Handler\r\n41478 instances of HV_Arch_MMU_EPT_Violation\r\n951 instances of HV_Arch_VMX_Preemption_Timeout_Handler\r\n\r\n","author":"ziaa"},{"id":"143658","started":"2017-03-09","time":"01:09:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Researched and found out Xen's own built in profiling tool Xentrace, that should give use VM Exist statistics. Next will try to build and get numbers from this tracing tool.","author":"ziaa"},{"id":"144072","started":"2017-03-13","time":"09:02:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Researched the use of xentrace_format and dumped the information related to VM Exists and CPU frequency changes.","author":"ziaa"},{"id":"144074","started":"2017-03-13","time":"09:05:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Zia, Asad","comment":"It turned out that ConnectedOS guests in MEHV use md5sum from the busybox. Xen guests were using md5sum from the GNU core-utilities package. When using the md5sum from the same package the performance numbers turned out to be the same.","author":"ziaa"}]},"MEH-2912":{"key":"MEH-2912","status":"Open","summary":"Investigate GPU performance regression with MEVH","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-02-27","issuetype":"Bug","worklogs":[]},"MEH-2911":{"key":"MEH-2911","status":"In Progress","summary":"Investigate failing unit tests under VM1 of MEHV","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-02-27","issuetype":"Bug","worklogs":[]},"MEH-2909":{"key":"MEH-2909","status":"Resolved","summary":"Hypervisor documentation updates","customfield_11642":"","start":"","customfield_11643":"2017-04-04","end":"2017-04-04","timeoriginalestimate":57600,"timespent":72000,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-24","issuetype":"Task","worklogs":[{"id":"145598","started":"2017-03-28","time":"07:30:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Rehman, Aabdul","comment":"Created a draft for the release notes covering following topics:\r\n   - Commands supported by HV-Shell\r\n   - Guest's interface to Hypervisor\r\n      . Hypercalls from guests\r\n         . Hypercall ID description table\r\n         . GVT Domain control operations\r\n         . GVT Sync operations\r\n      . Userspace interfaces\r\n         . MEHV_POChar (MEHV Privileged Operations Character) Device Driver Interface\r\n   - Resource Partitioning\r\n      . Memory Partitioning\r\n      . CPU Partitioning\r\n      . Device Partitioning\r\n   - Building Hypervisor image with updated guest images\r\n      . HOST Machine Requirements\r\n      . Building Guests FIT Images\r\n      . Building Hypervisor Image\r\n   - Errors and exceptions raised by Hypervisor\r\n\r\nLink to confluence page: http:\/\/confluence.alm.mentorg.com:8090\/display\/HV\/Release+notes+-+SPL+A2+-draft","author":"aarehman"},{"id":"145762","started":"2017-03-30","time":"10:36:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"Updated page based on Arvind's and Madeeha's feedback.","author":"aarehman"},{"id":"145889","started":"2017-03-31","time":"09:46:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"made changes as requested by Madeeha","author":"aarehman"},{"id":"145937","started":"2017-03-31","time":"02:22:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Provided suggestion to Aabdul about content and formating of the documentation.\r\nReviewed content and provided feedback.\r\nUpdated Virtio section and limitations section.\r\n\r\n","author":"javedm"}]},"MEH-2908":{"key":"MEH-2908","status":"Resolved","summary":"Improve MEHV char dev implementation.","customfield_11642":"","start":"","customfield_11643":"2017-03-10","end":"2017-03-10","timeoriginalestimate":86400,"timespent":140400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-02-24","issuetype":"Improvement","worklogs":[{"id":"143066","started":"2017-03-02","time":"06:47:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Investigated ioctl use in char device driver\r\nCreated a vague design about how we can use it in MEHV__POchar device driver","author":"ssohail"},{"id":"143068","started":"2017-03-03","time":"06:48:00.000-0600","timespent":0.875,"timespent_seconds":25200,"displayname":"Sohail, Sharjeel","comment":"Created a simple implementation of IOCTL in MEHV_POchar device\r\nCreated few operational MACROs for vm life-cycle management\r\nUpdated VM life cycle management applications to request through ioctl operation.\r\nRemoved some errors and warnings. Created a user-level header file for sharing operation macros.\r\nTested for vm_shutdown application","author":"ssohail"},{"id":"143673","started":"2017-03-06","time":"04:58:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Investigated improvement spaces in MEHV_POChar device driver\r\nCarried out some tests to find-out the limitation of the available implementation\r\nStudied use of ioctl APIs in character device driver.\r\nDid some tests about how to successfully handle a direct write to device file","author":"ssohail"},{"id":"143675","started":"2017-03-07","time":"05:00:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Started IOCTL API implementation in MEHV_POchar character device driver\r\nInvestigated and fixed the errors coming across.\r\nSuccessfully compiled linux with modified MEHV_POchar driver\r\nUpdated a sample application for using ioctl from user-space to request a privilege operation to MEHV_POchar driver","author":"ssohail"},{"id":"143676","started":"2017-03-08","time":"05:02:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Modified all VM life cycle management applications to use ioctl API for sending request to character device driver\r\nModified, cleaned-up and shortened the applications as much as possible.\r\nTested their compilation and functionality in detail\r\nModified MEHV_POchar write operation to successfully receive and process a string directly input to device file\r\nCleaned-up and thoroughly tested write API of driver","author":"ssohail"},{"id":"143678","started":"2017-03-09","time":"05:08:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Cleaned-up MEHV_POchar driver file\r\nAdded File headers and function headers\r\nAdded device driver header file\r\nCleaned-up the whole solution\r\nTested thoroughly.\r\nCreated commits in both MRB and Neusoft\r\nMerged the commits","author":"ssohail"}]},"MEH-2907":{"key":"MEH-2907","status":"Resolved","summary":"ABL 1651 from ABU","customfield_11642":"2017-02-20","start":"2017-02-20","customfield_11643":"2017-02-20","end":"2017-02-20","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-24","issuetype":"Requirement","worklogs":[]},"MEH-2906":{"key":"MEH-2906","status":"Resolved","summary":"Boot Time Optimizations","customfield_11642":"","start":"","customfield_11643":"2017-03-21","end":"2017-03-21","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-24","issuetype":"Workpackage","worklogs":[]},"MEH-2902":{"key":"MEH-2902","status":"Open","summary":"Third Display Enablement","customfield_11642":"2017-02-24","start":"2017-02-24","customfield_11643":"","end":"","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-02-23","issuetype":"Task","worklogs":[]},"MEH-2900":{"key":"MEH-2900","status":"Resolved","summary":"Enable 3rd display on xen","customfield_11642":"2017-02-23","start":"2017-02-23","customfield_11643":"2017-02-23","end":"2017-02-23","timeoriginalestimate":28800,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-23","issuetype":"Task","worklogs":[{"id":"142280","started":"2017-02-23","time":"08:55:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"- applied our workaround for foreground issue to xen and tested it \r\n- updated set_foreground.sh to set third display to VM1 \r\n- verified that it is working fine on xen with third display","author":"aarehman"}]},"MEH-2897":{"key":"MEH-2897","status":"Open","summary":"POC 5 Rebasing","customfield_11642":"2017-02-27","start":"2017-02-27","customfield_11643":"2017-01-03","end":"2017-01-03","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-22","issuetype":"Workpackage","worklogs":[]},"MEH-2896":{"key":"MEH-2896","status":"In Progress","summary":"1.0.1 Kernel with 3rd display enabled (ABU)","customfield_11642":"2017-02-24","start":"2017-02-24","customfield_11643":"2017-02-24","end":"2017-02-24","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-22","issuetype":"Requirement","worklogs":[]},"MEH-2895":{"key":"MEH-2895","status":"Resolved","summary":"POC 5 \u2013 02\/24","customfield_11642":"2017-02-24","start":"2017-02-24","customfield_11643":"2017-03-01","end":"2017-03-01","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":"mahmad","created":"2017-02-22","issuetype":"Requirement","worklogs":[]},"MEH-2894":{"key":"MEH-2894","status":"Resolved","summary":"GP 1.0.1 (ABU)","customfield_11642":"2017-02-20","start":"2017-02-20","customfield_11643":"2017-03-09","end":"2017-03-09","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-22","issuetype":"Requirement","worklogs":[]},"MEH-2893":{"key":"MEH-2893","status":"Resolved","summary":"Optimize delays observed during boot time on VM0 and VM1","customfield_11642":"2017-02-20","start":"2017-02-20","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":null,"timespent":129600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-02-22","issuetype":"Task","worklogs":[{"id":"142205","started":"2017-02-19","time":"22:23:00.000-0600","timespent":3,"timespent_seconds":86400,"displayname":"Ahmad, Mumtaz","comment":"Clyde did further modifications and Shaved 6.5 sec off intra boot timestamps resulting in overall 4 sec savings to vm1 prompt.","author":"mahmad"},{"id":"142313","started":"2017-02-23","time":"18:39:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Worked on the early VGT instance creation idea.  \r\nGathered logs for our discussions with Intel.","author":"cgriffin"},{"id":"143030","started":"2017-03-02","time":"02:10:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"\r\nFrom: Zia, Asad \r\nSent: Thursday, March 02, 2017 5:52 PM\r\nTo: Griffin, Clyde <Clyde_Griffin@mentor.com>\r\nCc: Javed, Madeeha <Madeeha_Javed@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Sohail, Sharjeel <Sharjeel_Sohail@mentor.com>; Rehman, Aabdul <Aabdul_Rehman@mentor.com>; Ahmad, Mumtaz <Mumtaz_Ahmad@mentor.com>\r\nSubject: RE: Early VGT Instance Creation - Draft Patches\r\n\r\nHi Clyde,\r\n\r\nFor MRB when two HDMIs are connected then:\r\n\r\nconnector 43: type DP-1, port PORT_B, status: disconnected\r\nconnector 49: type HDMI-A-1, port PORT_B, status: connected\r\nconnector 52: type DP-2, port PORT_C, status: disconnected\r\nconnector 56: type HDMI-A-2, port PORT_C, status: connected\r\n\r\nHardcoding EDID ise tricky on MRB since everyone has different HDMI monitors that they use with the MRB. The official MRB display panel has the following EDID. We only have a few of these in office.\r\n\r\nhexdump \/sys\/class\/drm\/card0-HDMI-A-2\/edid \r\n0000000 ff00 ffff ffff 00ff ae0d 1123 0000 0000\r\n0000010 1533 0301 1aa2 780e 230a a715 5356 259b\r\n0000020 500f 0054 0000 0101 0101 0101 0101 0101\r\n0000030 0101 0101 0101 3636 a080 3870 4020 2030\r\n0000040 0035 9000 0010 1a00 2424 a080 3870 4020\r\n0000050 2030 0035 9000 0010 1a00 0000 fe00 4300\r\n0000060 4e4d 200a 2020 2020 2020 2020 0000 fe00\r\n0000070 4e00 3131 4836 4553 452d 3142 200a 1801\r\n0000080 0302 f122 904f 0405 0203 0607 1f01 1314\r\n0000090 1112 1516 0923 077f 0183 0000 0365 000c\r\n00000a0 0020 3a02 1880 3871 402d 2c58 0045 0cdc\r\n00000b0 0011 1e00 3a02 d080 3872 402d 2c10 8045\r\n00000c0 0cdc 0011 1e00 1d01 1880 1c71 2016 2c58\r\n00000d0 0025 0cdc 0011 9e00 1d01 7200 d051 201e\r\n00000e0 286e 0055 0cdc 0011 1e00 0a8c 8ad0 e020\r\n00000f0 102d 3e10 0096 0cdc 0011 1800 0000 3e00\r\n0000100\r\n\r\nOne of the DELL\u2019s 1680x1050 monitor commonly found in our office has the following EDID:\r\n\r\nhexdump \/sys\/class\/drm\/card0-HDMI-A-1\/edid \r\n0000000 ff00 ffff ffff 00ff ac10 a019 414c 3039\r\n0000010 1124 0301 2b80 781b eeee a391 4c54 2699\r\n0000020 500f a554 004b 8081 4f71 0101 0101 0101\r\n0000030 0101 0101 0101 2e7c a090 1a60 401e 2030\r\n0000040 0036 0eb2 0011 1a00 0000 ff00 4e00 3446\r\n0000050 3930 3937 3034 4139 0a4c 0000 fc00 4400\r\n0000060 4c45 204c 3032 3730 4657 0a50 0000 fd00\r\n0000070 3800 1e4c 0e53 0a00 2020 2020 2020 8700\r\n0000080\r\n\r\nI dumped EDID from couple of DELL\u2019s monitors in office, its similar but not the same. We can hand craft a custom EDID to force a resolution of 640x480 which is the least common dominator for almost all HDMI displays. Since MRB is only used for internal testing so we can decide either way.\r\n\r\nOn Neusoft HW the port configuration with two displays attached is:\r\n\r\nconnector 43: type DP-1, port PORT_B, status: disconnected\r\nconnector 49: type HDMI-A-1, port PORT_B, status: connected\r\nconnector 52: type DP-2, port PORT_C, status: disconnected\r\nconnector 56: type HDMI-A-2, port PORT_C, status: connected\r\n\r\nOn Neusoft HW, please use the attached EDIDs.\r\n\r\n\u201cport overrides\u201d should be the same as the port name, i.e. PORT_A for PORT_A. \r\n\r\nRegards,\r\nAsad\r\n\r\nFrom: Griffin, Clyde \r\nSent: Thursday, March 02, 2017 9:49 AM\r\nTo: Zia, Asad <Asad_Zia@mentor.com>\r\nCc: Javed, Madeeha <Madeeha_Javed@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Sohail, Sharjeel <Sharjeel_Sohail@mentor.com>; Rehman, Aabdul <Aabdul_Rehman@mentor.com>; Ahmad, Mumtaz <Mumtaz_Ahmad@mentor.com>\r\nSubject: Early VGT Instance Creation - Draft Patches\r\n\r\nAsad,\r\n\r\nHere is my early vgt instance create patch  set for the hypervisor and guest kernels.  I am not ready to commit it.  And I'm not really ready for critique.  This will ultimately get broken up into multiple separate patches since several things are combined here. I actually wanted to hold this till I can saw the real benefit that comes from this when the 6.5 sec delay is eliminated on vm1.  It's only then that this patch becomes truly convincing and compelling.  But if you want to play with it now go ahead.\r\n\r\nI am convinced that we will need to do this.  Intel may come up with a different solution later on but until then this approach is knocking 5 sec off vm1 boot.  The need for this stems from the fact the we cannot, with the current i915\/vgt code base, allow vm1 to boot until a vgt instance is created.  Waiting until udev rules populate sysfs on VM0 is too costly.\r\n\r\nAsad, one thing that would help me wrap this up is if you someone could dump out the contents of the \/sys\/kernel\/vgt\/vm1\/  subdirs and the content of those files in the \"golden\" (what we want to settle on) Neusoft and MRB hardware configurations.  Since creating a VGT instance way early like I am doing requires some hard coded PORT configurations I need to know what those should be in a default development scenario for both MRB and Neusoft.  I will probably have a kernel config option to turn all this off and on.\r\n\r\nSo I need to know the following for MRB and Neusoft.\r\n\u2022\tWhat port the cluster will be using, \r\n\u2022\tWhat port IVI will be using.  \r\nAnd for each port we are using, I need to know\r\n\u2022\tedid\r\n\u2022\tport overrides\r\n\u2022\tpipe\r\n\u2022\ttype\r\n\u2022\tFor connection, I will be setting it to connected.\r\n\r\nBasically I'm looking for the following content for the default configuration for all the ports for MRB and Neusoft.\r\n\r\nThis stuff I know\r\nroot@neusoft-siac-vm0:\/sys\/kernel\/vgt\/vm1# ls -l\r\ndrwxr-xr-x    2 root     root             0 Oct  1 00:19 PORT_A\r\ndrwxr-xr-x    2 root     root             0 Oct  1 00:19 PORT_B\r\ndrwxr-xr-x    2 root     root             0 Oct  1 00:19 PORT_C\r\ndrwxr-xr-x    2 root     root             0 Oct  1 00:19 PORT_D\r\ndrwxr-xr-x    2 root     root             0 Oct  1 00:19 PORT_E\r\n-r--r--r--    1 root     root          4096 Oct  1 00:19 aperture_base\r\n-r--r--r--    1 root     root          4096 Oct  1 00:19 aperture_base_va\r\n-r--r--r--    1 root     root          4096 Oct  1 00:19 aperture_sz\r\n-r--r--r--    1 root     root          4096 Oct  1 00:19 gm_sz\r\n-r--r--r--    1 root     root          4096 Oct  1 00:19 vgt_id\r\n\r\nThis stuff I need for each of the ports we care about.  (MRB and Neusoft)\r\nroot@neusoft-siac-vm0:\/sys\/kernel\/vgt\/vm1# cd PORT_B\r\nroot@neusoft-siac-vm0:\/sys\/kernel\/vgt\/vm1\/PORT_B# ls -l\r\n-rw-rw----    1 root     root          4096 Oct  1 00:19 connection\r\n-rw-rw----    1 root     root           128 Oct  1 00:19 edid\r\n-rw-rw----    1 root     root          4096 Oct  1 00:19 edid_text\r\n-r--r-----    1 root     root          4096 Oct  1 00:19 pipe\r\n-rw-rw----    1 root     root          4096 Oct  1 00:19 port_override\r\n-rw-rw----    1 root     root          4096 Oct  1 00:19 type\r\nroot@neusoft-siac-vm0:\/sys\/kernel\/vgt\/vm1\/PORT_B# \r\n\r\nApply the kernel side patches to vm0 and vm1.  Hopefully everything applies and builds.  I haven't tested applying these from scratch against the current checked in code base.\r\n\r\nCaveats are listed below.\r\n\r\n------------\r\nI've only done this for MRB.\r\n\r\n------------\r\nI modified printk to use a hypervisor timestamp.  The hypercall I am using is a temporary hack.  But it lets us directly compare hypervisor timestamps and dmesg timestamps in both kernels.  This is just a debug help for now.\r\n\r\n------------\r\nhvm loader in the hypervisor needs to be rebuilt after the patches are appled.\r\n\r\ncd bsp\/mrb\/target_support\/guests\/hvm_loader\r\nmake clean\r\nmake\r\n\r\n------------\r\nIf you want to try this on Neusoft the edid for Neusoft HW can be extracted using a hexdump and added to drivers\/gpu\/drm\/i915\/vgt\/sysfs.c\r\n\r\nroot@neusoft-siac-vm0:\/sys\/kernel\/vgt\/vm1\/PORT_B# hexdump edid\r\n0000000 ff00 ffff ffff 00ff ae0d 1123 0000 0000\r\n0000010 1533 0301 1aa2 780e 230a a715 5356 259b\r\n0000020 500f 0054 0000 0101 0101 0101 0101 0101\r\n0000030 0101 0101 0101 3636 a080 3870 4020 2030\r\n0000040 0035 9000 0010 1a00 2424 a080 3870 4020\r\n0000050 2030 0035 9000 0010 1a00 0000 fe00 4300\r\n0000060 4e4d 200a 2020 2020 2020 2020 0000 fe00\r\n0000070 4e00 3131 4836 4553 452d 3142 200a 1900\r\n\r\n------------\r\nThis probably has some conflicts with the VGT reset work Sharjeel is doing.  \r\nThere's a message to be ignored when VM1 boots.  \r\nI need to work some things out with Sharjeel.\r\n\r\n[5463021714ns][cpu=0][sev=2]:Error: VM_BOOT failed. VM-1 isn't in \"Waiting to BOOT\" state\r\n\r\n------------\r\nRegards,\r\nClyde\r\n","author":"ziaa"}]},"MEH-2892":{"key":"MEH-2892","status":"Open","summary":"GPIO virtualization","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"atraza","created":"2017-02-22","issuetype":"Task","worklogs":[]},"MEH-2891":{"key":"MEH-2891","status":"Open","summary":"Audio virtualization","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"atraza","created":"2017-02-22","issuetype":"Task","worklogs":[{"id":"142542","started":"2017-02-27","time":"03:40:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Documented and validated the steps required for audio streaming over PulseAudio on Neusoft hardware.","author":"ziaa"},{"id":"143660","started":"2017-03-07","time":"01:22:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"\r\n\r\nFrom: Zia, Asad \r\nSent: Sunday, March 05, 2017 2:39 PM\r\nTo: Srivastava, Harshit <Harshit_Srivastava@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Buehler, Karl <Karl_Buehler@mentor.com>; Javed, Madeeha <Madeeha_Javed@mentor.com>\r\nCc: Grzan, Nenad <Nenad_Grzan@mentor.com>; Ahmad, Mumtaz <Mumtaz_Ahmad@mentor.com>\r\nSubject: Re: Audio manager\r\n\r\nHi,\r\n\r\nDuring meeting it was suggested that VIRTIO is a shared communication resource between the two guests so it is susceptible to jitter under high load. \r\n\r\nI investigated and found out that Linux guests support a feature called Multiqueue virtio-net. This is combined with another Linux feature called Receive flow steering. Please see uapi\/linux\/virtio_net.h. Together multi-queue support optimizes RX interrupt affinity and TX queue selection in order to make a specific queue private to a specific vCPU.\r\n\r\nMEHV does not currently implement backed support for Multiqueue virtio.\r\n\r\nRegards,\r\nAsad\r\n","author":"ziaa"},{"id":"143665","started":"2017-03-10","time":"04:07:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Investigating how to include pacmd utility under MEHV yocto to dump list of sound cards and sinks.","author":"ziaa"},{"id":"144501","started":"2017-03-15","time":"04:58:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Hi,\r\n\r\nHere are my updates. I was able to run Audio on MRB with native Linux, by connecting an HDMI TV. \r\n\r\nThe basis of my HDMI Audio proposal is the DS90UB949 FPD chip connected to Cluster. According to its docs it works in following three modes: \r\n\r\nHDMI\tAudio embedded in the HDMI interface\r\nDVI\tAudio over external I2S interface\r\nAUX Audio\tAudio over GPIO\r\n\r\nNeusoft hardware schematics are below:\r\n\r\n \r\n\r\nSo for Neusoft the hardware the DS90UB949 is configured in DVI mode. The I2S channel that is being used is apparently controlled by Audio Cluster (AUC). Which is a no-go since AUC is cannot be shared. For my proposal to work, we need to run DS90UB949 in HDMI mode where Audio stream is multiplexed with video signal. \r\n\r\nLooking at Apollo Lake doc (Volume_4_EDS_0p7_Unstructured_Final.pdf) under AUC Chapter 4, I found a statment that says AUC implemetnts HD-A iDISP link controller for sending data samples for HDMI output interface. This is confusing, if AUC has a dedicated link for sending data to HDMI then why Neusoft folks used external I2S? I cannot find any information on this iDISP link controller so I cannot be confident if it can be programmed indpendantly. The MRB schematics don\u2018t seem to use the similart I2S arrangement as Neusoft.\r\n\r\nThis is shaping up to be a question for Intel. Yesterday I learned that Intel is planning to build their reference Automotive platform on Appllo Lake. It would be interesting to pose this question to Intel\u2019s audio experts that, how do they see their audio hardware fit in a virutalized environment? \r\n\r\nI believe Mentor and Intel are already working on a solution, in noticed this https:\/\/mentorgraphics.atlassian.net\/wiki\/display\/IH\/Audio+Architecture I am curious to know that if this new design will be available in time for the Neusoft project.\r\n\r\nRegards,\r\nAsad\r\n\r\n\r\n","author":"ziaa"},{"id":"144502","started":"2017-03-15","time":"05:00:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Hi,\r\n\r\nThere is yet another way to play low sample rate audio independent of the dedicated audio controller. It requires a hardware PWM line and addition of simple capacitor or an OpAmp. Since Cluster just needs to play warning tones, it just might be feasible.\r\n\r\n\r\n \r\n \r\n Please see this for the theoretical background http:\/\/www.ti.com\/lit\/an\/spraa88a\/spraa88a.pdf\r\n\r\nRegards,\r\nAsad\r\n \r\n","author":"ziaa"}]},"MEH-2890":{"key":"MEH-2890","status":"Open","summary":"Black Duck analysis","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2017-02-22","issuetype":"Task","worklogs":[]},"MEH-2888":{"key":"MEH-2888","status":"Resolved","summary":"Enable GP 1.0.1 on Neusoft hardware ","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":57600,"timespent":91800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-17","issuetype":"Task","worklogs":[{"id":"143019","started":"2017-03-02","time":"01:39:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"Downloaded and setup POC5 build environment. Started building domu images.\r\nUpdated IOC and ABL on MRB.\r\nObtained ACPI tables provided by ABL on POC5 using native Linux.\r\n","author":"javedm"},{"id":"143020","started":"2017-03-03","time":"01:48:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Created per guest ACPI tables.\r\nModified POC5 kernel to use kernel configurations necessary for booting hypervisor.\r\nApplied kernel patches necessary to boot hypervisor.","author":"javedm"},{"id":"143952","started":"2017-03-06","time":"14:13:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Continued to work on building guest kernels with necessary patches to boot over hypervisor.\r\nTested POC5 guests on MRB. Guests booted successfully.\r\n","author":"javedm"},{"id":"143956","started":"2017-03-08","time":"14:26:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Javed, Madeeha","comment":"Prepared instructions for Clyde to build and work with POC5 basic enablement.","author":"javedm"},{"id":"143957","started":"2017-03-09","time":"14:29:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"Obtained patches from Clyde.\r\nCleaned up patches from MEHV repo and created a consolidated set of patches to apply for VM0 and VM1.\r\nRebuilt kernels and tested on MRB.","author":"javedm"},{"id":"143958","started":"2017-03-10","time":"14:33:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Applied patches sent by ABU team for Neusoft bsp.\r\nBuilt kernels with the new patches.","author":"javedm"},{"id":"144077","started":"2017-03-13","time":"09:28:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Ran GVT-g enabled guests on Neusoft hardware. Works successfully.\r\nStarted organizing patches for commit.\r\n","author":"javedm"},{"id":"144323","started":"2017-03-14","time":"06:15:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Did a big re-org of patches in to meta-hyp-vm* layers and moved the poc4\/older patches to a separate directory.\r\n","author":"javedm"}]},"MEH-2887":{"key":"MEH-2887","status":"Resolved","summary":"Enable ABL 1651 on Neusoft hardware","customfield_11642":"","start":"","customfield_11643":"2017-02-24","end":"2017-02-24","timeoriginalestimate":0,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-17","issuetype":"Task","worklogs":[{"id":"142372","started":"2017-02-21","time":"07:02:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Javed, Madeeha","comment":"Flashed ABL 1651.\r\nObtained ACPI tables using native Linux.\r\nParitioned the new tables - APIC and DSDT specifically.\r\nAdded Camera and Audio tables.\r\nTested updates and committed on branch. ","author":"javedm"}]},"MEH-2886":{"key":"MEH-2886","status":"Resolved","summary":"MEHV internal release 1.7","customfield_11642":"2017-02-15","start":"2017-02-15","customfield_11643":"2017-02-17","end":"2017-02-17","timeoriginalestimate":7200,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-17","issuetype":"Task","worklogs":[{"id":"141666","started":"2017-02-17","time":"06:50:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Performed all sanity tests.\r\n- Hypervisor and Linux guest 0 and 1 boot to prompt.\r\n- VM1 boots with 3 cpus.\r\n- eMMC and USB devices are working.\r\n- GVT-g is working.\r\n- No timer issues are observed.\r\n- VM1 auto boot is working.\r\n- i2c partitioning is as per required.\r\n- Foreground is updated automatically.\r\nPrepared notes, source branches and JIRA tickets. ","author":"javedm"}]},"MEH-2884":{"key":"MEH-2884","status":"Open","summary":"3x 1080p video decoding support","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-16","issuetype":"Workpackage","worklogs":[]},"MEH-2883":{"key":"MEH-2883","status":"Open","summary":"Enablement of 4 Displays (MIPI-DSI) bridge","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-16","issuetype":"Workpackage","worklogs":[]},"MEH-2882":{"key":"MEH-2882","status":"Resolved","summary":"MEHV for GP 1.0.1 and ABL 1651","customfield_11642":"","start":"","customfield_11643":"2017-03-29","end":"2017-03-29","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-16","issuetype":"Workpackage","worklogs":[]},"MEH-2872":{"key":"MEH-2872","status":"Resolved","summary":"Foreground bug","customfield_11642":"","start":"","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-02-13","issuetype":"Workpackage","worklogs":[]},"MEH-2871":{"key":"MEH-2871","status":"Resolved","summary":"Integrate Intel's fix for set foreground bug","customfield_11642":"","start":"","customfield_11643":"2017-02-16","end":"2017-02-16","timeoriginalestimate":0,"timespent":50400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-13","issuetype":"Task","worklogs":[{"id":"141121","started":"2017-02-13","time":"00:33:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Reviewed Intel's patch and provided feedback to Arvind.","author":"ziaa"},{"id":"141653","started":"2017-02-13","time":"05:36:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Tested Intel's patch in MEHV's setup.\r\nObserved corruption of cluster's graphic display when graphic application on VM1 was started.\r\nTested the new patch provided by Asad\/Aabdul.\r\nReviewed the patch and provided feedback to Aabdul.\r\nCorruption of either cluster was observed when graphics application was started on VM0 first time and then 5s sleep in the foreground update loop also caused issues.\r\nShared the findings with the team.\r\nIntegrated the new patch in MEHV.","author":"javedm"},{"id":"141660","started":"2017-02-14","time":"06:09:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Tried to improve the foreground script to fix the corruption issues but that didnt help.\r\nSuggested Aabdul to use poll mechanism to detect change in sysfs display_modeset attribute while being blocked or use the usermode helper API to invoke the script from kerne.\r\nWrote and tested a small application to demonstrate the poll approach and sent it to Aabdul for improvement.\r\n","author":"javedm"},{"id":"141663","started":"2017-02-15","time":"06:25:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"Continued to improve the poll program. Aabdul reported that it does not block. Looks like a dummy read needs to be introduced before poll() and after open() the sysfs attribute file. Poll started to block but now it didnt unblock on sysfs attr change. Further investigation revealed that when poll() is done on a sysfs file, it uses sysfs_poll and needs a sysfs notify call from kernel when the attr is changed. This approach worked but since I did not invoke sysfs_notify from all the required places in the kernel code, one case of the corruption issue failed.\r\n\r\nMeanwhile, Aabdul provided the patch that fixed the corruption using usermode helper API but since this approach changes the kernel code to invoke a user space script, I asked Aabdul to look at udev events.\r\nTested the above patch on my side.\r\n\r\nAabdul supplied a second patch that used udev events. Tested the patch and committed all changes.","author":"javedm"}]},"MEH-2870":{"key":"MEH-2870","status":"Resolved","summary":"Try delayed GTT initialization with i915.tsd_init ","customfield_11642":"","start":"","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":57600,"timespent":36000,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-13","issuetype":"Sub-task","worklogs":[{"id":"141118","started":"2017-02-13","time":"00:27:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"\r\nFrom: Zia, Asad \r\nSent: Saturday, February 11, 2017 6:53 PM\r\nTo: Buehler, Karl <Karl_Buehler@mentor.com>; Srivastava, Harshit <Harshit_Srivastava@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>\r\nCc: Javed, Madeeha <Madeeha_Javed@mentor.com>; Griffin, Clyde <Clyde_Griffin@mentor.com>; ABU Neusoft HS7 <abu-neusoft_hs7@mentor.com>; Ahmad, Mumtaz <Mumtaz_Ahmad@mentor.com>\r\nSubject: RE: Boot time and other optimizations\r\n\r\n\r\nHi,\r\n\r\nI found a promising lead that may help us getting a text login prompt on screen earlier and make the system appear to have booted faster.\r\n\r\nWhen we do instrumentation of the boot process, GTT setup on VM1 comes on top. It takes 13 seconds to setup GTTs during boot, with MEHV. My theory is that, GTT is not required to render the text login screen and interactive prompt, not the per process GTT part of it anyway. \r\n\r\nI discovered this experimental i915 feature to delay setting up of GTTs . What's delayed is controlled by the tsd_init module parameter bitmask with the following:\r\n \r\n * Delay global gtt non-preallocated init        - 0x01\r\n * Delay driver registration (acpi_video_driver) - 0x02\r\n * Skip registering the GMBUS MISC pin           - 0x04\r\n * Delay ddi port A initialization               - 0x10\r\n * Delay ddi port B initialization               - 0x20\r\n * Delay ddi port C initialization               - 0x40\r\n * Delay mipip dsi initialization                - 0x80\r\n\r\nThis delay loading feature is not in upstream i915 code, so there is no public information if this works. I will try this first thing Monday morning. In the meanwhile, I have opened ticket https:\/\/mentorgraphics.atlassian.net\/browse\/IAPLP-465 to learn more about it.\r\n\r\n\r\n","author":"ziaa"},{"id":"141206","started":"2017-02-13","time":"07:59:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"I tried various configuration for i915.tsd_init and i915.tds_delay kernel parameters and analyzed the affects. \r\n\r\nEnabling the delay option schedules the clear gtt function to run later which gives a benefit of 4-5 seconds in boot time to shell prompt. ","author":"aarehman"},{"id":"141475","started":"2017-02-15","time":"10:39:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"tried completely removing the clear ggtt operation to see how much gain can be achieved. overall gain of 4 seconds can be seen.\r\n\r\nPlease see attached patch: clear_ggtt.patch","author":"aarehman"},{"id":"141508","started":"2017-02-13","time":"00:08:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Matthias von Faber replied to tsd_init query to Intel In the Harman MGU project they also had the slow GTT initialization issue. The tsd_init hack simply moved that initialization ahead to the first time someone wanted to use the graphics. They have i915 configured as a module, so there was no benefit for them.\r\nHowever, this upstream commit greatly reduced initialization time for them:\r\nhttp:\/\/git.kernel.org\/cgit\/linux\/kernel\/git\/torvalds\/linux.git\/commit\/?id=f7770bfd9fd2ef13a5b70de1ffbc16019a929b48\r\nIt was supplied by Intel on the following branch https:\/\/github.com\/MentorEmbedded\/linux-apl-p\/commits\/intel\/mgu\/4.1.27-16w51.5_HF-i915\r\n\r\nMy analysis is that, above patch conforms that skipping or delaying the clearing of GTT is safe. Our setup is based on Gvt-g, which forces i915 to aliasing-ppgtt only. We needed to modify this patch a for our case. With this patch applied we see similar improvement as with i915 parameter tsd_init=1,tsd_delay=2000\u200b0","author":"ziaa"},{"id":"141509","started":"2017-02-15","time":"00:12:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Reviewed boot time one more time.","author":"ziaa"}]},"MEH-2869":{"key":"MEH-2869","status":"Resolved","summary":"Improvements","customfield_11642":"","start":"","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":28800,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-02-12","issuetype":"Story","worklogs":[]},"MEH-2867":{"key":"MEH-2867","status":"Resolved","summary":"Workaround for set foreground bug","customfield_11642":"","start":"","customfield_11643":"2017-02-16","end":"2017-02-16","timeoriginalestimate":0,"timespent":90000,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-10","issuetype":"Task","worklogs":[{"id":"141031","started":"2017-02-10","time":"08:21:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Zia, Asad","comment":"Good news, I have traced a single function in Gvt-g VM0 side, that gets called when either VM0 or VM1 performs modeseting. It means we no longer need to setup communication between the two VMs for the purpose of \u2018set foreground\u2019 issue.\r\n \r\nfile kernel-source\/drivers\/gpu\/drm\/i915\/vgt\/handlers.c, function dpy_modeset_mmio_write\r\n \r\nstatic bool dpy_modeset_mmio_write(struct vgt_device *vgt, unsigned int offset,\r\n        void *p_data, unsigned int bytes)\r\n{\r\n        bool rc;\r\n \r\n        rc = default_mmio_write(vgt, offset, p_data, bytes);\r\n \r\n        if (!reg_hw_access(vgt, offset) &&\r\n                (*(vgt_reg_t *)p_data != __vreg(vgt, offset))) {\r\n \r\n                vgt_warn(\"modeset mmio[0x%x] change value from 0x%x to 0x%x\\n\"\r\n                        \"\\twhich is not supported. MMIO write is ignored!\\n\",\r\n                                                offset,\r\n                                                __vreg(vgt, offset),\r\n                                                *(vgt_reg_t *)p_data);\r\n        }\r\n \r\n    \/************************ VM0 Modeset ****************************\/\r\n    if(offset == 393236){\r\n        \/\/signal utility to set foreground\r\n    }\r\n \r\n \r\n    \/************************ VM1 Modeset ****************************\/\r\n    if(offset == 397332){\r\n        \/\/signal utility to set foreground\r\n    }\r\n \r\n        return true;\r\n}\r\n \r\nTechnically, we can access the PIPE device maintained within the Gvt-g module and we can attempt to change its owner programmatically, but it will be invasive and I don\u2019t know the code well enough to decide if it is legal to change owners this way. The safe option is to send a signal to a user space script from this point in code shown above. That scripts then updates the foreground and returns back to listening to the signal in a loop.\r\n \r\nI will leave the implementation details to Sharjeel.","author":"ziaa"},{"id":"141208","started":"2017-02-13","time":"08:05:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"With signalling infrastructure as resolved in MEH-2858, currently we are pooling the sysfs node exposed to check if there was some event on VM1 and reset the foreground PIPE accordingly. \r\n\r\nPlease see the attached script: foreground_daemon.sh","author":"aarehman"},{"id":"141474","started":"2017-02-14","time":"10:28:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Rehman, Aabdul","comment":"tried various approaches to reliably detect a graphics event and trigger graphics restoration. \r\n\r\nFirst approach consisted of following:\r\n - detecting events in modeset emulation handler \r\n - sending signal to user space via counter value exposed through sysfs\r\n - polling daemon which triggers foreground switch on counter change\r\nFiles: foreground_signal.patch,  foreground_daemon.sh\r\n\r\nSecond approach consisted of following:\r\n  - detecting events in modeset emulation handler and context creation api\r\n  - sending signal to user space via usermodehelper api \r\n  - script that triggers foreground switch\r\nFile: scheduled_trigger_grestore_usermode.patch\r\n\r\nThird approach consisted of following:\r\n  - detecting events in modeset emulation handler and context creation api\r\n  - sending signal to user space via udev event  \r\n  - script that triggers foreground switch\r\nFiles: scheduled_trigger_grestore_udev_event.patch","author":"aarehman"},{"id":"141510","started":"2017-02-14","time":"00:13:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"The current trigger is relies on hardware register writes related to modeset. Sometimes the DRM layer decides that current crtc settings are good enough and does not call the function to write the registers. Having a missing EDID increases the chances of a the above.\r\n\r\nInvestigate a solution to this problem by adding a schedule_delayed_work() to  vgt_g2v_execlist_context lifecycle. Testing showed that the script is now being triggered more reliably.\r\n\r\n\r\n","author":"ziaa"}]},"MEH-2866":{"key":"MEH-2866","status":"Resolved","summary":"Develop intra-guest communication\/signalling mechanism and infrastructure.","customfield_11642":"2017-02-10","start":"2017-02-10","customfield_11643":"2017-03-13","end":"2017-03-13","timeoriginalestimate":57600,"timespent":46800,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-02-10","issuetype":"Task","worklogs":[{"id":"141073","started":"2017-02-10","time":"11:25:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Sohail, Sharjeel","comment":"Some research, some design, some development","author":"ssohail"},{"id":"141320","started":"2017-02-13","time":"06:34:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Implemented functionality through MEHV_POchar char-device driver to \r\ncreate inter-guest signalling mechanism.\r\nMEHV_POchar will always ask for target_vm_id first. After this it will accept a \r\nstring, it will investigate the string. Depending on this string, it will either \r\nrequest hypervisor for vm life cycle management operations or ask \r\nhypervisor to send a signal to target vm.\r\nHypervisor side handler is implemented but doesn't do anything at this \r\nmoment. It will be updated depending on use-cases","author":"ssohail"}]},"MEH-2865":{"key":"MEH-2865","status":"Resolved","summary":"IVI VM is not able to reboot itself","customfield_11642":"","start":"","customfield_11643":"2017-02-27","end":"2017-02-27","timeoriginalestimate":230400,"timespent":268200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-02-09","issuetype":"Sub-task","worklogs":[{"id":"141631","started":"2017-02-14","time":"01:54:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Started designing procedure for extending reboot support for client VM which \r\ncan also request master-VM to do shutdown of vgt-instance corresponding to \r\nthis rebooting VM.\r\nWent through code snippets which can serve the purpose. Investigated how \r\nalready present vgt code can be edit to shutdown or reset a single \r\nvgt-instance","author":"ssohail"},{"id":"141633","started":"2017-02-15","time":"01:56:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Discussed my ideas for reseting vgt instance with Clyde. Studied some \r\nspecific APIs pointed by Clyde which serve the purpose of processing ioreq \r\nin master VM","author":"ssohail"},{"id":"141634","started":"2017-02-16","time":"01:58:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Refined the solution based on some corner cases.\r\nRefined VM life cycle management code in hypervisor.\r\nWrote some helper API to access ioreq_server pointer using VM pointer\r\nWrote an API which can send an asynchronous request to master-VM for \r\nreseting the ioreq-server and vgt instance of rebooting VM","author":"ssohail"},{"id":"142370","started":"2017-02-20","time":"06:59:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Investigated VM shutdown path and tried to find out the best place for sending notification to master VM\r\nImplemented some sample code in master VM and investigated the sequence of processing of ioreq in the master VM","author":"ssohail"},{"id":"142373","started":"2017-02-21","time":"07:01:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Implemented detailed idea for reset of vgt instance and master VM side.\r\nCreated new APIs in sysfs code which can set VP instance through already created vgt instance, then it releases created vgt instance and creates a new one with information stored in VP instance.\r\nCalled this API from notification processing thread but it failed. The reason was probably the fact that during vgt instance release process, the kernel thread against this instance is forcefully killed.\r\nWe are working in the same kernel thread, therefore disturbing behaviour is expected","author":"ssohail"},{"id":"142375","started":"2017-02-22","time":"07:07:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Used user-app method for running a user binary\/script for vgt-instance release and recreation.\r\nAdded code in sysfs file to register vgt-instance-release API with sysfs attribute, so that from user-space this can be changing the attribute can run this release API.\r\nHad problem running a shell script directly through user-app so created an executable binary which is run by user-app and then it kicks the script which changes the attributes hence resets the vgt-instance.\r\n\r\nHad to do some corrections along the way in vgt-instance shutdown","author":"ssohail"},{"id":"142376","started":"2017-02-23","time":"07:11:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Discussed with Madeeha and found that ABU will not accept solution containing user-app method for protection\/security reasons of Linux kernel space.\r\nMy requirement is to handle vgt-reset in a different thread. Used multi-thread creation procedures to create a new kernel thread and whenever a notification for vgt-reset is received, this request is processed inside a new kernel thread and after that kernel is released.\r\n\r\nDone some corrections in VM-life cycle management and Hypervisor side.\r\nAt master VM side, had to comment out vmem_destroy API which was creating page-faults.\r\n","author":"ssohail"},{"id":"142377","started":"2017-02-24","time":"07:16:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Did some clean-up in the solution. Created a commit and made this commit into personal fork.\r\nTested the solution on both MRB (at my desk) and Neusoft (at Abdul-Rehman's desk)\r\nDid some more investigation in vmem_destroy API about which exact instruction was creating page-fault.\r\n","author":"ssohail"},{"id":"142602","started":"2017-02-27","time":"06:59:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"    Added some checks and locks in VGT back-end\r\n    \r\n    * Null pointers can create protection error if VGT back-end keep\r\n      running even if VM is shutting down or rebooting\r\n    * Added locks and checks to cover these corner cases\r\n    * Did some cleanup","author":"ssohail"},{"id":"142619","started":"2017-02-27","time":"08:37:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"Verified Sharjeel's work on Neusoft hardware. ","author":"aarehman"},{"id":"142634","started":"2017-02-27","time":"10:24:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"Tested on MRB and Neusoft with new environment\r\nCreated commits containing fixes and cleanup\r\n\r\nNo more work required under this issue","author":"ssohail"},{"id":"142790","started":"2017-02-24","time":"18:07:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"2017-02-24\r\nReviewed\/approved patches prepared by Sharjeel for VM1 GVT-g reset.","author":"cgriffin"},{"id":"142920","started":"2017-02-28","time":"04:46:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"A little more work on this IVI-VM issue related to some cleanup and structuring","author":"ssohail"},{"id":"143084","started":"2017-03-03","time":"08:23:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Rehman, Aabdul","comment":"Verified the latest master commit containing reboot patches on neusoft and updated the fit images on master branch.","author":"aarehman"}]},"MEH-2864":{"key":"MEH-2864","status":"Resolved","summary":"TSC frequency should be calculated properly","customfield_11642":"2017-02-09","start":"2017-02-09","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":32400,"timespent":32400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-02-09","issuetype":"Bug","worklogs":[{"id":"141072","started":"2017-02-09","time":"11:23:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Implemented code for calculating TSC frequency at run time.\r\nNo need for hard-coding frequency for each BSP individually.\r\nAll timestamps are well aligned with Real-Time now","author":"ssohail"},{"id":"141319","started":"2017-02-14","time":"06:28:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"Did some cleanup in the implementation.\r\nTSC frequency calculation implementation is working fine now.","author":"ssohail"}]},"MEH-2862":{"key":"MEH-2862","status":"Resolved","summary":"Console Logs analysis","customfield_11642":"","start":"","customfield_11643":"2017-02-16","end":"2017-02-16","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-02-09","issuetype":"Workpackage","worklogs":[]},"MEH-2861":{"key":"MEH-2861","status":"Resolved","summary":"Investigate why atomic warning is observed when nuclear_pageflip is disabled:","customfield_11642":"","start":"","customfield_11643":"2017-02-09","end":"2017-02-09","timeoriginalestimate":28800,"timespent":25200,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-08","issuetype":"Sub-task","worklogs":[{"id":"140870","started":"2017-02-07","time":"23:37:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Reviewed source and created Jira issue with details specific to the line of code.","author":"ziaa"},{"id":"140904","started":"2017-02-09","time":"04:20:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Rehman, Aabdul","comment":"Even if the kernel parameter i915.nuclear_pagefile=1 is not set, the fb_helper->atomic is forcefully set to true in i915 driver. Not setting the parameter only prevents the broadcast of feature DRIVER_ATOMIC. There is alot of code in i915 that is atomic and is being called without this check for fb_helper->atomic, as a consequence intel_atomic_wait_for_vblanks is always called which waits for a vblank event but fails(this is the problem being solved here). \r\n\r\nApproaches taken to solve the problem:\r\n-> removed the forced setting of fb_helper->atomic to true from file: intel_fbdev.c:718\r\n     Result:\r\n      - didn't solved the problem because the same api is still being called.\r\n-> increased the timeout to infinite for waiting on the event (intel_display.c:13696)\r\n     Result:\r\n      - this solved the problem.\r\n\r\nConclusion:\r\n    The issue seems to be timing related because if timeout is increased error disappears. \r\n","author":"aarehman"}]},"MEH-2860":{"key":"MEH-2860","status":"Open","summary":"Development Drops","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-02-08","issuetype":"Workpackage","worklogs":[]},"MEH-2859":{"key":"MEH-2859","status":"Resolved","summary":"MEHV internal release 1.6","customfield_11642":"2017-02-08","start":"2017-02-08","customfield_11643":"2017-02-09","end":"2017-02-09","timeoriginalestimate":7200,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-08","issuetype":"Task","worklogs":[{"id":"140878","started":"2017-02-08","time":"01:15:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Performed all sanity tests.\r\n(1) Assignment of i2c 0 to VM1.\r\n(2) Auto boot of vm1 from vm0.\r\n(3) Obtained boot timing after suppressing log messages.\r\n(4) Disabling nuclear page flip option.\r\n(5) Ensured frame rate is 60.\r\n(6) sleep 10 and that no timer issues are observed.\r\n(7) Synced up mehv_extern.h between mehv and guest patches.\r\nmisc.\r\nPrepared notes, source branches and JIRA tickets.","author":"javedm"}]},"MEH-2858":{"key":"MEH-2858","status":"Resolved","summary":"Sync signal needed between VM1 and VM0 to set foreground","customfield_11642":"","start":"","customfield_11643":"2017-02-13","end":"2017-02-13","timeoriginalestimate":28800,"timespent":50400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-08","issuetype":"Sub-task","worklogs":[{"id":"140872","started":"2017-02-09","time":"00:01:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Griffin, Clyde","comment":"I was looking around in the code today.  I need more investigation but I think we can do this via API call from mehv_gvt.ko.","author":"cgriffin"},{"id":"141176","started":"2017-02-10","time":"06:04:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"When a graphics application is run in VM1 writes crtc resolution which is handled by vgt handlers in VM0. As per discussion it was decided that a hook will be placed in that handler to set the foreground. \r\n\r\nPlease find attached with this ticket patch: setting_foreground_handler.patch.\r\n\r\nThis patch places a hook inside the handler which actually places a function call on workqueue to setforeground programmatically. ","author":"aarehman"},{"id":"141205","started":"2017-02-13","time":"07:43:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"New approach was adopted in which there is a counter that is maintained in global data structure of pgt_device that keeps track of how many times the handler has been called. Then this counter was exposed to sysfs using standard vgt sysfs system. Now this sysfs node can be pooled to check for calls. and in future if extra data is required to be communicated to user space it can easily be implemented. \r\n\r\nPlease see the attached patch(foreground_signal.patch). ","author":"aarehman"}]},"MEH-2857":{"key":"MEH-2857","status":"Resolved","summary":"VM life cycle management should be char-device based rather than syscall based","customfield_11642":"2017-02-06","start":"2017-02-06","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-02-07","issuetype":"Bug","worklogs":[{"id":"140881","started":"2017-02-08","time":"01:42:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Ported changes to HS7 layers.\r\nPrepared patch to remove old syscall related changes.\r\n","author":"javedm"},{"id":"140885","started":"2017-02-06","time":"02:44:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Discussed requirements and concerns with Arvind about what I previously implemented and what is to be implemented","author":"ssohail"},{"id":"140886","started":"2017-02-07","time":"02:46:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Studied material and sample codes.","author":"ssohail"},{"id":"140887","started":"2017-02-07","time":"02:47:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Sohail, Sharjeel","comment":"Implemented char device driver for privileged operations","author":"ssohail"},{"id":"140888","started":"2017-02-07","time":"02:48:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Updated privileged applications to use char device driver method instead of syscall to send privilege operations requests to kernel space","author":"ssohail"},{"id":"140889","started":"2017-02-07","time":"02:49:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"Integrated all development and tested the new implementation with MRB Linux-Linux configuration","author":"ssohail"},{"id":"140890","started":"2017-02-08","time":"02:50:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Committed my changes and explained the new implementation via email.\r\nAnswered some queries to ABU","author":"ssohail"},{"id":"141321","started":"2017-02-14","time":"06:40:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"VM life cycle management is working through char-device driver implementation.\r\nNo more work required under this task","author":"ssohail"}]},"MEH-2856":{"key":"MEH-2856","status":"Resolved","summary":"Measure boot time","customfield_11642":"","start":"","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":86400,"timespent":129600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-07","issuetype":"Sub-task","worklogs":[{"id":"140676","started":"2017-02-07","time":"03:35:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"set up environment for auto boot, extracted information and organized on a sheet - please see comments \r\nboot time for MEHV on neusoft:\r\n  vm0: 11 secs \r\n  vm1: 17 secs\r\n  total from abl to vm1: 28 secs","author":"aarehman"},{"id":"140894","started":"2017-02-07","time":"03:06:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"(1) \r\nIdentified kernel code where VM1's vgt instance completes initialization.\r\nThis happens when VM0's kernel reports which display port is used for VM1's vgt instance.\r\n\r\n(2) \r\nPrints in hypervisor logging come with a timestamp.\r\nEnabled a log message on BSP boot from hypervisor.\r\nEnabled hypercall in guest 0 to print a string on hypervisor when VGT initialization completes.\r\nObtained timing via the above mechanism. Average boot time comes out to be ~50s.\r\n\r\n(2) Compared the above timing manually (using cell phone timer). Average boot time comes out to be ~35s. ","author":"javedm"},{"id":"140943","started":"2017-02-08","time":"03:08:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"(1) Tried to obtain boot timing using grabserial tool but was unsuccessful.\r\n(2) Tried to suppress kernel boot log messages using bootarg quiet and loglevel=0 but messages still appeared.\r\n(3) Tried to tackle tsc frequency settings on hypervisor to see why we are getting greater timings than actual.","author":"javedm"},{"id":"141017","started":"2017-02-10","time":"07:25:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Obtained timing information after tsc frequency issue fixed.\r\nAll information has been added in comments.","author":"javedm"},{"id":"141654","started":"2017-02-14","time":"05:46:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Tested boot times with tsd boot arguments.\r\nWas unable to reproduce the time gain.\r\nAabdul pointed out that I providing incorrect parameters.\r\nUpdated the parameters and calculated boot times again but was still unable to reproduce the time gain.\r\nShared analysis with the team.","author":"javedm"},{"id":"141662","started":"2017-02-15","time":"06:27:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Observed timings on Aabdul's setup that showed some improvement with tsd.\r\nAnalyzed Aabdul's logs and compared to mine, observed no major difference except timing.\r\nContinued to test tsd boot arguments too see if the optimized path is really taken or not. The path was being taken. Increased the tsd_delay but no avail.\r\nMeasured boot times with GTT clearing patch from Asad.\r\nThis patch showed time improvement of 3-4s.\r\n","author":"javedm"},{"id":"141664","started":"2017-02-17","time":"06:43:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Obtained information from Harshit about sources\/boot arguments used by ABU.\r\nReproduced time gain as mentioned by Harshit.\r\nShared analysis with the team.","author":"javedm"}]},"MEH-2851":{"key":"MEH-2851","status":"Resolved","summary":"Boot Time Optimizations","customfield_11642":"","start":"","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":28800,"timespent":0,"labels":["gantt_show_closed","intel_automotive_hyp"],"assignee":null,"created":"2017-02-06","issuetype":"Story","worklogs":[]},"MEH-2847":{"key":"MEH-2847","status":"Resolved","summary":"Analyze console logs between XenGT Vs MEHV and qualify the nature of graphics related errors and warnings ","customfield_11642":"","start":"","customfield_11643":"2017-02-09","end":"2017-02-09","timeoriginalestimate":28800,"timespent":32400,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-02-03","issuetype":"Bug","worklogs":[{"id":"140697","started":"2017-02-07","time":"05:40:00.000-0600","timespent":0.875,"timespent_seconds":25200,"displayname":"Zia, Asad","comment":"Sent analysis report to Harshit.","author":"ziaa"},{"id":"140880","started":"2017-02-08","time":"01:25:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"(1) Investigated about the upstream patch to disable the ioremap related warning. Found https:\/\/lists.01.org\/pipermail\/linux-nvdimm\/2015-June\/001298.html\r\nAsad also provided a link to linux kernel source with update.\r\nThe patch is more than disabling the warning so held it back for internal release. Needs more testing.\r\n\r\n(2) Removed i915.nuclear_pageflip=1 from bootargs of VM0 and VM1 but still getting the warning. Reported back to Asad.","author":"javedm"},{"id":"140899","started":"2017-02-09","time":"03:58:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Worked with Aabdul Rehman on debugging why we still get atomic warning when it is disabled on boot arguments.","author":"ziaa"}]},"MEH-2844":{"key":"MEH-2844","status":"Resolved","summary":"i2c0 should be assigned to VM1.","customfield_11642":"2017-02-03","start":"2017-02-03","customfield_11643":"2017-02-09","end":"2017-02-09","timeoriginalestimate":7200,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-03","issuetype":"Bug","worklogs":[{"id":"140431","started":"2017-02-03","time":"07:16:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Assigned i2c0 to VM1 in mehv.\r\nVerified that displays are being initialized correctly.\r\nVerified GVT-g working.\r\nAll tests were successful.","author":"javedm"}]},"MEH-2843":{"key":"MEH-2843","status":"In Progress","summary":"General support","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":0,"timespent":266400,"labels":["intel_automotive_hyp","intel_automotive_hyp_gptask"],"assignee":"javedm","created":"2017-02-03","issuetype":"Task","worklogs":[{"id":"140419","started":"2017-02-01","time":"06:05:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Adeel was facing an EPT violation when building mehv and kernel from hs7\/master branch. I asked him information about the commit and rebuilt and tried on my end. I was not able to reproduce the issue.\r\nLater he pointed out that it was due to difference between Ubuntu host versions. It was failing when he used gcc on Ubuntu 16.04 to compile sources.\r\n","author":"javedm"},{"id":"141656","started":"2017-02-13","time":"05:54:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"HL-368: Tried to build native linux with i915 enabled, to test i2c set\/get with dummy gpu devices. Was unsuccessful in building due to various compilation errors. Asked for support from Harshit to which he replied that it is a bug from Intel that native linux can not build with i915 enabled.","author":"javedm"},{"id":"141657","started":"2017-02-09","time":"05:59:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Discussions with Adeel, Asad and Mumtaz related to plan for boot time optimizations - loading i915 driver as module.","author":"javedm"},{"id":"142378","started":"2017-02-22","time":"07:20:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Measured boot times with patches provided by Clyde and sent information to the team.","author":"javedm"},{"id":"142379","started":"2017-02-24","time":"07:21:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Verified patch from Asad\/Aabdul related to enablement of 3rd display pipeline.\r\nUpdated HS7's GVT-g layer with patches from Clyde.\r\nComitted all changes.","author":"javedm"},{"id":"143021","started":"2017-03-02","time":"01:52:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Fixed a bug that popped up in MEHV for MRB due to implementation of MEH-2762.\r\nStarting analyzing requirements for marketing's demo on MRB.\r\nSent queries to Harshit and replied to Ricardo. \r\n","author":"javedm"},{"id":"143037","started":"2017-02-27","time":"02:19:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Prioritized tasks for Sharjeel and Aabdul.\r\nAssigned them various tasks and followed up.\r\nConfirmed and marked various bugs as Resolved. These bugs were already fixed in earlier releases but left open.","author":"javedm"},{"id":"143038","started":"2017-03-01","time":"02:21:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Provided inputs on various bug fixes.","author":"javedm"},{"id":"143659","started":"2017-03-08","time":"01:19:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"\r\nFrom: Zia, Asad \r\nSent: Wednesday, March 08, 2017 3:38 PM\r\nTo: Anguiano, Ricardo <Ricardo_Anguiano@mentor.com>; Javed, Madeeha <Madeeha_Javed@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Griffin, Clyde <Clyde_Griffin@mentor.com>; Patterson, Andrew <Andrew_Patterson@mentor.com>; Parikh, Chintu <Chintu_Parikh@mentor.com>; Spindler, Thomas <Thomas_Spindler@mentor.com>; Residori, Marco <Marco_Residori@mentor.com>; Freigang, Daniel <Daniel_Freigang@mentor.com>; McCombe, Kevin <Kevin_McCombe@mentor.com>\r\nCc: Ahmad, Mumtaz <Mumtaz_Ahmad@mentor.com>\r\nSubject: RE: Intel MRB Connected OS SysDK and hypervisor demo project for Socionext\/Bosch\r\n\r\nHi Ricardo,\r\n\r\nThe latest and greatest release of MEHV was made as part of SPLA1. It was for Neusoft customer hardware only. It has the dual independent display support and a reasonable resource partitioning. \r\n\r\nWe were able to run this release on MRB and I think it will benefit you. The steps are listed here http:\/\/confluence.alm.mentorg.com:8090\/display\/HV\/Run+SPL-A1+on+MRB. If you prefer to start with prebuild images then you can find those at ftp:\/\/ftp.pkl.mentorg.com\/pub\/Neusoft\/SPL_A1\/MRB_prebuilt \r\n\r\nRegards,\r\nAsad\r\n\r\nFrom: Zia, Asad \r\nSent: Friday, March 03, 2017 5:03 PM\r\nTo: Anguiano, Ricardo <Ricardo_Anguiano@mentor.com>; Javed, Madeeha <Madeeha_Javed@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Griffin, Clyde <Clyde_Griffin@mentor.com>; Patterson, Andrew <Andrew_Patterson@mentor.com>; Parikh, Chintu <Chintu_Parikh@mentor.com>; Spindler, Thomas <Thomas_Spindler@mentor.com>; Residori, Marco <Marco_Residori@mentor.com>; Freigang, Daniel <Daniel_Freigang@mentor.com>; McCombe, Kevin <Kevin_McCombe@mentor.com>\r\nSubject: RE: Intel MRB Connected OS SysDK and hypervisor demo project for Socionext\/Bosch\r\n\r\nHi Ricardo,\r\n\r\nOnce you have both VMs running on MRB, you can use the attached compositor configuration of Winston. It goes to \/etc\/wayland\/compositor.conf on each VM. You will want to edit the line 43 on both files to reflect the resolution of the HDMI monitors you are using.\r\n\r\nYou can use this page to start up Winston and demos.\r\n\r\nhttp:\/\/confluence.alm.mentorg.com:8090\/display\/ABU\/SPL-A1+Release+%3A+Steps+for+Graphics+application+start\r\n\r\nRegards,\r\nAsad\r\n\r\nFrom: Anguiano, Ricardo \r\nSent: Thursday, March 02, 2017 9:42 PM\r\nTo: Javed, Madeeha <Madeeha_Javed@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Griffin, Clyde <Clyde_Griffin@mentor.com>; Patterson, Andrew <Andrew_Patterson@mentor.com>; Parikh, Chintu <Chintu_Parikh@mentor.com>; Spindler, Thomas <Thomas_Spindler@mentor.com>; Residori, Marco <Marco_Residori@mentor.com>; Freigang, Daniel <Daniel_Freigang@mentor.com>; McCombe, Kevin <Kevin_McCombe@mentor.com>; Zia, Asad <Asad_Zia@mentor.com>\r\nSubject: Re: Intel MRB Connected OS SysDK and hypervisor demo project for Socionext\/Bosch\r\n\r\nHello Madeeha,\r\n\r\nSysDK 3.0 and Intel SDK\r\n\r\nI don't know which Intel release SysDK 3.0 is based off of. @Marco?\r\n\r\nWhat I do know, I get from this location:\r\n\r\nhttp:\/\/confluence.alm.mentorg.com:8090\/display\/ABU\/Releases \r\n\r\nABL\r\n\r\nOur demo development Intel MRB boards are running ABL 1636, which is the version the boards shipped with. The SysDK 3.0 release provides ABL 1631. Which ABL are you using?\r\n\r\nKernel\r\n\r\nLooking at my SysDK 3.0 build, I see iasImage--4.1.27-r1-mel-automotive-gr-mrb in the build\/tmp\/deploy\/images\/mel-automotive-gr-mrb directory.\r\n\r\nThanks,\r\n\r\nRicardo Anguiano\r\nTechnical Marketing Engineer\r\nMentor Graphics \/ +1-510-354-6774\r\nhttp:\/\/www.mentor.com\/embedded\r\nOn 3\/2\/2017 12:21 AM, Javed, Madeeha wrote:\r\nHi Ricardo,\r\n\r\nSure, I will update the instructions. The current ones present on confluence could be a bit stale.\r\nDo you have the information what is the kernel version SysDK 3.0 supports? And which Intel release it is based off?\r\n\r\nSysDK releases are based on Intel software releases for MRB.\r\nThere are some dependencies of hypervisor on these releases.\r\nThe hypervisor uses platform information that is tied to the ABL boot loader version on MRB.\r\nAlso the current kernel patches related to graphics are \r\n\r\nMay be SysDK 3.0 is already compatible with what we are providing. I will also sync up with ABU team on that.\r\n\r\nThanks!\r\nBest regards,\r\nMadeeha\r\n\r\n________________________________________\r\nFrom: Raghuraman, Arvind\r\nSent: Thursday, March 2, 2017 6:20 AM\r\nTo: Anguiano, Ricardo; Javed, Madeeha; Griffin, Clyde; Patterson, Andrew; Parikh, Chintu; Spindler, Thomas; Residori, Marco; Freigang, Daniel; McCombe, Kevin; Zia, Asad\r\nSubject: Re: Intel MRB Connected OS SysDK and hypervisor demo project for Socionext\/Bosch \r\n \r\n+Asad Zia.\r\n\r\n\r\n\r\nSent via the Samsung Galaxy S7 edge, an AT&T 4G LTE smartphone\r\n\r\n\r\n-------- Original message --------\r\nFrom: \"Anguiano, Ricardo\" <Ricardo_Anguiano@mentor.com> \r\nDate: 3\/1\/17 5:14 PM (GMT-08:00) \r\nTo: \"Raghuraman, Arvind\" <Arvind_Raghuraman@mentor.com>, \"Javed, Madeeha\" <Madeeha_Javed@mentor.com>, \"Griffin, Clyde\" <Clyde_Griffin@mentor.com>, \"Patterson, Andrew\" <Andrew_Patterson@mentor.com>, \"Parikh, Chintu\" <Chintu_Parikh@mentor.com>, \"Spindler, Thomas\" <Thomas_Spindler@mentor.com>, \"Residori, Marco\" <Marco_Residori@mentor.com>, \"Freigang, Daniel\" <Daniel_Freigang@mentor.com>, \"McCombe, Kevin\" <Kevin_McCombe@mentor.com> \r\nSubject: Re: Intel MRB Connected OS SysDK and hypervisor demo project for Socionext\/Bosch \r\n\r\nThank you Arvind. Yes, we plan to drive two independent displays. We've not though through the resource partitioning requirements but at least initially I expect to place a priority on the cluster performance. Really any partitioning is a starting point for our experimentation so if you have a reasonable default we will probably stick with that. Keep in mind the plan is to produce a quickly built demo intended to build credibility and to start a longer conversation with Bosch and others.\r\nWe will try your pre-built images and coordinate with Asad on the Weston config as we progress. @Asad, do you have a configuration you can point us to?\r\nMadeeha, any help you can lend in the form of documents and instructions, readme files, wiki pages, etc will be appreciated as always.\r\nCheers,\r\nRicardo Anguiano\r\nTechnical Marketing Engineer\r\nMentor Graphics \/ +1-510-354-6774\r\nhttp:\/\/www.mentor.com\/embedded\r\nOn 3\/1\/2017 4:19 PM, Raghuraman, Arvind wrote:\r\n+ Kevin \r\n \r\nHi Ricardo, \r\n \r\nWe have a Hypervisor baseline working on MRB with two connected OS Linux guests. Our repo head even contains prebuilt images that you should be able to check out and use OOB. \r\n \r\nI am assuming you plan to drive two independent displays (one for cluster and one for IVI). Currently our GVTg soln enables driving two display planes, however both planes are configured to use the same HDMI display port (there is a mechanism to set foreground to switch between planes). First thing you will need is a working Weston configuration that you could use to drive two independent HDMI displays. Asad Zia included can advise you to get this configuration working. \r\n \r\nWhat are your resource partitioning requirements for your demo ? \r\n \r\nHi Madeeha, \r\n \r\nPlease point Ricardo to our latest instructions to build guests for the MRB BSP. \r\n \r\nThanks,\r\nArvind\r\n \r\nFrom: Anguiano, Ricardo \r\nSent: Wednesday, March 01, 2017 2:13 PM\r\nTo: Javed, Madeeha <Madeeha_Javed@mentor.com>; Griffin, Clyde <Clyde_Griffin@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Patterson, Andrew <Andrew_Patterson@mentor.com>; Parikh, Chintu <Chintu_Parikh@mentor.com>; Spindler, Thomas <Thomas_Spindler@mentor.com>; Residori, Marco <Marco_Residori@mentor.com>; Freigang, Daniel <Daniel_Freigang@mentor.com>; Parikh, Chintu <Chintu_Parikh@mentor.com>\r\nSubject: Intel MRB Connected OS SysDK and hypervisor demo project for Socionext\/Bosch\r\n \r\nHello Team,\r\nAndrew, Chintu and I are working to get a two guestOS hypervisor demo working on Intel MRB. One of the guests will run our standard Flamingo IVI demo application, and the other guest will run a Socionext instrument cluster application. We would like to use Connected OS SysDK 3.0 for this demo. \r\nOur deadline for getting the two guestOS system booted on Intel MRB is March 20 for a Socionext workshop. The workshop goal is to get both guests, the IVI application plus the Socionext application running on Intel MRB by March 30th for a meeting with Bosch.\r\nA few questions:\r\nHypervisor Starting Point\r\nAre these instructions still a good starting point for the project I described above?\r\nhttps:\/\/stash.alm.mentorg.com\/projects\/PNSIC\/repos\/neusoft-sw-ivi-and-cluster-manifests\/browse\/cedar\r\nIs there a better set of instructions on getting a hypervisor + Connected OS build going?\r\nHypervisor Technical Contacts\r\nWho are the best points of contact for technical questions related to Hypervisor on Intel MRB for this project? \r\nThanks,\r\n-- \r\nRicardo Anguiano\r\nTechnical Marketing Engineer\r\nMentor Graphics \/ +1-510-354-6774\r\nhttp:\/\/www.mentor.com\/embedded\r\n\r\n\r\n","author":"ziaa"},{"id":"143960","started":"2017-03-10","time":"14:44:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Compiled and uploaded instructions to boot hypervisor on MRB, for maketing team to use for demo.","author":"javedm"},{"id":"143974","started":"2017-03-06","time":"01:11:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Setup environment and start building guests with SPL A1.\r\nProvided Andrew with a text document for instructions to build SysDK.","author":"javedm"},{"id":"145032","started":"2017-03-22","time":"01:09:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Zia, Asad","comment":"Verified and committed the new fix for IAPLP-448, the 'set foreground' bug.","author":"ziaa"},{"id":"145033","started":"2017-03-24","time":"01:11:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Verifying Clyde's kernel_0250_early_vgt_instance_create_and_notification.patch on Neusoft hardware.","author":"ziaa"},{"id":"145034","started":"2017-03-24","time":"01:13:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Started looking into the issue when disabling FBDEV emulation under Neusoft causes issue with display pipeline.","author":"ziaa"},{"id":"145035","started":"2017-03-24","time":"01:14:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Created and sent graphics requirements to Tibor to be included in the discussion with Intel architects. ","author":"ziaa"},{"id":"145171","started":"2017-03-26","time":"11:19:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"- Tested, fixed and committed patch from Arvind for instruction emulation.\r\n- Setup environment with Sharjeel's patch to work on VM1's reboot issue but was blocked by a kernel panic.","author":"javedm"},{"id":"145173","started":"2017-03-22","time":"11:28:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"- Implemented dynamic page tables idea. Allocated initial page tables using OS_Mem_Map API and utilized page array to allocate them at specific addresses. Provided the patch to Sharjeel after testing.\r\n\r\n- Worked with Adeel and Asad to exchange information on IAPLP-448 and MEH-2968.\r\n","author":"javedm"},{"id":"145175","started":"2017-03-26","time":"11:33:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"- Replied a bunch of emails of issues reported by ABU team. Created tickets where needed.\r\n- Worked with Adeel, Goekhan and Clyde on IAPLP-474.\r\n- Provided support to sales\/marketing team over emails if hypervisor can run on FAB A-C or not and unblocking Yao's build.\r\n- Provided a patch to Clyde so that he is able to run latest MEHV over ABL 1643 on Neusoft. The patch includes older ACPI tables and updates to VM description to revert ACPI table sizes.","author":"javedm"},{"id":"145314","started":"2017-03-27","time":"07:28:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Hi,\r\n\r\nI have figured out why things don\u2019t work with tsd_init=7 on Neusoft hardware. The tsd_init value is bitmasked. The 0x7 value indicate (TSD_INIT_DELAY_GGTT | TSD_INIT_DELAY_REGISTER | TSD_INIT_SKIP_PIN_MISC). Specifically we have problem with enabling the TSD_INIT_SKIP_PIN_MISC. What it does is that it skips the initialization of GMBUS_PIN_3_BXT. The PIN roles are as following:\r\n\r\n[GMBUS_PIN_1_BXT] = { \"dpb\", PCH_GPIOB }\r\n[GMBUS_PIN_2_BXT] = { \"dpc\", PCH_GPIOC }\r\n[GMBUS_PIN_3_BXT] = { \"misc\", PCH_GPIOD }\r\n\r\nOn MRB hardware, the \u201cmisc\u201d pin is not used, so things work. On Neusoft hardware, when \u201cmisc\u201d pin is disabled, the display initialization script init_cluster.sh fails, specifically the following commands fails and we don\u2019t get the I2C device required to configure the FPD chip DS90UB949. \r\n\r\necho 470 > \/sys\/class\/gpio\/export\r\necho 436 > \/sys\/class\/gpio\/export\r\necho 440 > \/sys\/class\/gpio\/export\r\necho 442 > \/sys\/class\/gpio\/export\r\necho 443 > \/sys\/class\/gpio\/export\r\necho 457 > \/sys\/class\/gpio\/export\r\necho 462 > \/sys\/class\/gpio\/export\r\n\r\nWhen I try to list i2c devices, the \u201ci915 gmbus misc\u201d gets missing when TSD_INIT_SKIP_PIN_MISC is enabled.\r\n\r\nneusoft-siac-vm0:~# i2cdetect -l\r\ni2c-0 i2c         i915 gmbus dpb                      I2C adapter\r\ni2c-1 i2c         i915 gmbus dpc                      I2C adapter\r\ni2c-2 i2c         i915 gmbus misc                     I2C adapter\r\ni2c-3 i2c         DPDDC-B                             I2C adapter\r\ni2c-4 i2c         DPDDC-C                             I2C adapter\r\ni2c-5 i2c         Synopsys DesignWare I2C adapter     I2C adapter\r\n\r\nIn summary, unless we figure out a way to initialize the FPD chip DS90UB949 from the regular \u2018dpb\u2019 or \u2018dpc\u2019, we cannot use TSD_INIT_SKIP_PIN_MISC on Neusoft. The maximum value of tsd_init that we can use on Nuesoft is hence 3. \r\n\r\nAlternately we can investigate disabling of GMBUS_PIN_1_BXT and GMBUS_PIN_2_BXT on Neusoft and try to gain the same amount of time saving as we observed on MRB. The caveat with the latter approach is that we will be modifying Intel\u2019s code and we need their approval before we can deliver this to customer.\r\n\r\nNow will investigate why we have issue with CONFIG_FBDEV_EMULATION turned off on Neusoft.\r\n\r\nRegards,\r\nAsad\r\n","author":"ziaa"},{"id":"145597","started":"2017-03-28","time":"07:32:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Hi,\r\n\r\nThe FBDEV issue on Neusoft hardware is fixed by setting boot argument i915.initial_modeset=1. This fix was suggested by Intel. The caveat is that we must run Winston to validate the graphics. kmscube won\u2019t work.\r\n\r\nI have checked in the new boot arguments for Neusoft, in hypervisor repo.\r\n\r\n","author":"ziaa"},{"id":"145816","started":"2017-03-30","time":"07:51:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Fiexed the disable fbdev patch per Satyeshwars suggestion.\r\nUpdated bootargs.  \r\nGot the early vgt instance creation patch validated.\r\nRan the tests, recording and reporting the results.\r\n","author":"ziaa"},{"id":"145891","started":"2017-03-31","time":"09:54:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"- verified interrupt line and pin for PWM device on PCI 0:1a:0\r\n- enabled PWM device in VM0 and VM1 and verified that there are no side effects","author":"aarehman"},{"id":"145939","started":"2017-03-31","time":"02:28:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"- PWM: Initiated PWM investigation, assigned to Aabdul. Updated Arvind\/Harshit on findings from Aabdul on PWM.\r\n- PCR: Sent rough estimates to Arvind on PCR list.\r\n- NFS mount issue: Tested kernel guest images from Adeel on my side. Observed that with his images, NFS timeout occurred while with our POC5 based images, no time out occurred. Issue is turning out to be a kernel configuration difference.\r\n\r\n","author":"javedm"},{"id":"145941","started":"2017-03-29","time":"02:43:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"NFS mount issue: Tried to reproduce the issue but no success.","author":"javedm"},{"id":"146327","started":"2017-04-03","time":"03:27:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Set up latest MEHV environment. Rebuilt guest images from patches on master. Setup new rootfs with Winston and apps. Worked with Adeel to reproduce IVI kernel hang issue with IVI reboot but was not able to reproduce it.\r\nUpdated release note's limitations section.\r\n","author":"javedm"},{"id":"146328","started":"2017-04-04","time":"03:32:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Updated master branch to apply fix for HL-440, to sync up with MEHV 2.1.\r\nSent PCR3 WB to Mumtaz.","author":"javedm"},{"id":"146335","started":"2017-04-05","time":"04:24:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"As a side effect of turning off fbdev emulation, we need to start Winston on VM0 on both displays. this is ugly since Winston desktop spans both displays but visible is only one.\r\n\r\nStarted looking for a fix.","author":"ziaa"}]},"MEH-2841":{"key":"MEH-2841","status":"Resolved","summary":"Investigating failed unit-test: testdisplay","customfield_11642":"2017-02-03","start":"2017-02-03","customfield_11643":"2017-02-03","end":"2017-02-03","timeoriginalestimate":28800,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-03","issuetype":"Sub-task","worklogs":[{"id":"140381","started":"2017-02-03","time":"01:08:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"debugged and resolved the issue","author":"aarehman"}]},"MEH-2839":{"key":"MEH-2839","status":"Resolved","summary":"Evaluate\/Integrate patch provided by ABU  for the TSC issue","customfield_11642":"2017-02-03","start":"2017-02-03","customfield_11643":"2017-02-04","end":"2017-02-04","timeoriginalestimate":28800,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-02","issuetype":"Task","worklogs":[{"id":"140432","started":"2017-02-03","time":"07:19:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Added the fix to VM1 kernel code and built image.\r\nDisabled ACPI PM timer on VM1.\r\nDisable watchdog patch on VM1.\r\nDisabled tickless configuration.\r\n\r\nResult: Fix is working.\r\n\r\nFPS = 60\r\nSleep returns in time.\r\nTSC is not unstable.\r\n","author":"javedm"}]},"MEH-2837":{"key":"MEH-2837","status":"Resolved","summary":"MEHV internal release 1.5","customfield_11642":"2017-02-02","start":"2017-02-02","customfield_11643":"2017-02-02","end":"2017-02-02","timeoriginalestimate":7200,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-02","issuetype":"Task","worklogs":[{"id":"140323","started":"2017-02-02","time":"06:27:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Prepared internal release 1.5.\r\nRan all sanity tests and tests for fixes included in this release.\r\n","author":"javedm"}]},"MEH-2835":{"key":"MEH-2835","status":"Resolved","summary":"Investigating failed unit-tests: kms_render, kms_setmode, kms_flip, gem_reloc_overflow, gem_fence_upload, gem_exec_whisper","customfield_11642":"","start":"","customfield_11643":"2017-02-02","end":"2017-02-02","timeoriginalestimate":0,"timespent":16200,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-02","issuetype":"Sub-task","worklogs":[{"id":"140316","started":"2017-02-02","time":"06:04:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"debugged and resolved the issue","author":"aarehman"},{"id":"140394","started":"2017-02-03","time":"04:04:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"verified the cairo fix with kms_flip","author":"aarehman"},{"id":"140716","started":"2017-02-07","time":"07:05:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"debugged gem_reloc_overflow unit test to establish that it is failing due to low ram in vm0","author":"aarehman"},{"id":"140717","started":"2017-02-07","time":"07:07:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Rehman, Aabdul","comment":"tested and confirmed that gem_fence_upload and gem_exec_whisper tests pass with latest environment","author":"aarehman"}]},"MEH-2834":{"key":"MEH-2834","status":"Resolved","summary":"Investigate failing gem_exec_parallel test","customfield_11642":"2017-02-02","start":"2017-02-02","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-02-02","issuetype":"Sub-task","worklogs":[{"id":"140299","started":"2017-02-02","time":"04:28:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Setup build environment.","author":"ziaa"},{"id":"140822","started":"2017-02-08","time":"07:18:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"Debugged and analysed the problem. \r\n\r\nProblem:\r\nTest fails random number of times when run. Statistically it fails half of the time. When it does fail it reports that it was unable to open file descriptor. \r\n\r\nProgress:\r\nTest creates number of threads - 1024 to be exact. I modified the test to pass this number from command line and with number of experiments found out that if this number is reduced to 1020 the failures disappear. \r\n\r\nSo I tried increasing linux limits for file descriptors using following command:\r\necho 100000 > \/proc\/sys\/fs\/file-max\r\n\r\nBut it didn't work out.\r\n\r\n","author":"aarehman"}]},"MEH-2831":{"key":"MEH-2831","status":"Resolved","summary":"Investigating failed unit-test: kms_properties","customfield_11642":"2017-02-01","start":"2017-02-01","customfield_11643":"2017-02-02","end":"2017-02-02","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-02-01","issuetype":"Sub-task","worklogs":[{"id":"140298","started":"2017-02-02","time":"04:14:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Rehman, Aabdul","comment":"debugged and resolved the issue that was causing kms_properties to fail. Please see comments on the issue for explanation. ","author":"aarehman"}]},"MEH-2830":{"key":"MEH-2830","status":"Resolved","summary":"Integrate audio and IPU ACPI tables into the guest ACPI tables for SPL A1","customfield_11642":"2017-02-01","start":"2017-02-01","customfield_11643":"2017-02-02","end":"2017-02-02","timeoriginalestimate":28800,"timespent":36000,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-01-31","issuetype":"Task","worklogs":[{"id":"140233","started":"2017-02-01","time":"09:29:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"ACPI tables with Audio and IPU support have been integrated with ACPI tree \r\nof Neusoft Guest OSes.","author":"ssohail"},{"id":"140321","started":"2017-02-02","time":"06:19:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"- Sharjeel had accomodated the dsdt i sent him that contained only Camera definitions. I had forgotten to provide him Audio definitions in that file. So included Audio tables and made corresponding updates to the tables.\r\n- Dumped DSDT and verified if all tables are incorporated successfully.","author":"javedm"}]},"MEH-2827":{"key":"MEH-2827","status":"Resolved","summary":"Intel-GPU-tools Unit-tests on XEN and MEHV","customfield_11642":"2017-01-30","start":"2017-01-30","customfield_11643":"2017-02-20","end":"2017-02-20","timeoriginalestimate":57600,"timespent":50400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-01-30","issuetype":"Sub-task","worklogs":[{"id":"139958","started":"2017-01-30","time":"03:28:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"- I resolved issue of low disk space in guest domU on xen . Please see comments.\r\n- Setup environment for unit-tests","author":"aarehman"},{"id":"140001","started":"2017-01-30","time":"08:12:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"- I resolved issue of low disk space on vm1 on MEHV. Please see comment.\r\n- Setup environment for unit-tests","author":"aarehman"},{"id":"140103","started":"2017-01-31","time":"07:07:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"removed tests that caused vm1 crash on xen and generated unit test report for xen vm1 \r\n","author":"aarehman"},{"id":"140398","started":"2017-02-03","time":"04:43:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"generated report for unit tests on xen and mehv vm1","author":"aarehman"},{"id":"140818","started":"2017-02-08","time":"07:16:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"rerunning tests on vm1 due to large number skips in previous report \r\n- removed tests that caused hang on cpu 1 ","author":"aarehman"},{"id":"141554","started":"2017-02-16","time":"05:22:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"Setup the environment for unit testing on VM1 of MEHV which was corrupted during testing for foreground issue in recent days. \r\n\r\n ","author":"aarehman"},{"id":"141853","started":"2017-02-20","time":"03:50:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"Tests on VM1 of MEHV on neusoft are complete. VM1 test results report and it's comparison report with xen domU is updated on the confluence page(please see comments).","author":"aarehman"}]},"MEH-2826":{"key":"MEH-2826","status":"Closed","summary":"Investigating failed unit-test: kms_busy","customfield_11642":"2017-01-30","start":"2017-01-30","customfield_11643":"2017-01-31","end":"2017-01-31","timeoriginalestimate":28800,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-01-30","issuetype":"Sub-task","worklogs":[{"id":"140086","started":"2017-01-31","time":"04:36:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Rehman, Aabdul","comment":"debugged and resolved the issue","author":"aarehman"}]},"MEH-2825":{"key":"MEH-2825","status":"Open","summary":"Validate Intel Graphics","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":0,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-28","issuetype":"Workpackage","worklogs":[]},"MEH-2824":{"key":"MEH-2824","status":"Resolved","summary":"Remove rdtsc virtualization and use tsc offsetting instead for offsetting boot time bias","customfield_11642":"2017-01-30","start":"2017-01-30","customfield_11643":"2017-02-01","end":"2017-02-01","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-01-27","issuetype":"Task","worklogs":[{"id":"140234","started":"2017-01-30","time":"09:32:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":" Removed TSC virtualization and did other required changes","author":"ssohail"}]},"MEH-2823":{"key":"MEH-2823","status":"Resolved","summary":"Investigate failing gem_exec_flush test","customfield_11642":"2017-01-27","start":"2017-01-27","customfield_11643":"2017-02-08","end":"2017-02-08","timeoriginalestimate":115200,"timespent":72360,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-27","issuetype":"Sub-task","worklogs":[{"id":"139815","started":"2017-01-27","time":"09:35:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Setting up build environment. Stash checkout took bulk of time.","author":"ziaa"},{"id":"140069","started":"2017-01-29","time":"23:13:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"stash chekcout","author":"ziaa"},{"id":"140187","started":"2017-01-31","time":"01:22:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Zia, Asad","comment":"Traced the problem to the following SSE2 code:\r\n\r\n\t__builtin_ia32_mfence();\r\n\tfor (; p < end; p += clflush_size)\r\n\t\t__builtin_ia32_clflush(p);\r\n\t__builtin_ia32_clflush(end - 1); \/* magic serialisation for byt+ *\/\r\n\t__builtin_ia32_mfence(); ","author":"ziaa"},{"id":"140198","started":"2017-02-01","time":"05:07:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Zia, Asad","comment":"There is a gem_sync before cflush that has a call gem_wait(timeout). Time is corrupt in MEHV. Adding a delay before assert makes the task pass. Stopping work on this task and will revisit it when time issue is fixed. If timer fix does not resolve this issue then SSE2 emulation becomes primary suspect.","author":"ziaa"},{"id":"140798","started":"2017-02-08","time":"04:54:00.000-0600","timespent":0.0125,"timespent_seconds":360,"displayname":"Zia, Asad","comment":"The crux of this test case is whether writes by the GPU are coherent from the CPU. The failing subtests were basically doing the following:\r\n*\tclflush(&map[i]);    \/\/ Emulated in Xen\r\n*\texecbuf(map[i] = i ^ ~0);\r\n*\tsync();      \/\/ DRM_IOCTL_I915_GEM_SET_DOMAIN\r\n*\tassert(map[i] == i ^ ~0);\r\n\r\nThe ioctl DRM_IOCTL_I915_GEM_SET_DOMAIN with argument I915_GEM_DOMAIN_GTT takes a bit longer to complete on MEHV as compared to Xeng. It results in occasionally failing of these tests. The failing rate was much higher earlier without timer fix something like 80%. Now with today's branch it is 20%. The failure go away even if we add a single print line before checking the memory.\r\n\r\nInitially it was looking like we need to emulate cflush instruction just like Xen. However on investigation, it looks like cflush emulation is only needed if it guest tries to flush MMIO and triggers a trap.","author":"ziaa"}]},"MEH-2822":{"key":"MEH-2822","status":"Resolved","summary":"MEHV internal release 1.4","customfield_11642":"2017-01-26","start":"2017-01-26","customfield_11643":"2017-01-27","end":"2017-01-27","timeoriginalestimate":28800,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-27","issuetype":"Task","worklogs":[{"id":"139753","started":"2017-01-26","time":"04:42:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Synced up Clyde's cleaned up patches in Neusoft's layer.\r\nVerified the patches on Neusoft.\r\nDiscovered that these patches do not work with MEHV internal release 1.3.\r\nDiscovered that memory reconfiguration updates have not been applied to the guest loader.","author":"javedm"},{"id":"139754","started":"2017-01-27","time":"04:45:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Applied fixes to guest loader to sync up with memory configuration changes.\r\n\r\nInspected cleaned up patches. Found out that there are some changes required on hypervisor for these patches to work. If the GVT-g debug code is not removed in hypervisor but removed from Linux patches, we get a page fault.\r\n\r\nCreate MEHV internal release 1.4 and sent the announcement to ABU.","author":"javedm"}]},"MEH-2820":{"key":"MEH-2820","status":"Resolved","summary":"Preemption Timer Interrupt hitting earlier than configured period","customfield_11642":"2017-01-26","start":"2017-01-26","customfield_11643":"2017-01-27","end":"2017-01-27","timeoriginalestimate":43200,"timespent":50400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-01-26","issuetype":"Bug","worklogs":[{"id":"139766","started":"2017-01-26","time":"06:31:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Collected facts and figures regarding timer behavior and difference in \r\nexpected and experienced preemption timer interrupt period.\r\nExtended investigations to other scaling features of time stamping and found \r\na regular trend of 0.33msec difference in expected and experienced periods.\r\n","author":"ssohail"},{"id":"139769","started":"2017-01-27","time":"06:33:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Further investigations in scaling function and calculations showed a possible \r\nproblem. And it was exactly what I was looking for\r\nTime stamps calculation in hypervisor were giving the results by multiplying \r\n\"# ticks\" with \"time per tick\". Time per tick was calculated to be 27.88 nsec \r\nbut its multiplication with \"# ticks\" was integer multiplication. Hence, it was \r\nignoring figure after the decimal point.\r\n0.88 nsec ignored from every 27.88 nsec means 0.33msec ignored in every \r\n10 msec. Exact match with the figures I got earlier.\r\nFixed the calculations order and time-stamp issue got fixed.\r\nNow, Preemption-Timer interrupt never comes before the expected time.","author":"ssohail"}]},"MEH-2817":{"key":"MEH-2817","status":"Open","summary":"Bugs","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-25","issuetype":"Workpackage","worklogs":[]},"MEH-2814":{"key":"MEH-2814","status":"Reopened","summary":"MEHV should be backwards compatible with older releases\/drops to Neusoft. ","customfield_11642":"2017-01-30","start":"2017-01-30","customfield_11643":"2017-01-30","end":"2017-01-30","timeoriginalestimate":86400,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-01-25","issuetype":"Bug","worklogs":[{"id":"139572","started":"2017-01-25","time":"06:46:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Built GP0.9 kernels.\r\nAfter enabling MPS back in MEHV, VM0 boots successfully but VM1 does not boot.\r\nHowever, after disabling guest loader, VM1 boots successfully.\r\nVerified POC4 guest boot when MPS as well as ACPI are enabled.","author":"javedm"}]},"MEH-2806":{"key":"MEH-2806","status":"Resolved","summary":"MEHV internal release 1.3","customfield_11642":"2017-01-23","start":"2017-01-23","customfield_11643":"2017-01-23","end":"2017-01-23","timeoriginalestimate":14400,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-23","issuetype":"Task","worklogs":[{"id":"139367","started":"2017-01-23","time":"07:40:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-2801":{"key":"MEH-2801","status":"In Progress","summary":"Meetings","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":28800,"timespent":616200,"labels":["intel_automotive_hyp_gptask","noweeklyreport"],"assignee":null,"created":"2017-01-23","issuetype":"Workpackage","worklogs":[{"id":"139376","started":"2017-01-23","time":"08:12:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Ahmad, Mumtaz","comment":"Daily meeting","author":"mahmad"},{"id":"139392","started":"2017-01-23","time":"08:59:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Ahmad, Mumtaz","comment":"Program meeting","author":"mahmad"},{"id":"139417","started":"2017-01-22","time":"23:52:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Zia, Asad","comment":"Weekly meeting and program meeting.\r\nWorking with Harshit on replicating xsWayland","author":"ziaa"},{"id":"139431","started":"2017-01-24","time":"03:01:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Meeting with Intel and ABU","author":"ziaa"},{"id":"139468","started":"2017-01-24","time":"07:55:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Ahmad, Mumtaz","comment":"Daily meeting","author":"mahmad"},{"id":"139542","started":"2017-01-24","time":"01:02:00.000-0600","timespent":0.09375,"timespent_seconds":2700,"displayname":"Zia, Asad","comment":"Daily developers syncup meeting.","author":"ziaa"},{"id":"139616","started":"2017-01-25","time":"00:01:00.000-0600","timespent":0.1875,"timespent_seconds":5400,"displayname":"Zia, Asad","comment":"Daily meeting and Program Meeting","author":"ziaa"},{"id":"139723","started":"2017-01-26","time":"12:34:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Ahmad, Mumtaz","comment":"Daily Sync \r\nMeeting with Asad and Madeeha for esitmates","author":"mahmad"},{"id":"139724","started":"2017-01-26","time":"12:35:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Ahmad, Mumtaz","comment":"Estimates + Time sheet","author":"mahmad"},{"id":"139743","started":"2017-01-26","time":"01:43:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Meeting to create estimates.\r\nDaily technical meeting.","author":"ziaa"},{"id":"139817","started":"2017-01-27","time":"09:50:00.000-0600","timespent":0.1875,"timespent_seconds":5400,"displayname":"Ahmad, Mumtaz","comment":"Daily sync and Program meetings","author":"mahmad"},{"id":"139974","started":"2017-01-30","time":"05:36:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Ahmad, Mumtaz","comment":"meeting","author":"mahmad"},{"id":"140066","started":"2017-01-29","time":"23:10:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Zia, Asad","comment":"Program Meeting","author":"ziaa"},{"id":"140067","started":"2017-01-29","time":"23:10:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Technical call","author":"ziaa"},{"id":"140068","started":"2017-01-29","time":"23:10:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"discussion and guidance to local team","author":"ziaa"},{"id":"140182","started":"2017-01-31","time":"01:19:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Call with Intel","author":"ziaa"},{"id":"140199","started":"2017-02-01","time":"05:10:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Technical syncup call.","author":"ziaa"},{"id":"140273","started":"2017-01-31","time":"23:28:00.000-0600","timespent":0.083333333333333,"timespent_seconds":2400,"displayname":"Zia, Asad","comment":"program call.","author":"ziaa"},{"id":"140401","started":"2017-02-03","time":"05:00:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Technical call","author":"ziaa"},{"id":"140402","started":"2017-02-03","time":"05:00:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Program Meeting","author":"ziaa"},{"id":"140403","started":"2017-02-03","time":"05:03:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Setup, tested and documented http:\/\/confluence.alm.mentorg.com:8090\/display\/HV\/Speedup+builds+by+using+local+mirror","author":"ziaa"},{"id":"140476","started":"2017-02-03","time":"09:36:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Ahmad, Mumtaz","comment":"","author":"mahmad"},{"id":"140698","started":"2017-02-07","time":"05:40:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Meeting with Intel.","author":"ziaa"},{"id":"140767","started":"2017-02-07","time":"00:50:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Townhall","author":"ziaa"},{"id":"140769","started":"2017-02-08","time":"00:51:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Technical syncup call.","author":"ziaa"},{"id":"140782","started":"2017-02-08","time":"02:29:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Ahmad, Mumtaz","comment":"Daily meeting","author":"mahmad"},{"id":"140871","started":"2017-02-08","time":"23:39:00.000-0600","timespent":0.14583333333333,"timespent_seconds":4200,"displayname":"Zia, Asad","comment":"Programm Meeting","author":"ziaa"},{"id":"140911","started":"2017-02-09","time":"05:16:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Ahmad, Mumtaz","comment":"Daily , Program and other mneetings","author":"mahmad"},{"id":"141033","started":"2017-02-10","time":"08:28:00.000-0600","timespent":0.3125,"timespent_seconds":9000,"displayname":"Zia, Asad","comment":"Technical Sync call\r\nProgram meeting\r\nOffline discussions with team members","author":"ziaa"},{"id":"141068","started":"2017-02-10","time":"11:06:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Ahmad, Mumtaz","comment":"","author":"mahmad"},{"id":"141116","started":"2017-02-13","time":"00:05:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"To reduce boot delay, had a phone call with Clyde to investigate the role of vgt_mgr in relocating VGT instance creation early on. ","author":"ziaa"},{"id":"141117","started":"2017-02-13","time":"00:17:00.000-0600","timespent":0.083333333333333,"timespent_seconds":2400,"displayname":"Zia, Asad","comment":"Technical sync call.","author":"ziaa"},{"id":"141221","started":"2017-02-13","time":"09:23:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Ahmad, Mumtaz","comment":"","author":"mahmad"},{"id":"141486","started":"2017-02-15","time":"12:02:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Ahmad, Mumtaz","comment":"","author":"mahmad"},{"id":"141503","started":"2017-02-13","time":"00:00:00.000-0600","timespent":0.083333333333333,"timespent_seconds":2400,"displayname":"Zia, Asad","comment":"Progamm Meeting","author":"ziaa"},{"id":"141504","started":"2017-02-14","time":"00:01:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Meeting with Intel, Kamesh","author":"ziaa"},{"id":"141505","started":"2017-02-14","time":"00:01:00.000-0600","timespent":0.1875,"timespent_seconds":5400,"displayname":"Zia, Asad","comment":"Meeting with Intel architects","author":"ziaa"},{"id":"141506","started":"2017-02-15","time":"00:02:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical syncup\r\nProgram Meeting","author":"ziaa"},{"id":"141621","started":"2017-02-17","time":"00:07:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Various meetings and discussions today.","author":"ziaa"},{"id":"142091","started":"2017-02-20","time":"01:54:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical Sync call\r\nProgramm Meeting","author":"ziaa"},{"id":"142092","started":"2017-02-20","time":"01:55:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Validating Intel patch for ticket https:\/\/mentorgraphics.atlassian.net\/browse\/IAPLP-448 from scratch and posting a detailed analysis as following:\r\n\r\nHi Kamesh,\r\nThank you for sending the patches over the weekend.\r\nThe crux of the problem is that, when 'modesetting' is carried out by a guest VM in response to, say weston or kmscube starting or stopping, the display becomes corrupt. This goes away if we set the foreground once again.\r\nTo explain a little bit more, modesetting is the act of setting crtc attributes in DRM subsystem. It is not supposed to corrupt the display in either native or virtualized graphics environment. You don't see this issue in POC1 and open source Gvt-g. It is side effect of the 'Direct' display mode support from POC2 onwards.\r\nThe patches Intel sent only partially address the symptoms of the issue and they only work in a fixed scripted environment. The problem is still reproducible by following the steps listed in the description of this ticket. Intel's Weston behaves a little better in the sense that sometimes restarting it fixes the display issue. It's not clear how it does that because Weston source was not delivered to us. However other applications, like kmscube or Mentor's Winston never correct the display on their own.\r\nNeusoft has asked Mentor to disable autobooting in the deliverable and provide them with steps required to manually start and stop wayland desktop. The current Intel's fix will not hold when customer manually start\/stop the modesetting applications during their own demo development.\r\nThe good thing about this fix is that, if we set foreground on one pipe, by 'ehco' in sysfs, the Gvt-g code goes in a loop and fixes display ownership on all pipes. We are not required to issue multiple 'set foreground' commands. However, It remains a problem that how we know programmatically when to 'ehco' in sysfs to set foreground when applications are started and stopped on either VM.\r\nIn order to reliably capture the modesetting from any application in any guest VM, I implemented a workaround in a way that a udev event is generated when:\r\nmodesetting related hardware register is written in dpy_modeset_mmio_write\r\nvgt_g2v_execlist_context_create\/destroy is called\r\nI handle this udev event in usermode and call a script to 'ehco' in sysfs an set foreground.\r\nI understand that my workaround is just a 'hack'. We will need a proper fix for this modesetting bug from Intel to maintain in the longer term.\r\nRegards,\r\nAsad","author":"ziaa"},{"id":"142093","started":"2017-02-21","time":"01:56:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"\r\n\r\nFrom: Zia, Asad \r\nSent: Tuesday, February 21, 2017 3:24 PM\r\nTo: Srivastava, Harshit <Harshit_Srivastava@mentor.com>; Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Buehler, Karl <Karl_Buehler@mentor.com>; Javed, Madeeha <Madeeha_Javed@mentor.com>\r\nCc: Grzan, Nenad <Nenad_Grzan@mentor.com>; Ahmad, Mumtaz <Mumtaz_Ahmad@mentor.com>\r\nSubject: RE: Audio manager\r\n\r\nHi Harshit,\r\n\r\nThere is already a VIRTIO network interface between the VM1 and VM0 under MEHV. VIRTIO is paravirtualized. The communication is done using ring buffers. My understanding is that there is no copy operation involved. This should make it higher performance and more deterministic when compared to actual physical Ethernet because data stays in system RAM. For the same reason we don\u2019t need AVB. To make it more robust we can create a second VIRTIO network interface between the VMs and dedicate it to Audio communication.\r\n\r\nPulseAudio demon on VM0 is responsible for receiving multichannel data from VM1 and sending to physical hardware on VM1\u2019s behalf. This should ensure that VM0 has always priority over the Audio hardware.\r\n\r\nRegards,\r\nAsad   \r\n\r\nFrom: Srivastava, Harshit \r\nSent: Tuesday, February 21, 2017 2:35 PM\r\nTo: Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Buehler, Karl <Karl_Buehler@mentor.com>; Zia, Asad <Asad_Zia@mentor.com>; Javed, Madeeha <Madeeha_Javed@mentor.com>\r\nCc: Grzan, Nenad <Nenad_Grzan@mentor.com>; Ahmad, Mumtaz <Mumtaz_Ahmad@mentor.com>\r\nSubject: RE: Audio manager\r\n\r\nHi Arvind,\r\n\r\nGenivi Audio Manager is a component & concept for connecting\/prioritizing various sources and sinks present in system. We should use this for the end system as that simplifies and maintains a unified interface for all Audio content inside the larger system. What we need to first close on is communication mechanism between Cluster and VM, if we approach virtual networking, we need to analyze the real time issues with Audio streaming. How do we guarantee the QoS always? Is this deterministic or varying with networking bandwidth load?\r\n\r\nWe surely need to prototype before we can conclude on this. Ethernet based AVB streaming talks in detail about bandwidth reservation and priority scheduling for certain content in Ethernet data transfer. We may need to revisit this too.\r\n\r\nAm I missing something from the message Asad wanted to convey here? @Asad, Please add more details?\r\n\r\nBest Regards,\r\nHarshit\r\n\r\nFrom: Raghuraman, Arvind \r\nSent: Montag, 20. Februar 2017 23:39\r\nTo: Srivastava, Harshit; Buehler, Karl; Zia, Asad; Javed, Madeeha\r\nCc: Grzan, Nenad; Ahmad, Mumtaz\r\nSubject: Audio manager\r\n\r\nHi Harshit, \r\n\r\nAsad\u2019s proposal was not fully clear to me during our AM call. Madeeha later pointed me to the Genivi audio manager infrastructure. I now see what Asad was saying, and I agree with Asad that this is a valid third option that we have not discussed so far.\r\n\r\nHave you considered this ? Can\u2019t we have the cluster domain own audio, and enable routing of ivi audio over virtual networking using audio manager ? \r\n\r\nI still think we may have serious performance issues since we will have IVI audio playback, and capture over virtual network. But we should at least try this approach and see if it would fulfill customer need. This looks like something that can be easily prototyped and evaluated ? thought ? comments ?  \r\n\r\nBest regards, \r\nArvind\r\n\r\n\r\nArvind Raghuraman | Staff Engineer\r\nMentor Embedded\u2122 | 46897 Bayside Parkway, Fremont, CA 94538 USA\r\nP 510.354.7362\r\nNucleus\u00ae | Linux\u00ae | Android\u2122 | Services | UI | Multi-OS\r\n\r\nAndroid is a trademark of Google Inc. Use of this trademark is subject to Google Permissions. \r\nLinux is the registered trademark of Linus Torvalds in the U.S. and other countries.\r\n\r\n","author":"ziaa"},{"id":"142094","started":"2017-02-21","time":"01:57:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Meetings with Intel support and Architecture teams.","author":"ziaa"},{"id":"142096","started":"2017-02-22","time":"01:59:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical syncup call.\r\nProgram Meeting","author":"ziaa"},{"id":"142321","started":"2017-02-24","time":"00:49:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical Call\r\nProgram Meeting","author":"ziaa"},{"id":"142348","started":"2017-02-22","time":"04:20:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Ahmad, Mumtaz","comment":"Meetings","author":"mahmad"},{"id":"142540","started":"2017-02-27","time":"03:35:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical Sync call\r\nProgramm Meeting","author":"ziaa"},{"id":"142802","started":"2017-03-01","time":"00:02:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Ahmad, Mumtaz","comment":"","author":"mahmad"},{"id":"143025","started":"2017-02-28","time":"02:01:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Meeting with Intel architects","author":"ziaa"},{"id":"143026","started":"2017-03-01","time":"02:02:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical call\r\nProgram call","author":"ziaa"},{"id":"143027","started":"2017-03-03","time":"02:03:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical call\r\nProgram call.","author":"ziaa"},{"id":"143041","started":"2017-03-01","time":"02:36:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram call","author":"javedm"},{"id":"143042","started":"2017-02-27","time":"02:40:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram call","author":"javedm"},{"id":"143043","started":"2017-02-24","time":"02:41:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram call ","author":"javedm"},{"id":"143131","started":"2017-03-03","time":"12:55:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Ahmad, Mumtaz","comment":"","author":"mahmad"},{"id":"143223","started":"2017-03-06","time":"04:44:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Zia, Asad","comment":"Technical call.\r\nProgram meeting.\r\nPBU All hands.","author":"ziaa"},{"id":"143645","started":"2017-03-09","time":"22:51:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Ahmad, Mumtaz","comment":"","author":"mahmad"},{"id":"143654","started":"2017-03-07","time":"01:04:00.000-0600","timespent":0.3125,"timespent_seconds":9000,"displayname":"Zia, Asad","comment":"Meeting with Kamesh\r\nMeeting with Intel architects.","author":"ziaa"},{"id":"143655","started":"2017-03-08","time":"01:05:00.000-0600","timespent":0.3125,"timespent_seconds":9000,"displayname":"Zia, Asad","comment":"Technical call\r\nProgram Meeting","author":"ziaa"},{"id":"143656","started":"2017-03-10","time":"01:05:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Program Meeting\r\nTechnical call.","author":"ziaa"},{"id":"143925","started":"2017-03-06","time":"11:33:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram meeting","author":"javedm"},{"id":"143926","started":"2017-03-08","time":"11:37:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram meeting","author":"javedm"},{"id":"143950","started":"2017-03-10","time":"11:58:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Technical call","author":"javedm"},{"id":"143951","started":"2017-03-03","time":"12:12:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram call","author":"javedm"},{"id":"144327","started":"2017-03-13","time":"06:23:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram call","author":"javedm"},{"id":"144328","started":"2017-03-15","time":"06:25:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Program call","author":"javedm"},{"id":"144495","started":"2017-03-13","time":"04:50:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical Call\r\nProgram Call","author":"ziaa"},{"id":"144496","started":"2017-03-14","time":"04:51:00.000-0500","timespent":0.3125,"timespent_seconds":9000,"displayname":"Zia, Asad","comment":"Meeting with Intel support\r\nMeeting with Intel architects","author":"ziaa"},{"id":"144497","started":"2017-03-15","time":"04:51:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical call\r\nProgram call","author":"ziaa"},{"id":"144498","started":"2017-03-17","time":"04:52:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical call\r\nProgram call","author":"ziaa"},{"id":"144718","started":"2017-03-17","time":"08:44:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram call","author":"javedm"},{"id":"144719","started":"2017-03-20","time":"08:45:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Program call","author":"javedm"},{"id":"145025","started":"2017-03-20","time":"00:45:00.000-0500","timespent":0.15625,"timespent_seconds":4500,"displayname":"Zia, Asad","comment":"Program Call","author":"ziaa"},{"id":"145026","started":"2017-03-21","time":"00:46:00.000-0500","timespent":0.3125,"timespent_seconds":9000,"displayname":"Zia, Asad","comment":"Meeting with Intel support\r\nMeeting with Intel engineering.","author":"ziaa"},{"id":"145027","started":"2017-03-22","time":"00:46:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Zia, Asad","comment":"Technical call\r\nProgram meeting","author":"ziaa"},{"id":"145028","started":"2017-03-24","time":"00:48:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Program call","author":"ziaa"},{"id":"145168","started":"2017-03-22","time":"11:09:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Technical call\r\nProgram call","author":"javedm"},{"id":"145169","started":"2017-03-24","time":"11:10:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Program call","author":"javedm"},{"id":"145593","started":"2017-03-27","time":"07:28:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Program meeting","author":"ziaa"},{"id":"145594","started":"2017-03-28","time":"07:28:00.000-0500","timespent":0.3125,"timespent_seconds":9000,"displayname":"Zia, Asad","comment":"Intel Architects meeting\r\nTechnical syncup call.","author":"ziaa"},{"id":"145595","started":"2017-03-29","time":"07:29:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Program Meeting","author":"ziaa"},{"id":"145780","started":"2017-03-30","time":"01:21:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Technical sync call","author":"ziaa"},{"id":"145781","started":"2017-03-30","time":"01:21:00.000-0500","timespent":0.1875,"timespent_seconds":5400,"displayname":"Zia, Asad","comment":"Call with Kamesh\r\n","author":"ziaa"},{"id":"145782","started":"2017-03-31","time":"01:22:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Program meeting","author":"ziaa"},{"id":"145938","started":"2017-03-31","time":"02:35:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Call with Clyde and Arvind on VM reboot issues\r\nProgram call","author":"javedm"},{"id":"145940","started":"2017-03-30","time":"02:41:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Call with Intel\r\nTechnical call","author":"javedm"},{"id":"145942","started":"2017-03-29","time":"02:46:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Program call","author":"javedm"},{"id":"146329","started":"2017-04-03","time":"03:40:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Program call","author":"javedm"},{"id":"146330","started":"2017-04-05","time":"03:41:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Program call","author":"javedm"},{"id":"146331","started":"2017-04-07","time":"03:42:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Program call","author":"javedm"},{"id":"146332","started":"2017-04-06","time":"03:42:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Technical call","author":"javedm"},{"id":"146336","started":"2017-04-03","time":"04:26:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Program Call\r\nTown hall","author":"ziaa"},{"id":"146337","started":"2017-04-04","time":"04:27:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Technical call","author":"ziaa"},{"id":"146338","started":"2017-04-05","time":"04:27:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Program call","author":"ziaa"},{"id":"146339","started":"2017-04-06","time":"04:29:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Technical call","author":"ziaa"},{"id":"146340","started":"2017-04-07","time":"04:29:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Program call","author":"ziaa"}]},"MEH-2798":{"key":"MEH-2798","status":"Resolved","summary":"Update CS for APs using value from ICR.","customfield_11642":"2017-01-20","start":"2017-01-20","customfield_11643":"2017-01-23","end":"2017-01-23","timeoriginalestimate":28800,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-20","issuetype":"Bug","worklogs":[{"id":"139365","started":"2017-01-20","time":"07:33:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Observed that reading ICR when VM exit happens on SIPI does not provide the required value. However, virtualized local apic can be queried to provide base address vector.","author":"javedm"},{"id":"139366","started":"2017-01-23","time":"07:35:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Captured value in local apic virtualization when ICR is written. ICR value stored and then used when VM Exit happens on SIPI.\r\nTested and committed.","author":"javedm"}]},"MEH-2797":{"key":"MEH-2797","status":"Resolved","summary":"Try xsWayland rootfs sent by ABU","customfield_11642":"2017-01-20","start":"2017-01-20","customfield_11643":"2017-01-23","end":"2017-01-23","timeoriginalestimate":57600,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-20","issuetype":"Sub-task","worklogs":[{"id":"139103","started":"2017-01-20","time":"03:29:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Trying to run xsWayland on Neusoft. It did not run out of the box. Experimenting by modifying output crtcs.","author":"ziaa"},{"id":"139120","started":"2017-01-20","time":"05:54:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Winston is running on VM-0 with Display 1 and VM-1 with Display2 independently on Neusoft hardware. The picture you see attached is the different wallpapers set to Winston on both VMs.\r\n\r\nWhen run any xsWayland applications like wl_gears, it appears to run correctly from the console, there is no crash or error. However application output is not visible on screen. It appears to me that either the application is being rendered to a hardware plane behind the wallpaper or the Winston compositor is misconfigured.\r\n","author":"ziaa"},{"id":"139319","started":"2017-01-23","time":"03:39:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Worked with ABU to replicate xsWayland on Neusoft in Villingen","author":"ziaa"},{"id":"139328","started":"2017-01-23","time":"04:41:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Investigated and fixed wl_grears not visible issue.","author":"ziaa"}]},"MEH-2796":{"key":"MEH-2796","status":"Resolved","summary":"Investigate and fix kernel timer issues on VM1 and VM0 (if there are issues observed on VM0)","customfield_11642":"2017-01-20","start":"2017-01-20","customfield_11643":"2017-02-02","end":"2017-02-02","timeoriginalestimate":144000,"timespent":252000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-01-19","issuetype":"Bug","worklogs":[{"id":"139087","started":"2017-01-19","time":"23:31:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"},{"id":"139203","started":"2017-01-20","time":"12:46:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"},{"id":"139848","started":"2017-01-27","time":"16:41:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Still getting a tick inspite of various configuration changes.  Still investigating.","author":"cgriffin"},{"id":"140154","started":"2017-01-31","time":"13:30:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"1\/30\/17 Spent the day debugging.  Particularly on VM Exits related to TSC.  Turned off VMExits for READTSC and READTSCP.  Enabled TSC offset.  This did not affect proper time keeping.  I wanted to also investigate TSC scaling.  I am not sure if TSC scaling is supported on Broxton.\r\n\r\nWithout VGT in the mix the timer interrupts are firing at 1000 ticks\/sec I have questions about whether or not I am really running tickless.  These could still be dynamic ticks\r\n\r\nI am suspecting that its possible that both the APIC and TSC are incorrectly calibrated.\r\n\r\nAnyway more investigation\/debugging is warranted.","author":"cgriffin"},{"id":"140168","started":"2017-02-01","time":"00:03:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"I think the problem we are having is that the TSC is being marked unstable.  \r\n\r\n----- Entering Guest 1 Shell -----\r\n[    1.168125] [drm] Initialized drm 1.1.0 20060810\r\n[    1.670660] [drm] Virtual GPU for Intel GVT-g detected.\r\n[    2.228387] clocksource tsc: mask: 0xffffffffffffffff max_cycles: 0x1128af0325d, max_idle_ns: 440795261011 ns\r\n[    3.034969] Switched to clocksource tsc\r\n\u2026\r\n [   19.278233] timekeeping watchdog: Marking clocksource 'tsc' as unstable, because the skew is too large:\r\n[   19.278302]  'refined-jiffies' wd_now: fffbb4bc wd_last: fffbb46c mask: ffffffff\r\n[   19.278353]  'tsc' cs_now: 19c56b98ba cs_last: 19a34adee2 mask: ffffffffffffffff\r\n[   19.286864] Switched to clocksource refined-jiffies\r\n\r\nThere is a kernel config CONFIG_CLOCKSOURCE_WATCHDOG that does not like the long delays occurring during GVT-g initialization, possibly runtime as well.\r\n\r\nI don't think it would matter what the clock source was we would still see the watchdog marking it as unstable and attempting another clocksource.\r\n\r\nI am looking into disabling the CLOCKSOURCE_WATCHDOG to prove the point.\r\n","author":"cgriffin"},{"id":"140221","started":"2017-02-01","time":"07:50:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"- Manually disabled CONFIG_CLOCKSOURCE_WATCHDOG in VM1VM1's kernel.\r\nResult: No instability in tsc and sleep 10 returned after 10s successfully.\r\n\r\n- Explored possiblity of moving mapping of VM1's memory in VM0 to HVM loader. Adeel said that kernel gets stalled temporarily when setting up VGT ballooning and that its because of the WP being set on VM1's page by VM0. For an experiment, removed the code in VM0 that set up WP but VM1 still gets stalled when setting up VGT ballooning. I think that all the work for mapping VM1's memory in VM0 is being done on VM0's cpu so this could not be the reason for the stall. Need to discuss this further with Clyde.\r\n\r\n- Enabled ACPI PM timer in VM1 kernel config, disabled it in VM0's kernel config, set clocksource=acpi_pm in VM1's boot args.\r\nResult: acpi_pm is the clocksource in VM1. No instability in clocksource in VM1 and sleep 10 returned after 10s successfully.\r\n\r\n- Set clocksource=tsc in VM0's bootargs, clocksource=hpet in VM1's bootargs.\r\nResult: tsc is the clocksource in VM0 while hpet is the clocksource in VM1 now. No instability in clocksource in either VMs and sleep 10 returned after 10s successfully. ~400 ticks\/sec observed.\r\n\r\n- Tried to set offset for VM1 only. VM1 didnot boot. Under a value of 0xFFFFFFF as tsc offset, VM1 boots but tsc is unstable. Equal or above this value, VM1 does not boot.\r\n \r\n- Removed nohpet from VM1's bootargs which means hpet can be used for calibration of tsc. \r\nResult: There were some issues booting VM0 but sometimes it worked. When it worked, tsc was observed as stable on VM1 and sleep 10 returned after 10s successfully.","author":"javedm"},{"id":"140223","started":"2017-01-31","time":"08:04:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"- Reproduced the issue of sleep() taking more time than needed.\r\n- Observed tsc getting unstable on VM1. Tried plain kernel images for guest. Those did not have the unstability issue or sleep() issue.\r\n- Tried adding tsc offset to VM1 but VM1 failed to boot.\r\n- Did some research why tsc is getting unstable. Looks like GVT-g initializations are causing the skew because more time is spent in VM exits and so timer interrupt is delayed because tsc is read in-frequently.\r\n","author":"javedm"},{"id":"140269","started":"2017-02-01","time":"19:09:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"After much discussion with Arvind.\r\n-Renabled PM timer on VM0 and VM1\r\n-Enabled Tickless (NO_HZ) on VM0 and VM1\r\n-Disabled CLOCKSOURCE_WATCHDOG on VM1 only\r\n\r\nFPS were 60 on both VMs,  Time was tracking properly on both VMs.\r\nOur intent may be to renenable the watchdog when GVT-g performance issues are resolved.  In the mean time there is no reason to mark the APIC time and TSC as unstable.\r\n\r\nCode was submitted under MEH-1912 and committed into the POC4 subdirectory structure.  Madeeha will need to apply to HS7 and ABU releases and then mark the issue (MEH-2796) resolved.\r\n\r\n","author":"cgriffin"},{"id":"140320","started":"2017-02-02","time":"06:16:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"- Applied Clyde's updates to layer which is to be delivered to ABU.\r\n- Verified the fixes.","author":"javedm"}]},"MEH-2794":{"key":"MEH-2794","status":"Resolved","summary":"Define and conduct endurance tests that validate reliability of gVTG graphics ","customfield_11642":"2017-01-19","start":"2017-01-19","customfield_11643":"2017-02-01","end":"2017-02-01","timeoriginalestimate":144000,"timespent":32400,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-18","issuetype":"Task","worklogs":[{"id":"139003","started":"2017-01-19","time":"04:13:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Worked to get list of applications that can be built into both XenGT and MEHV yocto tree with minimum dependencies.","author":"ziaa"},{"id":"139419","started":"2017-01-24","time":"00:19:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Zia, Asad","comment":"Evaluated the following:\r\nhttps:\/\/sourceforge.net\/projects\/ppracer.berlios\/\r\nhttps:\/\/github.com\/etlegacy\/etlegacy\r\nhttp:\/\/www.phoronix-test-suite.com\/benchmark-files\/GpuTest_Linux_x64_0.7.0.zip\r\nhttps:\/\/github.com\/mrobinson\/cairo\/tree\/master\/perf","author":"ziaa"},{"id":"139632","started":"2017-01-26","time":"03:47:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Evaluated the following:\r\n\r\nhttps:\/\/sourceforge.net\/projects\/xreal\/files\/ETXreaL\/\r\nhttps:\/\/www.wearvr.com\/apps\/landscape-mountains\r\nhttp:\/\/www.splashdamage.com\/content\/wolfenstein-enemy-territory-barracks\r\ncc\r\nhttp:\/\/openarena.ws\/download.php\r\nhttp:\/\/www.x-plane.com\/ ","author":"ziaa"},{"id":"139744","started":"2017-01-27","time":"01:44:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Getting up to date building environment with latest patches.","author":"ziaa"},{"id":"139745","started":"2017-01-27","time":"01:45:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Evaluated the following:\r\nhttps:\/\/gfxbench.com\/result.jsp\r\nhttp:\/\/www.smokin-guns.org\/downloads\r\nhttp:\/\/graphcomp.com\/opengl\/trislam.tar.gz\r\n","author":"ziaa"}]},"MEH-2793":{"key":"MEH-2793","status":"Resolved","summary":"Run CPU benchmarks and tune performance on guest virtual machines.","customfield_11642":"2017-01-20","start":"2017-01-20","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":201600,"timespent":216000,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-01-18","issuetype":"Task","worklogs":[{"id":"139552","started":"2017-01-20","time":"03:31:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Enabled lmbench package in cluster-VM's rootfs and IVI-VM's rootfs\r\nDeployed the newly built rootfs with benchmarking packages\r\nResolved some important permission errors, stopping lembench application from successfully running\r\nRan lmbench tests on both VMs and collected the results","author":"ssohail"},{"id":"139553","started":"2017-01-23","time":"03:37:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"I wrote some tracking code in hypervisor to find out how much time each \r\ncore is spending in VM context once VM is initialized on that core.\r\n\r\nFound some interesting results and experienced some problems with timings.\r\nPre-emption timer seems to generate interrupt earlier than it is configured to \r\nproduce it. TSC timer frequency is hardcoded in hypervisor metadata file.\r\n\r\nDiscussed my findings with other team members","author":"ssohail"},{"id":"139554","started":"2017-01-24","time":"03:40:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Extracted valuable information from lmbench results of each VM.\r\nCreated a confluence page to share performance results and comparisons \r\nwith other team members.\r\nAdded Timer related issues on the confluence page which I discovered while \r\ngetting performance figures on hypervisor","author":"ssohail"},{"id":"139773","started":"2017-01-25","time":"06:45:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Built and deployed native linux.\r\nResolved some systemd issues.\r\nRan lmbench on native linux on MRB.\r\nExtracted important results out of lm-bench results and added into \r\ncomparison table created on mentioned confluence page\r\n\r\nAdded some instrumentation code to conduct some hypervisor specific \r\nbenchmarking.","author":"ssohail"},{"id":"139774","started":"2017-01-27","time":"06:49:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Once time-stamp issue was resolved, I enabled my instrumentation code \r\nagain.\r\nUsed instrumentation code to collect time distributions.\r\nCalculated % time spent in VM on different cores.\r\nCreated a table showing the results on mentioned confluence page.\r\n\r\nThese numbers can be used for getting a rough idea about how much time \r\nis being consumed in processing VM-Exits and switching between VM and \r\nVMM contexts\r\n","author":"ssohail"},{"id":"140386","started":"2017-01-31","time":"01:42:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Distributed VirtIO and HV-Shell and Serial processing on all running cores.\r\nIncreased Preemption timer time-out to 40 msec.","author":"ssohail"},{"id":"140387","started":"2017-02-02","time":"01:44:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Refined performance improvement changes. Tested and conducted performance benchmarking on VMs and hypervisor. Validated the improvement and committed all changes","author":"ssohail"},{"id":"140495","started":"2017-02-03","time":"11:27:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Investigated the method of TSC timer frequency calculation in Linux initializations. Verified Hyp-TimeStamp with Real time to justify that current hard-coded TSC frequency is the right frequnency","author":"ssohail"},{"id":"141074","started":"2017-02-08","time":"11:25:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Did some investigation for TSC timer usage in hypervisor\r\nDiscussed some facts and figures with Madeeha\r\nTSC frequency is being hard-coded individually for each BSPs\r\nFor some BSPs, hard-coded value is wrong ","author":"ssohail"}]},"MEH-2790":{"key":"MEH-2790","status":"Resolved","summary":"Kernel stack dumps during boot up with gVTG","customfield_11642":"","start":"","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-01-18","issuetype":"Task","worklogs":[]},"MEH-2789":{"key":"MEH-2789","status":"Resolved","summary":"VM1 unable to boot with multiple cpus when ACPI enabled","customfield_11642":"2017-01-17","start":"2017-01-17","customfield_11643":"2017-01-20","end":"2017-01-20","timeoriginalestimate":144000,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-18","issuetype":"Bug","worklogs":[{"id":"138945","started":"2017-01-18","time":"08:07:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Observing that application processors are in idle while primary is hanging.\r\nsmp_init is successful. \r\nContinuing debugging with Lauterbach.","author":"javedm"},{"id":"139100","started":"2017-01-19","time":"02:17:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Compared logs in case of failure and success, related to destination field settings on virtual local apic implementation. Realized that the ordering of vcpus in the list is causing the IPIs to be sent to wrong destinations.\r\nFixed the code to use primary processor id as the base id to calculate destination processors.","author":"javedm"}]},"MEH-2788":{"key":"MEH-2788","status":"Open","summary":"Backlog","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["gantt_show_closed","intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-18","issuetype":"Workpackage","worklogs":[]},"MEH-2786":{"key":"MEH-2786","status":"Open","summary":"CPU Performance","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-18","issuetype":"Workpackage","worklogs":[]},"MEH-2785":{"key":"MEH-2785","status":"Resolved","summary":"Bugs","customfield_11642":"","start":"","customfield_11643":"2017-04-07","end":"2017-04-07","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-18","issuetype":"Workpackage","worklogs":[]},"MEH-2783":{"key":"MEH-2783","status":"Resolved","summary":"Verifying Second display on neusoft","customfield_11642":"","start":"","customfield_11643":"2017-01-18","end":"2017-01-18","timeoriginalestimate":0,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-01-17","issuetype":"Task","worklogs":[{"id":"138847","started":"2017-01-17","time":"09:04:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"-> spent sometime trying to use the second display(no success)","author":"aarehman"},{"id":"138942","started":"2017-01-18","time":"07:47:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"-> verified that second display works on neusoft- please see comments","author":"aarehman"}]},"MEH-2777":{"key":"MEH-2777","status":"Open","summary":"Stability\/Improvements","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-17","issuetype":"Workpackage","worklogs":[]},"MEH-2776":{"key":"MEH-2776","status":"Open","summary":"Enabling Video on MEHV on NS HS7 HW","customfield_11642":"2017-02-01","start":"2017-02-01","customfield_11643":"","end":"","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-17","issuetype":"Workpackage","worklogs":[]},"MEH-2775":{"key":"MEH-2775","status":"Open","summary":"Enablement of 3rd display Pipeline","customfield_11642":"2017-02-01","start":"2017-02-01","customfield_11643":"","end":"","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-17","issuetype":"Workpackage","worklogs":[]},"MEH-2774":{"key":"MEH-2774","status":"Open","summary":"Performance gVTG","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":0,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-17","issuetype":"Workpackage","worklogs":[]},"MEH-2773":{"key":"MEH-2773","status":"Resolved","summary":"SPL-A1 M.5\/D.3 ","customfield_11642":"","start":"","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-17","issuetype":"Workpackage","worklogs":[]},"MEH-2772":{"key":"MEH-2772","status":"Resolved","summary":"SPL-A2 M.6\/D.4","customfield_11642":"","start":"","customfield_11643":"2017-04-06","end":"2017-04-06","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp_gptask"],"assignee":null,"created":"2017-01-17","issuetype":"Workpackage","worklogs":[]},"MEH-2771":{"key":"MEH-2771","status":"Resolved","summary":"Internal release of MEHV and patches to POC4 based guest kernels with gVTG","customfield_11642":"","start":"","customfield_11643":"2017-01-18","end":"2017-01-18","timeoriginalestimate":0,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-16","issuetype":"Task","worklogs":[{"id":"138913","started":"2017-01-17","time":"03:03:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-2770":{"key":"MEH-2770","status":"Open","summary":"HVM loader clean-up","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-16","issuetype":"Improvement","worklogs":[]},"MEH-2769":{"key":"MEH-2769","status":"Resolved","summary":"Optimize delays observed during boot time on VM0 and VM1","customfield_11642":"","start":"","customfield_11643":"2017-02-22","end":"2017-02-22","timeoriginalestimate":115200,"timespent":158400,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-01-14","issuetype":"Task","worklogs":[{"id":"140874","started":"2017-02-09","time":"00:03:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Griffin, Clyde","comment":"Checked in an optimization that avoids repeats alloc\/free call is the hypervisor.\r\n\r\nAlso I am looking at initiating a call to create VGT instance for VM1 at the end of i915 initialization from within the driver.  The goal is to get the VM1 VGT instance created as soon as it possibly can and then signal VM1 to continue with boot which I will hold in hvmloader until the signal is generated.  This will allow as much boot parallelism as is possible,  The synchronization will take place via hypercalls.  Doing this will remove the need to have vm1 boot explicitly managed elsewhere.","author":"cgriffin"},{"id":"141466","started":"2017-02-15","time":"09:41:00.000-0600","timespent":4,"timespent_seconds":115200,"displayname":"Griffin, Clyde","comment":"Between Feb 9, 2017 and Feb 14, 2017 I was able to get the VGT instance creation moved earlier, assign sysfs port, edid and connection status, synchronize the boot between vm0 and vm1 (hvm loader).  This all works and I shared patches with the team.  But the observed descrease in boot time was not significant enough to push into SPL-A1.\r\n\r\nAlso had a call with Intel to discuss boot optimizations.  They have done a number of things that we need to adopt.  They've essentially solved much of the problem already but code is not released for yet,\r\n\r\nI think in the next sprint we need to reserve quite a bit of time for this effort.  But it is dependent on Intel shareing the code in a form that can be used by Mentor as a supplement to POC 4 or POC5.","author":"cgriffin"},{"id":"141629","started":"2017-02-15","time":"01:51:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Efforts for doing boot-time optimization by researching for different hook-ups \r\nthat can be made in boot-args and kernel configurations directly affecting \r\ntime to get access of console in booting procedure of Linux-VM","author":"ssohail"}]},"MEH-2768":{"key":"MEH-2768","status":"Open","summary":"Remove dependency on MPS code.","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-13","issuetype":"Bug","worklogs":[{"id":"145170","started":"2017-03-20","time":"11:14:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Extracted PCI IRQ assignments.\r\nCreated and populated a table to store these assignments per BSP.\r\nUpdate ACPI initialization in hypervisor to make sure interrupts will be routed accordingly based on the assignments.\r\n","author":"javedm"},{"id":"145172","started":"2017-03-21","time":"11:25:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Tested the implementation for both MRB and HS7. And fixed missing pieces\r\nWas unable to commit due to new updates on master branch.","author":"javedm"}]},"MEH-2767":{"key":"MEH-2767","status":"Open","summary":"Verify GPU recovery","customfield_11642":"","start":"","customfield_11643":"2017-01-12","end":"2017-01-12","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-13","issuetype":"Task","worklogs":[]},"MEH-2766":{"key":"MEH-2766","status":"Open","summary":"Gvt-g operation during VM1 reboots","customfield_11642":"","start":"","customfield_11643":"2017-01-12","end":"2017-01-12","timeoriginalestimate":null,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2017-01-12","issuetype":"Task","worklogs":[{"id":"141542","started":"2017-02-16","time":"04:21:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Zia, Asad","comment":"\r\nFrom: Zia, Asad \r\nSent: Tuesday, February 14, 2017 12:01 PM\r\nTo: Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>; Javed, Madeeha <Madeeha_Javed@mentor.com>; Griffin, Clyde <Clyde_Griffin@mentor.com>\r\nCc: Sohail, Sharjeel <Sharjeel_Sohail@mentor.com>\r\nSubject: RE: reboot use cases\r\n\r\nHi Arvind,\r\n\r\nReboot works on XenGT. \r\n\r\nIn case of Xen, when a guest VM reboots itself, then a new VM id is generated along with a fresh VGT instance. Normally when a VGT guest shuts down, the IO emulation has already tried to destroy the VGT instance. In case ioemu exits abnormally or we want to kill the guest by force while it's running then Xen\u2019s \u2018xl toolstack\u2019 implements the code to destroy the VGT instance via sysfs. \r\n\r\nGvt-g can also initiate a VM shutdown via hypercall, in case of error or access violation.\r\n\r\nRegards,\r\nAsad\r\n","author":"ziaa"}]},"MEH-2765":{"key":"MEH-2765","status":"Resolved","summary":"Determine work involved in enabling Video on MEHV on NS HS7 HW","customfield_11642":"","start":"","customfield_11643":"2017-03-14","end":"2017-03-14","timeoriginalestimate":null,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-12","issuetype":"Task","worklogs":[{"id":"144189","started":"2017-03-14","time":"10:43:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"1080p VAAPI video playback using VAAPI verified on Neusoft hardware. Video task is now de-risked.","author":"ziaa"}]},"MEH-2763":{"key":"MEH-2763","status":"Resolved","summary":"Determine work involved in enabling third display pipeline on MEHV on NS HS7 HW","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":0,"timespent":1800,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-11","issuetype":"Task","worklogs":[{"id":"138512","started":"2017-02-13","time":"23:26:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Zia, Asad","comment":"Checked third display sysfs interface under Gvt-g, studied email and discussed with team members to provide the following report:\r\n\r\nFrom: Zia, Asad\r\nSent: Thursday, January 12, 2017 11:36 PM\r\nTo: Raghuraman, Arvind <Arvind_Raghuraman@mentor.com>\r\nCc: Griffin, Clyde <Clyde_Griffin@mentor.com>; Raza, Atif <Atif_Raza@mentor.com>\r\nSubject: RE: Enabling third display pipeline.\r\n \r\n\u200bHi Arvind,\r\n \r\nWe can only test the 3rd display on Neusoft hardware because MRB is missing a hardware connector.\r\n \r\nIn POC4, Intel exposed the control interface in sysfs \/sys\/kernel\/vgt\/control\/foreground_vm_PIPE_C needed to control the 3rd Display in direct mode. I think the following things are required in addition to the sysfs interface\r\n \r\n- Video BIOS in VM0\r\n- Copying of Video BIOS to VM1's memory. ACPI may be needed here\r\n- 3rd display working in native Linux. Harshit hinted that some patches in kernel would be required.\r\n \r\nI guess, the process of enabling the 3rd display will start from the ABU side where they will provide us a Linux kernel that is able to drive the 3rd display along with the required Video BIOS for the Neusoft hardware.\r\n \r\nRegards,\r\nAsd\r\n \r\nFrom: Raghuraman, Arvind\r\nSent: Thursday, January 12, 2017 4:04 AM\r\nTo: Zia, Asad <Asad_Zia@mentor.com>\r\nCc: Griffin, Clyde <Clyde_Griffin@mentor.com>; Raza, Atif <Atif_Raza@mentor.com>\r\nSubject: Enabling third display pipeline.\r\n \r\nHi Asad,\r\n \r\nHow much do we know about what is needed to enable the third display pipeline\/ and display on NS HW.\r\n \r\nAs we are approaching delivery of SPLA1, we should start taking steps necessary to plan for SPLA2. Enablement of third display pipeline is the key requirement for this subsequent drop. How much do you know about effort needed to enable the third display pipeline on MEHV. Do you have any open questions to Intel ? do you know the steps to be taken to enable the third display pipeline ? If we don\u2019t have this information yet, please get start engaging Intel with relevant questions. Clyde will support as needed once y\u200bou have clear understanding of work needed.\r\n \r\nBest regards,\r\nArvind\r\n \r\n \r\nArvind Raghuraman | Staff Engineer\r\nMentor Embedded\u2122 | 46897 Bayside Parkway, Fremont, CA 94538 USA\r\nP 510.354.7362\r\nNucleus\u00ae | Linux\u00ae | Android\u2122 | Services | UI | Multi-OS\r\n \r\nAndroid is a trademark of Google Inc. Use of this trademark is subject to Google Permissions.\r\nLinux is the registered trademark of Linus Torvalds in the U.S. and other countries.\r\n","author":"ziaa"}]},"MEH-2762":{"key":"MEH-2762","status":"Resolved","summary":"Allocate ample memory for ACPI tables to remove need for manual fixup on medications to ACPI tables","customfield_11642":"","start":"","customfield_11643":"2017-02-24","end":"2017-02-24","timeoriginalestimate":0,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-10","issuetype":"Task","worklogs":[{"id":"142131","started":"2017-02-22","time":"06:03:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Estimated maximum size for various tables.\r\nUpdated implementation to place tables on fixed addresses based on the fixed sizes.\r\n","author":"javedm"}]},"MEH-2761":{"key":"MEH-2761","status":"Resolved","summary":"Increase memory allocated for VM1.","customfield_11642":"2017-01-24","start":"2017-01-24","customfield_11643":"2017-01-25","end":"2017-01-25","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-01-10","issuetype":"Task","worklogs":[{"id":"139528","started":"2017-01-24","time":"13:29:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"RAM allocations modified for both MRB has HS7 on MEH-1912.","author":"cgriffin"}]},"MEH-2760":{"key":"MEH-2760","status":"Resolved","summary":"Debug incorrect Timer values","customfield_11642":"","start":"","customfield_11643":"2017-01-11","end":"2017-01-11","timeoriginalestimate":null,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-01-10","issuetype":"Sub-task","worklogs":[{"id":"138447","started":"2017-01-11","time":"23:48:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Enabling ACPI resolved the issue","author":"ziaa"}]},"MEH-2759":{"key":"MEH-2759","status":"Open","summary":"Remove the delay between VM boots","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-01-09","issuetype":"Task","worklogs":[]},"MEH-2758":{"key":"MEH-2758","status":"Resolved","summary":"VM1 should auto-boot with gVTG enabled","customfield_11642":"","start":"","customfield_11643":"2017-01-16","end":"2017-01-16","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-01-09","issuetype":"Task","worklogs":[{"id":"138694","started":"2017-01-16","time":"04:27:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Created bblayer support for client VM auto-initializations\r\n\r\n* VM1 should auto-boot with gVTG enabled\r\n* Created init script, service file, trusted apps and recipes\r\n* Created acomplete clean layer for VM0 to install and auto-run\r\n  scripts which will auto initialize VM1's vgt instance and start VM1\r\n* Removed delay from VM1's booting path\r\n\r\nTested, works fine","author":"ssohail"}]},"MEH-2757":{"key":"MEH-2757","status":"Resolved","summary":"Cleanup MEHV\/gVTG","customfield_11642":"","start":"","customfield_11643":"2017-02-15","end":"2017-02-15","timeoriginalestimate":0,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2017-01-09","issuetype":"Task","worklogs":[{"id":"138437","started":"2017-01-11","time":"16:14:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Worked on a few known areas where we can improve performance.","author":"cgriffin"},{"id":"139413","started":"2017-01-23","time":"19:05:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Checked in work on MEH-1912","author":"cgriffin"}]},"MEH-2754":{"key":"MEH-2754","status":"Resolved","summary":"Performance analysis of gVTG on MEHV","customfield_11642":"2017-01-13","start":"2017-01-13","customfield_11643":"2017-01-19","end":"2017-01-19","timeoriginalestimate":115200,"timespent":104400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-01-06","issuetype":"Task","worklogs":[{"id":"138296","started":"2017-01-10","time":"06:42:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"-> Performance measurements on XEN,MEHV using kmscube and weston application glmark2","author":"aarehman"},{"id":"138297","started":"2017-01-10","time":"06:43:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"-> debugging the incorrect fps issue","author":"aarehman"},{"id":"138298","started":"2017-01-10","time":"06:44:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"-> verifying the drift in timer api on MEHV","author":"aarehman"},{"id":"138483","started":"2017-01-12","time":"07:29:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"-> collecting performance data on xen and mehv using glmark and kmscube","author":"aarehman"},{"id":"138510","started":"2017-01-11","time":"23:17:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Figured out how to run glmark2 demo in uncapped mode.\r\nReport and discussion with other team members on the topic.","author":"ziaa"},{"id":"138697","started":"2017-01-13","time":"04:43:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"-> explored ways to run unit test for intel-gpu-tools on current setup. ","author":"aarehman"},{"id":"138741","started":"2017-01-16","time":"08:53:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Rehman, Aabdul","comment":"-> successfully figure out how to use the unit test framework for intel gpu tools. ","author":"aarehman"},{"id":"138844","started":"2017-01-17","time":"08:55:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Rehman, Aabdul","comment":"-> did cpu benchmarking with friday commit of arvind(no patches applied)\r\n-> did standard 3d application benchmarking with environment","author":"aarehman"},{"id":"138899","started":"2017-01-16","time":"01:23:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"When measuring performance using glmark benchmark we noticed 50% drop in VM1 framerate. Clyde have many ideas where performance can be improved but he needed an easy to measure performance just like we use have been using kmscube to verify 3D acceleration. When compiled it becomes this small self contained executable that can be put anywhere on rootfs and executed. The kmscube we got from open source runs in vysnc locked mode and does manifest the performance issue that was highlighted by glmark. So first i tried simplying glmark2, by removing weston dependencies, And i was successful in that, but it had dependency on image decoding libraries and texture data on rootfs.\r\nand not suitable for circulating around the team and be used by everyone.\r\n\r\n I have edited the existing ksmcbue so that it can run in uncapped mode. We have different ideas on how we can optimize MEHV gvt-g module. This modified kmscube can be used to immediately know if an optimization approach was effective if yes then how much?\r\n","author":"ziaa"},{"id":"138903","started":"2017-01-17","time":"01:28:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"We improvised a benchmark that measures pure CPU performance. We have taken update of Arvind's work committed over the weekend. The numbers show that MEHV is performing poor as compare to Xen. See below (less is better):\r\n\r\nApplication\tMEHV seconds\tXEN POC4 seconds\r\n\t\t\tVM0 - (1 cpu)\tVM1 - (3 cpus)\tVM0 - (2 cpus)\tVM1 - (2 cpus)\r\nmd5sum (singlecore)\t42\t31\t22\t22\r\nmd5sum (multicore)\t219\t83\t80\t69\r\n\r\nXenGT drop we got from Intel dedicates 2 CPUs per VM. Considering we have 3 CPUs in VM1, it still takes it longer to complete the multicore benchmark. Similarly single core tests numbers are poor for both VMs under MEHV. \r\n\r\n","author":"ziaa"},{"id":"138946","started":"2017-01-18","time":"08:08:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Rehman, Aabdul","comment":"-> running unit tests of intel-gpu-tools on xen poc4 while removing those that cause system crash\/hang. ","author":"aarehman"}]},"MEH-2753":{"key":"MEH-2753","status":"Resolved","summary":"Enable the second-independent HDMI display pipeline assigned to VM1. VM0 and VM1 should drive their independent HDMI display units. ","customfield_11642":"","start":"","customfield_11643":"2017-01-11","end":"2017-01-11","timeoriginalestimate":7200,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-06","issuetype":"Task","worklogs":[{"id":"138220","started":"2017-01-09","time":"07:19:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Zia, Asad","comment":"Provided guidance to Aabdul Rehman on how to enable multiple displays.","author":"ziaa"},{"id":"138221","started":"2017-01-09","time":"07:24:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"-> took the latest commit of MEHV with gpu hang fix and tested the kmscube application on both vms ","author":"aarehman"},{"id":"138222","started":"2017-01-09","time":"07:25:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"-> tested two displays on XEN poc4\r\n-> identified an issue with VM0 display when foreground is switched to vm1. \r\n-> documented the instructions on a confluence page. ","author":"aarehman"},{"id":"138223","started":"2017-01-09","time":"07:31:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"-> tested two displays on MEHV with weston ","author":"aarehman"},{"id":"138280","started":"2017-01-10","time":"02:44:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Zia, Asad","comment":"Opened Ticket https:\/\/mentorgraphics.atlassian.net\/browse\/IAPLP-448","author":"ziaa"},{"id":"138981","started":"2017-01-18","time":"00:53:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Figured out how to get list of connected displays, their modes and enablemnt states.","author":"ziaa"}]},"MEH-2752":{"key":"MEH-2752","status":"Resolved","summary":"Validate Intel Graphics test suite and other userspace graphics components needed for Neusoft HS7 requirement specification works on MEHV\/gVTG","customfield_11642":"2017-01-20","start":"2017-01-20","customfield_11643":"2017-02-27","end":"2017-02-27","timeoriginalestimate":201600,"timespent":134400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-01-06","issuetype":"Task","worklogs":[{"id":"138511","started":"2017-01-11","time":"23:18:00.000-0600","timespent":0.041666666666667,"timespent_seconds":1200,"displayname":"Zia, Asad","comment":"Added instructions to run Weston on Jira.","author":"ziaa"},{"id":"139044","started":"2017-01-19","time":"08:54:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Continued to run intel-gpu-tools unit tests on xen_poc4 vm0 and neusoft vm0.\r\n   * removed tests that hanged and caused system crash ","author":"aarehman"},{"id":"139133","started":"2017-01-20","time":"06:49:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"Testing the latest rootfs sent by ABU for xswayland on neusoft.","author":"aarehman"},{"id":"139157","started":"2017-01-20","time":"07:45:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"Continued to run intel-gpu-tools unit tests on xen_poc4 vm0 and neusoft vm0.\r\nProgress on tests: \r\n   -> 68 tests on xen \r\n   -> 1001 tests on neusoft ","author":"aarehman"},{"id":"139371","started":"2017-01-23","time":"08:00:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"-> Worked with Asad Zia on enabling xswayland on neusoft hardware.","author":"aarehman"},{"id":"139480","started":"2017-01-24","time":"08:29:00.000-0600","timespent":0.625,"timespent_seconds":18000,"displayname":"Rehman, Aabdul","comment":"Continued to run intel-gpu-tools unit tests on xen_poc4 vm0 and neusoft vm0. \r\nProgress on tests: \r\n   -> Tests are complete on xen \r\n   -> Tests are complete on neusoft","author":"aarehman"},{"id":"139621","started":"2017-01-25","time":"02:11:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"Generated a comparative report on the unit test results for xen vm0 and mehv vm0.  ","author":"aarehman"},{"id":"139644","started":"2017-01-26","time":"05:23:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Rehman, Aabdul","comment":"Resolved issues with the build of citydemo and tested it on neusoft","author":"aarehman"},{"id":"139762","started":"2017-01-27","time":"06:18:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Rehman, Aabdul","comment":"Investigated some tests that were crashing on MEHV but not on XEN. ","author":"aarehman"}]},"MEH-2750":{"key":"MEH-2750","status":"Resolved","summary":"Validate ACPI enablement to confirm the resource partitioning requirements for Neusoft HS7 system are met ","customfield_11642":"","start":"","customfield_11643":"2017-02-24","end":"2017-02-24","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"hsrivast","created":"2017-01-05","issuetype":"Task","worklogs":[]},"MEH-2748":{"key":"MEH-2748","status":"Resolved","summary":"Emulated Devices needed by Gvt-g","customfield_11642":"","start":"","customfield_11643":"2017-01-06","end":"2017-01-06","timeoriginalestimate":0,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2017-01-04","issuetype":"Task","worklogs":[{"id":"137924","started":"2017-01-02","time":"06:32:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"","author":"ziaa"},{"id":"137925","started":"2017-01-02","time":"06:33:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"","author":"ziaa"}]},"MEH-2747":{"key":"MEH-2747","status":"Resolved","summary":"Create a custom HVM loader for GVT-g specific initializations","customfield_11642":"","start":"","customfield_11643":"2017-01-16","end":"2017-01-16","timeoriginalestimate":144000,"timespent":144000,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-01-04","issuetype":"Task","worklogs":[{"id":"137910","started":"2016-12-26","time":"01:55:00.000-0600","timespent":4,"timespent_seconds":115200,"displayname":"Javed, Madeeha","comment":"","author":"javedm"},{"id":"138561","started":"2017-01-13","time":"07:43:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-2745":{"key":"MEH-2745","status":"Resolved","summary":"VM1 unable to boot with multiple cpus when ACPI enabled","customfield_11642":"2017-01-05","start":"2017-01-05","customfield_11643":"2017-01-25","end":"2017-01-25","timeoriginalestimate":288000,"timespent":237600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-12-28","issuetype":"Bug","worklogs":[{"id":"138022","started":"2017-01-05","time":"11:03:00.000-0600","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":" Added a hypercall handler for getting VM1 Trampoline address\r\n\r\n* Run-time produced Trampoline address is requirement for booting\r\n  secondary cpus\r\n* Implemented hypercall to let hypervisor know the generated\r\n  Trampoline address for booting secondary cpus\r\n* Created patch for both VMs accordingly\r\n* Tested the changes and committed\r\n\r\nVM1 boots on multi-cpu configuration now. But the problem is that sometimes VM1 fails to boot. If you do a reboot it starts working.\r\n\r\nThis problem was not appearing on single cpu VM1 booting.\r\n\r\nThis needs investigation","author":"ssohail"},{"id":"138023","started":"2017-01-05","time":"11:08:00.000-0600","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"\r\nImplemented an HV-Shell command to dump Memory contents on screen.\r\n\r\nThis command will help in debugging, especially in getting log_buf contents \r\nof an early crashed VM from memory.","author":"ssohail"},{"id":"138024","started":"2017-01-05","time":"11:10:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Build-time produced __log_buf address doesn't exactly maps to physical \r\naddress of __log_buf in memory. Ran a string compare operation to find the \r\nlog position in memory.\r\nDumped the log_buf for crashed VM1 boot as well as of successful VM1 boot. Compared the results and found that in case of crashed VM1, there was no panic appearing however a warning was appearing from APIC initializations. It waits for some cycles for some APIC bit to get clear but the bit doesn't get clear and the waiting period expires and generates a warning.\r\n\r\nThis warning only appears only in the case when VM1 is unsuccessful booting on multi-cpu.","author":"ssohail"},{"id":"139024","started":"2017-01-17","time":"07:00:00.000-0600","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Collected findings and discussed with team.\r\nWorked on the issue with different perspective and ideas according to findings that I collected.\r\nCPU3 gets an interrupt before it is up. And one of the cpu mostly cpu-2 goes into csd-lock state and the lock never resets.\r\nVM1 stops in idle state without a panic or crash.","author":"ssohail"},{"id":"139551","started":"2017-01-19","time":"03:28:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Madeeha got the issue by logging some lapic virtualization details.\r\nLapic virtualization code was dependent on vcpu_list sequence for selecting the right core to inject IPI to.\r\nMadeeha fixed the issue.\r\nTested the fix and justified all the findings with this problem idea. Everything fits. It is the right fix","author":"ssohail"}]},"MEH-2715":{"key":"MEH-2715","status":"Resolved","summary":"Enable and validate POC4 based guest enablement with ACPI support on Neusoft HS7 HW","customfield_11642":"","start":"","customfield_11643":"2016-12-13","end":"2016-12-13","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-12-09","issuetype":"Task","worklogs":[]},"MEH-2714":{"key":"MEH-2714","status":"Resolved","summary":"Maintain gVTg enablement on Neusoft HS7 HW\/MEHV in sync with ongoing gVTG development on MRB","customfield_11642":"","start":"","customfield_11643":"2017-01-16","end":"2017-01-16","timeoriginalestimate":0,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"aakbar","created":"2016-12-09","issuetype":"Task","worklogs":[{"id":"136351","started":"2016-12-12","time":"03:28:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Akbar-Malik, Asad","comment":"worked on rebasing.","author":"aakbar"}]},"MEH-2713":{"key":"MEH-2713","status":"Resolved","summary":"Confirm if we are accomodating space for stolen graphics memory in E820 tables being passed to VM0 and VM1","customfield_11642":"","start":"","customfield_11643":"2017-01-06","end":"2017-01-06","timeoriginalestimate":0,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-12-08","issuetype":"Task","worklogs":[{"id":"136590","started":"2016-12-13","time":"00:24:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"-> Investigated why the size of stolen memory was zero. Please see comment for details. ","author":"aarehman"},{"id":"136591","started":"2016-12-09","time":"00:26:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"-> Worked with Sharjeel to investigate holes in e820 table in xen and replicated them on MEHV. \r\nPlease see comment [http:\/\/jira.alm.mentorg.com:8080\/browse\/MEH-2713?focusedCommentId=425893&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-425893]  ","author":"aarehman"}]},"MEH-2712":{"key":"MEH-2712","status":"Resolved","summary":"Study Intel GEN graphics memory management to fully understand GTT and PPGTT","customfield_11642":"","start":"","customfield_11643":"2017-01-06","end":"2017-01-06","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-12-08","issuetype":"Bug","worklogs":[]},"MEH-2711":{"key":"MEH-2711","status":"Resolved","summary":"Rebase Neusoft HW workspace to match to the latest revision of MRB workspace","customfield_11642":"","start":"","customfield_11643":"2016-12-12","end":"2016-12-12","timeoriginalestimate":0,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"aakbar","created":"2016-12-08","issuetype":"Task","worklogs":[{"id":"136176","started":"2016-12-09","time":"04:25:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Akbar-Malik, Asad","comment":"","author":"aakbar"}]},"MEH-2708":{"key":"MEH-2708","status":"Resolved","summary":"Figure out a more fine grained approach to debug GTT","customfield_11642":"","start":"","customfield_11643":"2017-01-06","end":"2017-01-06","timeoriginalestimate":0,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2016-12-08","issuetype":"Task","worklogs":[{"id":"136821","started":"2016-12-15","time":"07:45:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Cross checking our existing knowledge of GTT obtained from blogs with the recently discovered Skylake manuals for fact check.","author":"ziaa"},{"id":"137928","started":"2017-01-04","time":"07:03:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Zia, Asad","comment":"It was reported by Adeel that without GVT-g, the i915 driver binds the application(gem_exec_nop) buffer to an offset within GM\/aperture range i.e. 0xbf000 and 0xbe000. However, with GVT-g the application buffer from VM1 is always binds to GM offset 0x3ffff000 and 0x3fffe000. This offset is out of the range of GM\/aperture. \r\n\r\nWorked on the following questions :\r\n\r\n1. Why the Driver is using offsets outside GM range?\r\n2. Is PDP0 pointer points to GM+0x3ffff000 address?","author":"ziaa"}]},"MEH-2707":{"key":"MEH-2707","status":"Resolved","summary":"Review of setup of PCI config space by xen for domU","customfield_11642":"","start":"","customfield_11643":"2016-12-08","end":"2016-12-08","timeoriginalestimate":0,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2016-12-08","issuetype":"Sub-task","worklogs":[{"id":"136091","started":"2016-12-07","time":"05:54:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Summary:\r\n    - Following is review of the setup of the pci config space by xen (to check if we are missing something)\r\n    - my understanding of config space emulation\r\n\r\nSetup of config space before booting guest domU:\r\n\r\nAfter running the command xl create <guest-config-file>:\r\n\r\nQemu is started that creates the vgt_vga Device Model for emulation of vga device for initial boot sequence:\r\nThis device model creates:\r\n    - pci-bridge:\r\n        static TypeInfo pch_info = {\r\n            .name          = \"vgt-isa\",\r\n            .parent        = TYPE_PCI_BRIDGE,\r\n            .instance_size = sizeof(PCIBridge),\r\n        };\r\n    - pci device \"vgt-vga\":\r\n        static TypeInfo igd_info = {\r\n            .name          = \"vgt-vga\",\r\n            .parent        = TYPE_PCI_DEVICE,\r\n            .instance_size = sizeof(VGTVGAState),\r\n            .class_init    = vgt_class_initfn,\r\n        };\r\n\r\nDuring the creation of vgt-vga device it initializes the config space:\r\ndom0\/build\/tmp\/work\/corei7-64-poky-linux\/qemu\/2.4.0-r1\/git\/hw\/pci-host\/piix.c:306\r\n         if (vgt_vga_enabled && xen_enabled()) {\r\n                 vgt_bridge_pci_conf_init(dev); \/\/explained below\r\n         }\r\n\r\nThe function \"vgt_bridge_pci_conf_init\" copies the config space values from the host device to the emulated device:\r\ndom0\/build\/tmp\/work\/corei7-64-poky-linux\/qemu\/2.4.0-r1\/git\/hw\/display\/vgt_vga.c:600\r\n\u200b       vgt_bridge_pci_conf_init(dev):\r\n                copies data from host config from offsets of size:\r\n                        offset \u200b  length copied\r\n                        0x00   2\r\n                        0x02   2\r\n                        0x06   2 \/\/status\r\n                        0x08   2 \/\/revision id\r\n                        0x34   1 \/\/capability id\r\n                        copy offsets of capability lists\r\n                        0x50   2 \/\/processor graphics control register\r\n                        0x52   2 \/\/processor graphics control register\r\n\r\n        vgt_vga_init(PCIBus *pci_bus):\r\n                copies data from host config from offsets of size:\r\n       offset \u200b  length copied\r\n                0x00   2\r\n                0x02   2\r\n                0x08   1 \/\/revision\r\n                0x0a   2\/\/class id\r\n\r\nThese were the important bits from the Qemu vgt_vga device model.\r\n\r\nReview of hvmloader modifications for vgt:\r\n    - During the pci_setup:\r\n        dom0\/build\/tmp\/work\/corei7-64-poky-linux\/xen\/4.6.0-r0\/git\/tools\/firmware\/hvmloader\/pci.c:536\r\n            - Xen allocates the memory hole for IGD opregion.\r\n            - Writes the opregion base address to config space of the device. \r\nigd_opregion_pgbase = mem_hole_alloc(IGD_OPREGION_PAGES);\r\n\/*\r\n * Write the the OpRegion offset to give the opregion\r\n * address to the device model. The device model will trap\r\n * and map the OpRegion at the give address.\r\n *\/\r\npci_writel(vga_devfn, PCI_INTEL_OPREGION,\r\n           igd_opregion_pgbase << PAGE_SHIFT);\r\n\r\nThen it loads the seabios_vga_bios_stdvga (we are not doing anything like this):\r\ndom0\/build\/tmp\/work\/corei7-64-poky-linux\/xen\/4.6.0-r0\/git\/tools\/firmware\/hvmloader\/seabios.c:136\r\n    - e820 tables are also setup in this same file which have holes(i'm not sure of their significance) in it as shown below:\r\n        Please see attached logs of xen hypervisor from the moment \"xl create\" is called to the moment guest has been completely brought up.\r\n(d2) E820 table:\r\n(d2)  [00]: 00000000:00000000 - 00000000:000a0000: RAM\r\n(d2)  HOLE: 00000000:000a0000 - 00000000:000c0000\r\n(d2)  [01]: 00000000:000c0000 - 00000000:00100000: RESERVED\r\n(d2)  [02]: 00000000:00100000 - 00000000:7f800000: RAM\r\n(d2)  HOLE: 00000000:7f800000 - 00000000:fc000000\r\n(d2)  [03]: 00000000:fc000000 - 00000000:fdffd000: RESERVED\r\n(d2)  [04]: 00000000:fdffd000 - 00000000:fdfff000: NVS\r\n(d2)  [05]: 00000000:fdfff000 - 00000001:00000000: RESERVED\r\n\r\nThen the control is passed to the BIOS which in turn loads the guest kernel. \r\n\r\nConfig space emulation path (Clyde can explain it better):\r\n    - writes by vm1 in i915 config region are trapped by the hypervisor \r\n    - hypervisor creates an iorequest packet that is sent to xengt module\r\n    - a vgt thread is waiting on that iorequest in code: \r\n            IOTG_GR_linux\/drivers\/xen\/xengt.c: 944\r\nret = wait_event_freezable(info->io_event_wq,\r\nkthread_should_stop() ||\r\nbitmap_weight(info->ioreq_pending, nr_vcpus));\r\n    - After that request is processed remote end is notified via irq. \r\nNote: here Qemu has no role. Qemu's role was in initial bring up. ","author":"aarehman"}]},"MEH-2706":{"key":"MEH-2706","status":"Resolved","summary":"Verify if GTT updates from VM1 are being trapped","customfield_11642":"","start":"","customfield_11643":"2017-01-06","end":"2017-01-06","timeoriginalestimate":0,"timespent":1800,"labels":["intel_automotive_hyp"],"assignee":"ziaa","created":"2016-12-08","issuetype":"Sub-task","worklogs":[{"id":"136093","started":"2016-12-08","time":"05:59:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Zia, Asad","comment":"Located and sent the relevant file\/function information.","author":"ziaa"}]},"MEH-2705":{"key":"MEH-2705","status":"Resolved","summary":"Setup XenGT POC4","customfield_11642":"","start":"","customfield_11643":"2017-01-04","end":"2017-01-04","timeoriginalestimate":0,"timespent":18000,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2016-12-08","issuetype":"Task","worklogs":[{"id":"136088","started":"2016-12-08","time":"05:45:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Started download, the copy downloaded by MJ is corrupted.","author":"ziaa"},{"id":"136820","started":"2016-12-15","time":"07:41:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Zia, Asad","comment":"Setup recipies built images for DOMU and DOM0.","author":"ziaa"}]},"MEH-2704":{"key":"MEH-2704","status":"Resolved","summary":"Follow Intel's instructions to recover the MRB lost due to bad IOC update","customfield_11642":"","start":"","customfield_11643":"2017-01-04","end":"2017-01-04","timeoriginalestimate":0,"timespent":32400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2016-12-08","issuetype":"Task","worklogs":[{"id":"136123","started":"2016-12-08","time":"08:00:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"-> Followed instructions to build sdk tools and spi image to flash on the fab B board","author":"aarehman"},{"id":"136616","started":"2016-12-14","time":"04:19:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"-> flashed ioc firmware, ioc bootloader and spi image from the ec22 release but the board isn't recovered.","author":"aarehman"},{"id":"136818","started":"2016-12-15","time":"07:19:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Rehman, Aabdul","comment":"-> Followed debug instruction given by kamesh. No conclusive cause of problem identified.Communicated to kamesh. ","author":"aarehman"}]},"MEH-2703":{"key":"MEH-2703","status":"Resolved","summary":"Study Xen vs MEHV boot logs (high level) and determine problem areas","customfield_11642":"","start":"","customfield_11643":"2016-12-08","end":"2016-12-08","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-12-08","issuetype":"Task","worklogs":[]},"MEH-2702":{"key":"MEH-2702","status":"Resolved","summary":"Enable environment for kernel debugging on Xen","customfield_11642":"","start":"","customfield_11643":"2016-12-08","end":"2016-12-08","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-12-08","issuetype":"Task","worklogs":[]},"MEH-2700":{"key":"MEH-2700","status":"Resolved","summary":"Analyze and understand graphics related transactions that occur on Xen Vs MEHV on executing the simplified core_auth application - do this on both dom0 and domu","customfield_11642":"","start":"","customfield_11643":"2017-01-06","end":"2017-01-06","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-12-08","issuetype":"Task","worklogs":[]},"MEH-2699":{"key":"MEH-2699","status":"Resolved","summary":"Forward port and get gVTG enabled on MEHV\/POC4 baseline","customfield_11642":"","start":"","customfield_11643":"2017-01-11","end":"2017-01-11","timeoriginalestimate":0,"timespent":230400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-12-08","issuetype":"Task","worklogs":[{"id":"138438","started":"2017-01-11","time":"16:17:00.000-0600","timespent":8,"timespent_seconds":230400,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2698":{"key":"MEH-2698","status":"Resolved","summary":"Instrument and analyze _kdm API transactions between Xen and MEHV in xengt and mehvgt kernel modules respectively","customfield_11642":"","start":"","customfield_11643":"2017-01-06","end":"2017-01-06","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-12-08","issuetype":"Task","worklogs":[]},"MEH-2697":{"key":"MEH-2697","status":"Resolved","summary":"Compare between Xen Vs MEHV -  Debug\/understand discrepancies found in PCI config space observed from dom0 and domU guests ","customfield_11642":"","start":"","customfield_11643":"2016-12-08","end":"2016-12-08","timeoriginalestimate":0,"timespent":32400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2016-12-08","issuetype":"Task","worklogs":[{"id":"136060","started":"2016-12-08","time":"01:19:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Config space differences as observed from dom0 guest:\r\n    - value at offset: 0xb4 is written during the call to i915_driver_load function.\r\n    - it's value is different in xen(value=0xc9) and mehv(value=0x82) case. \r\n    - we can read a very limited config space as compare to xen.\r\n        Xen readable offsets:     0x0-0x1000\r\n        Mehv readable offsets:   0x0-0x100\r\nDumps of dom0 config space are attached for xen(xen_config_dump_dom0.log) and mehv(mehv_config_dump_dom0.log). \r\n\r\nExplanation for extra readable config space:\r\n    - In xen there extra capabilities associated with the device will cause more readable config space as compared to mehv. ","author":"aarehman"},{"id":"136065","started":"2016-12-08","time":"02:11:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Rehman, Aabdul","comment":"Config space differences as observed from domU guest: \r\n    - Difference in offsets:\r\n        - offset    (xen)  (mehv)\r\n        - 0xb1     0x30   0xe0\r\n        - 0xb4     0x41   0x82\r\n        - 0xfd      0xd0   0x00\r\n        - 0xfe      0xff     0x00\r\n        - 0xff       0xfd    0x00\r\n\r\nDumps of domU config space are attached for xen(xen_config_dump_domU.log) and mehv(mehv_config_dump_domU.log). ","author":"aarehman"}]},"MEH-2696":{"key":"MEH-2696","status":"Resolved","summary":"Analyze GTT setup and validate graphics memory, registers, and mmio space are mapped properly for VM0 and VM1 on MEHV","customfield_11642":"","start":"","customfield_11643":"2017-01-18","end":"2017-01-18","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-12-08","issuetype":"Task","worklogs":[]},"MEH-2695":{"key":"MEH-2695","status":"Resolved","summary":"Enable ACPI support for MEHV","customfield_11642":"","start":"","customfield_11643":"2017-01-16","end":"2017-01-16","timeoriginalestimate":0,"timespent":288000,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-12-07","issuetype":"Task","worklogs":[{"id":"137909","started":"2016-11-14","time":"01:39:00.000-0600","timespent":10,"timespent_seconds":288000,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-2656":{"key":"MEH-2656","status":"Open","summary":"Clean up of Trango patches from hypervisor and kernel","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-11-09","issuetype":"Bug","worklogs":[]},"MEH-2654":{"key":"MEH-2654","status":"Open","summary":"Verify ethernet and USB host driver function on guests.","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-11-08","issuetype":"Bug","worklogs":[]},"MEH-2653":{"key":"MEH-2653","status":"Open","summary":"EPT violation is encountered when ACPI is ON in boot arguments of VM0","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-11-08","issuetype":"Bug","worklogs":[]},"MEH-2652":{"key":"MEH-2652","status":"Open","summary":"Booting VM1 automatically after VM0 comes up","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-11-08","issuetype":"Bug","worklogs":[]},"MEH-2651":{"key":"MEH-2651","status":"Resolved","summary":"i2c driver fails on VM0","customfield_11642":"2017-01-23","start":"2017-01-23","customfield_11643":"2017-01-27","end":"2017-01-27","timeoriginalestimate":86400,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-11-08","issuetype":"Bug","worklogs":[{"id":"139547","started":"2017-01-24","time":"02:39:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Removed i2c patch and tested hypervisor and guests. Turns out that i2c patch is not needed at all. Sent an email to Asad Akbar. ","author":"javedm"}]},"MEH-2644":{"key":"MEH-2644","status":"Open","summary":"WIth logging severity set to NOTE, VM1 boots with a delay.","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-11-07","issuetype":"Bug","worklogs":[]},"MEH-2622":{"key":"MEH-2622","status":"Resolved","summary":"Upgrade to ABL 1634","customfield_11642":"","start":"","customfield_11643":"2016-11-07","end":"2016-11-07","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-10-13","issuetype":"Bug","worklogs":[]},"MEH-2614":{"key":"MEH-2614","status":"Resolved","summary":"Graphics display with VGT not working on 0.9 kernel build","customfield_11642":"","start":"","customfield_11643":"2016-10-05","end":"2016-10-05","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-10-05","issuetype":"Bug","worklogs":[{"id":"131175","started":"2016-10-05","time":"07:33:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Reproduced the environment and results with both the kernel configuration.\r\n\r\nWent through the differences, tried many changes and finally found some \r\nVGA console configurations disabled in new kernel configuration.\r\n\r\nEnabled these configurations through proper configuration files and \r\nvalidated this fix.\r\n\r\nDisplay is working now.....","author":"ssohail"}]},"MEH-2613":{"key":"MEH-2613","status":"Resolved","summary":"Host-VM privileged VM-life-cycle management support for VGT","customfield_11642":"","start":"","customfield_11643":"2016-10-05","end":"2016-10-05","timeoriginalestimate":144000,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-10-05","issuetype":"Task","worklogs":[{"id":"131166","started":"2016-10-05","time":"06:55:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Activated already available VM life cycle management that I developed \r\nsome time ago for some other use-cases.\r\nModified the implementation to support vm_boot command as well. \r\nPrepared patches and validated.\r\nModified boot sequence to restrict non-privileged VM from booting unless \r\nuntil host-VM kicks it","author":"ssohail"},{"id":"131167","started":"2016-10-05","time":"06:57:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Modified the provided patches to get applied on a kernel with already \r\npartially patched version. Validated and merged.","author":"ssohail"}]},"MEH-2574":{"key":"MEH-2574","status":"In Progress","summary":"Create De-initialization APIs in Intel-HV","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":115200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-09-29","issuetype":"Task","worklogs":[]},"MEH-2573":{"key":"MEH-2573","status":"In Progress","summary":"Implement System-Reset command for Intel-HV","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-09-29","issuetype":"Task","worklogs":[]},"MEH-2518":{"key":"MEH-2518","status":"In Progress","summary":"Implement Compile-Time Memory-Pool Creation","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":43200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-09-08","issuetype":"Sub-task","worklogs":[]},"MEH-2515":{"key":"MEH-2515","status":"Resolved","summary":"Unable to quit vi editor in Linux guests","customfield_11642":"","start":"","customfield_11643":"2017-03-22","end":"2017-03-22","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-09-05","issuetype":"Bug","worklogs":[]},"MEH-2464":{"key":"MEH-2464","status":"Resolved","summary":"issue with console shift sequence","customfield_11642":"2016-08-12","start":"2016-08-12","customfield_11643":"2016-08-12","end":"2016-08-12","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-08-12","issuetype":"Bug","worklogs":[]},"MEH-2403":{"key":"MEH-2403","status":"Resolved","summary":"Run benchmarks and support performance optimization of Trango based shared graphics soln","customfield_11642":"2016-07-29","start":"2016-07-29","customfield_11643":"2016-07-29","end":"2016-07-29","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-29","issuetype":"Task","worklogs":[]},"MEH-2402":{"key":"MEH-2402","status":"Open","summary":"JTAG headers and cables needed for NS HW","customfield_11642":"2016-07-28","start":"2016-07-28","customfield_11643":"2016-07-28","end":"2016-07-28","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-07-28","issuetype":"Bug","worklogs":[]},"MEH-2401":{"key":"MEH-2401","status":"Resolved","summary":"Get specs for HW rework needed to NS HW","customfield_11642":"2016-07-28","start":"2016-07-28","customfield_11643":"2016-07-28","end":"2016-07-28","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-07-28","issuetype":"Bug","worklogs":[]},"MEH-2400":{"key":"MEH-2400","status":"Open","summary":"Enable rpmsg on NS HW","customfield_11642":"2016-07-28","start":"2016-07-28","customfield_11643":"2016-07-28","end":"2016-07-28","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-07-28","issuetype":"Bug","worklogs":[]},"MEH-2390":{"key":"MEH-2390","status":"Resolved","summary":"Validate trango bits on NS HW","customfield_11642":"2016-07-27","start":"2016-07-27","customfield_11643":"2016-07-27","end":"2016-07-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-27","issuetype":"Task","worklogs":[]},"MEH-2389":{"key":"MEH-2389","status":"Resolved","summary":"Validate HDMI for IVI working on cluster VM","customfield_11642":"2016-07-27","start":"2016-07-27","customfield_11643":"2016-07-27","end":"2016-07-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-27","issuetype":"Sub-task","worklogs":[]},"MEH-2388":{"key":"MEH-2388","status":"Resolved","summary":"Implement virtual:physical B:D:F mappings in VM description to allows guests to query non-zero device-fns","customfield_11642":"2016-08-05","start":"2016-08-05","customfield_11643":"2016-08-25","end":"2016-08-25","timeoriginalestimate":null,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-27","issuetype":"Task","worklogs":[{"id":"125380","started":"2016-07-27","time":"09:38:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Arslan, Muhammad [X]","comment":"Implemented the virtual BDFs. ","author":"marslan"}]},"MEH-2387":{"key":"MEH-2387","status":"Resolved","summary":"Assign SPI0 to cluster VM","customfield_11642":"2016-07-27","start":"2016-07-27","customfield_11643":"2016-07-27","end":"2016-07-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-27","issuetype":"Sub-task","worklogs":[]},"MEH-2386":{"key":"MEH-2386","status":"Resolved","summary":"Assign SPI1 to IVI VM","customfield_11642":"2016-07-27","start":"2016-07-27","customfield_11643":"2016-07-27","end":"2016-07-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-27","issuetype":"Sub-task","worklogs":[]},"MEH-2385":{"key":"MEH-2385","status":"Resolved","summary":"Get UART 1 assigned to and working on IVI VM","customfield_11642":"2016-07-27","start":"2016-07-27","customfield_11643":"2016-07-27","end":"2016-07-27","timeoriginalestimate":null,"timespent":5400,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-27","issuetype":"Sub-task","worklogs":[{"id":"125347","started":"2016-07-27","time":"07:30:00.000-0500","timespent":0.1875,"timespent_seconds":5400,"displayname":"Arslan, Muhammad [X]","comment":"Assigned and tested UART1 on IVI. ","author":"marslan"}]},"MEH-2377":{"key":"MEH-2377","status":"Resolved","summary":"Sometimes 2nd AP does not show up on IVI VM's SMP guest","customfield_11642":"2016-07-26","start":"2016-07-26","customfield_11643":"2016-07-26","end":"2016-07-26","timeoriginalestimate":null,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-26","issuetype":"Sub-task","worklogs":[{"id":"125333","started":"2016-07-27","time":"04:00:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Arslan, Muhammad [X]","comment":"Removed the race condition which was causing one of the APs to fail by protecting the critical section with locks. ","author":"marslan"}]},"MEH-2376":{"key":"MEH-2376","status":"Resolved","summary":"Improve boot time of Cluster and IVI VMs","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-07-26","issuetype":"Task","worklogs":[]},"MEH-2369":{"key":"MEH-2369","status":"Resolved","summary":"Validate HDMI for cluster working on Cluster VM","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-25","issuetype":"Sub-task","worklogs":[]},"MEH-2351":{"key":"MEH-2351","status":"Resolved","summary":"Assign I2C channel 3 to Cluster VM","customfield_11642":"2016-07-20","start":"2016-07-20","customfield_11643":"2016-07-20","end":"2016-07-20","timeoriginalestimate":null,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-20","issuetype":"Sub-task","worklogs":[{"id":"124759","started":"2016-07-20","time":"15:00:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Arslan, Muhammad [X]","comment":"It turned out that the logic in the linux kernel to scan the PCI buses is such that it checks for the first function number (func_no 0) on a given device, and if it doesn't find the said function, it returns without looking for anymore devices. See the code below:\r\n{code}\r\nint pci_scan_slot(struct pci_bus *bus, int devfn)\r\n{\r\n    unsigned fn, nr = 0;\r\n    struct pci_dev *dev;\r\n\r\n    if (only_one_child(bus) && (devfn > 0))\r\n        return 0; \/* Already scanned the entire slot *\/\r\n\r\n    dev = pci_scan_single_device(bus, devfn);\r\n\r\n    if (!dev)\r\n        return 0;\r\n    if (!dev->is_added)\r\n        nr++;\r\n\r\n    for (fn = next_fn(bus, dev, 0); fn > 0; fn = next_fn(bus, dev, fn)) {\r\n        dev = pci_scan_single_device(bus, devfn + fn);\r\n        if (dev) {\r\n            if (!dev->is_added)\r\n                nr++;\r\n            dev->multifunction = 1;\r\n        }\r\n    }\r\n\r\n    \/* only one slot has pcie device *\/\r\n    if (bus->self && nr)\r\n        pcie_aspm_init_link_state(bus->self);\r\n\r\n    return nr;\r\n}\r\n{code}\r\n\r\nWe need to disable the device check after the first invocation of *pci_scan_single_device* so that further functions can be probed. The revised function would look like following:\r\n{code}\r\nint pci_scan_slot(struct pci_bus *bus, int devfn)\r\n{\r\n    unsigned fn, nr = 0;\r\n    struct pci_dev *dev;\r\n\r\n    if (only_one_child(bus) && (devfn > 0))\r\n        return 0; \/* Already scanned the entire slot *\/\r\n\r\n    dev = pci_scan_single_device(bus, devfn);\r\n\r\n#if 0\r\n    if (!dev)\r\n        return 0;\r\n    if (!dev->is_added)\r\n        nr++;\r\n#endif\r\n\r\n    for (fn = next_fn(bus, dev, 0); fn > 0; fn = next_fn(bus, dev, fn)) {\r\n        dev = pci_scan_single_device(bus, devfn + fn);\r\n        if (dev) {\r\n            if (!dev->is_added)\r\n                nr++;\r\n            dev->multifunction = 1;\r\n        }\r\n    }\r\n\r\n    \/* only one slot has pcie device *\/\r\n    if (bus->self && nr)\r\n        pcie_aspm_init_link_state(bus->self);\r\n\r\n    return nr;\r\n}\r\n{code}\r\n\r\nThe *pci_scan_slot* is present in *drivers\/pci\/probe.c* file. ","author":"marslan"}]},"MEH-2350":{"key":"MEH-2350","status":"Resolved","summary":"Resolve the intermittent CPU synchronization issue among virtual cores on SMP guests","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-20","issuetype":"Task","worklogs":[{"id":"125427","started":"2016-07-28","time":"15:22:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Arslan, Muhammad [X]","comment":"Removed the mdelays that were causing the slow boot of the system. Spin locks earlier fixed the synchronization problem. ","author":"marslan"}]},"MEH-2346":{"key":"MEH-2346","status":"Resolved","summary":"Remove changes needed to guest kernel code to reserve memory for AP startup code","customfield_11642":"2016-07-19","start":"2016-07-19","customfield_11643":"2016-07-19","end":"2016-07-19","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-07-19","issuetype":"Sub-task","worklogs":[]},"MEH-2345":{"key":"MEH-2345","status":"Resolved","summary":"Get SMP working with 1:1 mapping of IVI VM","customfield_11642":"2016-07-19","start":"2016-07-19","customfield_11643":"2016-07-19","end":"2016-07-19","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-07-19","issuetype":"Sub-task","worklogs":[]},"MEH-2344":{"key":"MEH-2344","status":"Resolved","summary":"Assign USB to IVI VM and get it working ..","customfield_11642":"2016-07-19","start":"2016-07-19","customfield_11643":"2016-07-19","end":"2016-07-19","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-07-19","issuetype":"Sub-task","worklogs":[]},"MEH-2343":{"key":"MEH-2343","status":"Resolved","summary":"Create spec on confluence & update MEHV build and packaging scheme compatible with required flow for NS project","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":0,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-19","issuetype":"Task","worklogs":[{"id":"126487","started":"2016-08-05","time":"06:22:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-2340":{"key":"MEH-2340","status":"Resolved","summary":"Enable PCI interrupt sharing support ","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-07-18","issuetype":"Task","worklogs":[]},"MEH-2339":{"key":"MEH-2339","status":"Resolved","summary":"Enable Hypervisor intervention in external interrupt processing flow to allow direct injection (1:1 mapped)","customfield_11642":"2016-07-18","start":"2016-07-18","customfield_11643":"2016-07-18","end":"2016-07-18","timeoriginalestimate":null,"timespent":144000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-18","issuetype":"Task","worklogs":[{"id":"124706","started":"2016-07-13","time":"02:00:00.000-0500","timespent":5,"timespent_seconds":144000,"displayname":"Arslan, Muhammad [X]","comment":"Enabled the external interrupt handling in the hypervisor. ","author":"marslan"}]},"MEH-2338":{"key":"MEH-2338","status":"Resolved","summary":"Enable IVI resource partitioning on NS HW","customfield_11642":"2016-07-19","start":"2016-07-19","customfield_11643":"2016-07-27","end":"2016-07-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-18","issuetype":"Task","worklogs":[]},"MEH-2337":{"key":"MEH-2337","status":"Resolved","summary":"Enable cluster resource partitioning on NS HW","customfield_11642":"2016-07-20","start":"2016-07-20","customfield_11643":"2016-07-27","end":"2016-07-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-18","issuetype":"Task","worklogs":[]},"MEH-2336":{"key":"MEH-2336","status":"Resolved","summary":"Validate VirtIO based - virtual console, networking, and FS are fully functional on NS HW with SysDK guests. ","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-18","issuetype":"Task","worklogs":[]},"MEH-2335":{"key":"MEH-2335","status":"Resolved","summary":"Validate guest shutdown, and re-boot is working on SysDK guests on NS HW","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-07-18","issuetype":"Task","worklogs":[]},"MEH-2334":{"key":"MEH-2334","status":"Resolved","summary":"Integrate with SysDK for NS HW and bring up MEHV + Cluster and IVI kernels on NS HW. ","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":0,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-18","issuetype":"Task","worklogs":[{"id":"126315","started":"2016-08-02","time":"02:43:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-2333":{"key":"MEH-2333","status":"Resolved","summary":"Bring up MEHV + Cluster and IVI MRB kernels on Neusoft HW. ","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-18","issuetype":"Task","worklogs":[]},"MEH-2332":{"key":"MEH-2332","status":"Resolved","summary":"Establish Hypervisor\/guest boot architecture and FS placement for guests","customfield_11642":"2016-07-25","start":"2016-07-25","customfield_11643":"2016-07-25","end":"2016-07-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-18","issuetype":"Task","worklogs":[]},"MEH-2331":{"key":"MEH-2331","status":"Resolved","summary":"Create a new BSP directory for Neusoft HW","customfield_11642":"2016-07-18","start":"2016-07-18","customfield_11643":"2016-07-18","end":"2016-07-18","timeoriginalestimate":null,"timespent":1800,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-07-18","issuetype":"Task","worklogs":[{"id":"124730","started":"2016-07-20","time":"02:50:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Arslan, Muhammad [X]","comment":"Added a new bsp \"hs7_ecu\".","author":"marslan"}]},"MEH-2312":{"key":"MEH-2312","status":"Resolved","summary":"VM Reboot Not working with Connected OS Guests","customfield_11642":"2016-07-18","start":"2016-07-18","customfield_11643":"2016-07-22","end":"2016-07-22","timeoriginalestimate":144000,"timespent":144000,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-07-13","issuetype":"Bug","worklogs":[{"id":"128828","started":"2016-09-08","time":"04:37:00.000-0500","timespent":5,"timespent_seconds":144000,"displayname":"Sohail, Sharjeel","comment":"Debugged and resolved Connected-OS reboot problems","author":"ssohail"}]},"MEH-2291":{"key":"MEH-2291","status":"Resolved","summary":"Kernel panic and slow boot times observed on MRB when booting SMP guest on VM1","customfield_11642":"2016-07-04","start":"2016-07-04","customfield_11643":"2016-07-04","end":"2016-07-04","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-07-04","issuetype":"Bug","worklogs":[]},"MEH-2285":{"key":"MEH-2285","status":"In Progress","summary":"VM's not rebooting with dynamic VM struture allocation implementation","customfield_11642":"2016-06-27","start":"2016-06-27","customfield_11643":"2016-06-29","end":"2016-06-29","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-27","issuetype":"Bug","worklogs":[]},"MEH-2276":{"key":"MEH-2276","status":"Resolved","summary":"VirtIO console won't switch among connect OSes on MRB","customfield_11642":"2016-06-23","start":"2016-06-23","customfield_11643":"2016-06-23","end":"2016-06-23","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-22","issuetype":"Bug","worklogs":[{"id":"122363","started":"2016-06-23","time":"18:50:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"After many experiments, found that when problem occurs, VM linked-list seem to have only \r\none VM. So, for any vm_id, same VM pointer is returned.\r\n\r\nThis race condition is possible if both Guests try to add their reference into VM linked-list at \r\nthe same time. Hence, VM pointer addition into this linked-list must be secured by a spin-lock.\r\n\r\nImplemented spin-lock across this and validated the fix on MRB ","author":"ssohail"}]},"MEH-2271":{"key":"MEH-2271","status":"Resolved","summary":"Create i915 GVT-g patch","customfield_11642":"2016-06-21","start":"2016-06-21","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-06-21","issuetype":"New Feature","worklogs":[]},"MEH-2264":{"key":"MEH-2264","status":"Resolved","summary":"Slow boot times observed when booting SMP linux kernel on Minnowmax","customfield_11642":"2016-06-17","start":"2016-06-17","customfield_11643":"2016-06-17","end":"2016-06-17","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-06-17","issuetype":"Bug","worklogs":[]},"MEH-2258":{"key":"MEH-2258","status":"Resolved","summary":"Modify VM_RESTARTED check in hv_main","customfield_11642":"2016-06-16","start":"2016-06-16","customfield_11643":"2016-06-16","end":"2016-06-16","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-16","issuetype":"Bug","worklogs":[{"id":"122791","started":"2016-06-27","time":"21:18:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Correctly moved VM-RAM cleaning instruction in VM-Shutdown path\r\nNo need of any change in VM data structure\r\nTested, Validated and committed","author":"ssohail"}]},"MEH-2253":{"key":"MEH-2253","status":"Resolved","summary":"Get rid of the redundant MPS checksum implementations","customfield_11642":"2016-06-16","start":"2016-06-16","customfield_11643":"2016-06-16","end":"2016-06-16","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-16","issuetype":"Bug","worklogs":[{"id":"122891","started":"2016-06-28","time":"14:34:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Resolved","author":"ssohail"}]},"MEH-2251":{"key":"MEH-2251","status":"In Progress","summary":"Implement Memory Management component in Intel-HV","customfield_11642":"2016-06-15","start":"2016-06-15","customfield_11643":"2016-06-21","end":"2016-06-21","timeoriginalestimate":115200,"timespent":100800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-15","issuetype":"Improvement","worklogs":[{"id":"128830","started":"2016-09-08","time":"05:22:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Investigated different Memory Management techniques approaches and \r\ncreated a pros\/cons structure for comparison of memory management \r\ncomponents.\r\n\r\nHere is my analysis on Multiple approaches for Memory Management Component\r\n\r\n\r\nThere are two approaches implemented in Nucleus\r\n\r\n1- Dynamic Memory Management\r\n2- Partition Memory Management\r\n\r\n\r\n1- Dynamic Memory Management:\r\n\r\n    Variable sized contiguous memory chunks are allocated. Minimum Memory limit = 32Bytes\r\n\r\n    Pros: No External Fragmentation. Better memory-space utilization\r\n    Cons: Poor Time-efficiency, Internal Fragmentation\r\n\r\n\r\n2- Partition Memory Management:\r\n\r\n    A pool is initialized and divided into fixed memory partitions. At every allocation same sized   \r\n    memory is allocated.\r\n\r\n    Pros: No Internal Fragmentation, Time Efficient\r\n    Cons: External Fragmentation, Poor memory-space utilization\r\n\r\n\r\nSuggested Approach: (Extended Partition-type Memory Management)\r\n\r\n    Multiple partition-type Memory pools creation with different fixed sizes: e.g. 64B, 256B, 1KB etc.\r\n\r\n    Pros: Better Memory space utilization, Time-efficient, No Internal Fragmentation and minimum\r\n    Internal Fragmentation\r\n\r\n    The suggested approach can be implemented with two approaches\r\n    1- Memory pools creation at Initialization\r\n    2- Memory pools creation on demand\r\n\r\n    1st  Approach: Always Time Efficient but poor space utilization\r\n    2nd Approach: Mostly Time Efficient (overhead is experienced when there is a need to create a\r\n                                new memory pool), Good Memory-space utilization\r\n\r\n\r\n\r\nAccording to my analysis, for embedded hypervisor solution, Multiple-Partition Approach with\r\non-demand Memory pool creation is most reasonable.","author":"ssohail"},{"id":"128831","started":"2016-09-08","time":"05:25:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Discussed the implementation approaches with Arvind and decided to go for \r\nextended partition approach which will allow allocation of contiguous blocks.\r\n\r\nInvestigated already available implementation in Intel-HV and understood its \r\nrestrictions and usability in new implementation.\r\n\r\nCreated sub-tasks to divided the work effort for work-management clarity","author":"ssohail"}]},"MEH-2250":{"key":"MEH-2250","status":"Open","summary":"Intel-HV: Division of headers into private and public parts","customfield_11642":"2016-06-15","start":"2016-06-15","customfield_11643":"2016-06-29","end":"2016-06-29","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-15","issuetype":"Improvement","worklogs":[]},"MEH-2249":{"key":"MEH-2249","status":"Resolved","summary":"Switching to VM1 console creates pagefault on Minnowmax","customfield_11642":"2016-06-15","start":"2016-06-15","customfield_11643":"2016-06-15","end":"2016-06-15","timeoriginalestimate":null,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-15","issuetype":"Bug","worklogs":[{"id":"121617","started":"2016-06-15","time":"07:16:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Debugged the code and found some irregularities in a recent commit.\r\nvm_state is not getting set for VM1 and on the base of this property, VM1 structures were not being created.\r\nFixed the issue","author":"ssohail"}]},"MEH-2236":{"key":"MEH-2236","status":"Open","summary":"On invokling vmlist command from single SMP VM Hypervisor crashes. ","customfield_11642":"2016-06-09","start":"2016-06-09","customfield_11643":"2016-06-09","end":"2016-06-09","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-06-09","issuetype":"Bug","worklogs":[]},"MEH-2220":{"key":"MEH-2220","status":"In Progress","summary":"Cleanup of Intel-Hypervisor Sources","customfield_11642":"2016-06-03","start":"2016-06-03","customfield_11643":"2016-06-10","end":"2016-06-10","timeoriginalestimate":432000,"timespent":288000,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-06-03","issuetype":"Improvement","worklogs":[{"id":"121620","started":"2016-06-15","time":"07:50:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Cleanup \/ Modifications in hv\/include\/services and hv\/include\/drivers component\r\n\r\nAdded File headers and License\r\nAdded generic headers to expose all the headers in a component","author":"ssohail"},{"id":"121621","started":"2016-06-15","time":"07:51:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Cleanup\/Modification in hv\/drivers and hv\/services component\r\n\r\nModified include paths\r\nAdded Function headers and file headers in every file\r\nRestricted code width to 80 column\r\nAdded License","author":"ssohail"},{"id":"121622","started":"2016-06-15","time":"07:54:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Cleaned-up \/ modified hv\/core component\r\n\r\nAdded File and Function headers and licenses\r\nRestricted code line width to 80 column\r\nUpdated include paths","author":"ssohail"},{"id":"122792","started":"2016-06-27","time":"21:21:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Cleanup hv\/core\/include and hv\/arch component","author":"ssohail"},{"id":"122793","started":"2016-06-27","time":"21:21:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Removed NEW_IMPL checks in sources and definition in metadata\r\nModified VirtIO-Console source\/header file names according to standard conventions","author":"ssohail"},{"id":"122794","started":"2016-06-27","time":"21:23:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Clean-up of os\/ component\r\nSome bug fixing as well","author":"ssohail"},{"id":"122795","started":"2016-06-27","time":"21:24:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Modified OS_ASSERT definition to include another argument \"a string\" \r\nwhich tells\/explains the reason of Error","author":"ssohail"}]},"MEH-2171":{"key":"MEH-2171","status":"Closed","summary":"Timer virtualization","customfield_11642":"2016-05-16","start":"2016-05-16","customfield_11643":"2016-05-16","end":"2016-05-16","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"atraza","created":"2016-05-15","issuetype":"Bug","worklogs":[]},"MEH-2165":{"key":"MEH-2165","status":"Resolved","summary":"Guest0 crashes in Linux-Linux config on MRB","customfield_11642":"2016-05-09","start":"2016-05-09","customfield_11643":"2016-05-11","end":"2016-05-11","timeoriginalestimate":57600,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-05-09","issuetype":"Bug","worklogs":[{"id":"118183","started":"2016-05-09","time":"12:43:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Did a little inspection and found that when Guest crashes, it crashes even \r\nbefore Virt-Queues are created.","author":"ssohail"}]},"MEH-2155":{"key":"MEH-2155","status":"Resolved","summary":"Clean up","customfield_11642":"2016-05-03","start":"2016-05-03","customfield_11643":"2016-05-03","end":"2016-05-03","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-05-03","issuetype":"Bug","worklogs":[]},"MEH-2150":{"key":"MEH-2150","status":"Resolved","summary":"Cleanup of HV Shell and VirtIO-Console","customfield_11642":"2016-04-27","start":"2016-04-27","customfield_11643":"2016-04-28","end":"2016-04-28","timeoriginalestimate":28800,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-27","issuetype":"Task","worklogs":[{"id":"118180","started":"2016-05-09","time":"12:34:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Moved hv-shell into hv\/services and modified metadat and other paths accordingly. Updated all related configs","author":"ssohail"},{"id":"118181","started":"2016-05-09","time":"12:35:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Cleaned-up VirtIO-Console and added File headers and function headers against all APIs and files","author":"ssohail"}]},"MEH-2149":{"key":"MEH-2149","status":"Resolved","summary":"Shell doesn't work when both VMs are in shutdown state","customfield_11642":"2016-04-27","start":"2016-04-27","customfield_11643":"2016-04-28","end":"2016-04-28","timeoriginalestimate":28800,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-27","issuetype":"Bug","worklogs":[{"id":"118182","started":"2016-05-09","time":"12:36:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Updated Shutdown loop to do full time HV-Shell kicking in case of VM shutdown. This modification resolves the corner case","author":"ssohail"}]},"MEH-2148":{"key":"MEH-2148","status":"Resolved","summary":"Enable vm_reboot and vm_shutdown user-applications for MRB","customfield_11642":"2016-04-27","start":"2016-04-27","customfield_11643":"2016-04-28","end":"2016-04-28","timeoriginalestimate":28800,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-27","issuetype":"Bug","worklogs":[{"id":"124526","started":"2016-07-18","time":"03:35:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Second argument of syscall is creating kernel panic as it finds a page fault.\r\nSeems like changes in syscall syntax in new kernel.\r\nTried many syntax but string argument is not getting read.\r\n* Implemented two separate syscalls for shutdown and reboot\r\n* Updated user-apps code\r\nNo string argument required. Issue fixed.\r\n\r\nUpdated patches and committed","author":"ssohail"}]},"MEH-2142":{"key":"MEH-2142","status":"Resolved","summary":"VM0 doesn't reboot successfully for MRB","customfield_11642":"2016-04-22","start":"2016-04-22","customfield_11643":"2016-04-25","end":"2016-04-25","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-22","issuetype":"Task","worklogs":[]},"MEH-2141":{"key":"MEH-2141","status":"Resolved","summary":"Activate\/Validate VirtIO_Console on MRB","customfield_11642":"2016-04-21","start":"2016-04-21","customfield_11643":"2016-04-22","end":"2016-04-22","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-21","issuetype":"Task","worklogs":[{"id":"116724","started":"2016-04-22","time":"04:10:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Added VirtIO Console entries for MRB.\r\nUpdated MRB's VMs with Virtio-console and hvc-driver enabled\r\n\r\nSetup MRB board and tested VirtIO-console on MRB\r\nVirtIO-console seems to work but VM1 was hanging.\r\nDebugged to minor the scope of problem and found that as soon as we \r\nturn-off serial-8250 driver in VM1, it hangs while booting. But ideally when \r\nVM1 has virtio-console, it shouldn't be dependent of serial-8250\r\n\r\nReported the issue and enabled serial-8250 for VM1\r\n\r\nWith this, Virtio-console and hv-shell are working on MRB with new virtio-\r\nimplementation","author":"ssohail"}]},"MEH-2121":{"key":"MEH-2121","status":"Resolved","summary":"Integrate New Front-end virtIO patches for Minnowmax","customfield_11642":"2016-04-12","start":"2016-04-12","customfield_11643":"2016-04-12","end":"2016-04-12","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-12","issuetype":"Task","worklogs":[{"id":"116721","started":"2016-04-22","time":"04:04:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Integrated New-virtIO implementation front-end patches for Minnowmax \r\nyocto linux guests.\r\nFind some problems, removed these with proper fixes and finally got \r\nVirtIO-net working on Minnowmax with new virtio-implementation","author":"ssohail"}]},"MEH-2120":{"key":"MEH-2120","status":"Open","summary":"Ctrl +C does not work on Linux guest VMs","customfield_11642":"2015-09-10","start":"2015-09-10","customfield_11643":"2015-09-10","end":"2015-09-10","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-04-11","issuetype":"Bug","worklogs":[]},"MEH-2119":{"key":"MEH-2119","status":"Resolved","summary":"Implement Reboot\/Shutdown support on MRB","customfield_11642":"2016-04-11","start":"2016-04-11","customfield_11643":"2016-04-12","end":"2016-04-12","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-11","issuetype":"Task","worklogs":[{"id":"116712","started":"2016-04-22","time":"03:45:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Integrated front-end and back-end Reboot\/Shutdown support in MRB. Resolved hunks in front-end patches with new virtio-implementation.\r\n\r\nRemoved some problems with fixes here and there.\r\nVM1 reboots but VM0 shows problems while rebooting\r\n\r\nCreated issue to capture VM0 rebooting problem","author":"ssohail"}]},"MEH-2117":{"key":"MEH-2117","status":"Resolved","summary":"Redundant\/overlapping memory map definitions for virtio\/shared memory fix this ..","customfield_11642":"2015-09-10","start":"2015-09-10","customfield_11643":"2015-09-10","end":"2015-09-10","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-04-08","issuetype":"Bug","worklogs":[]},"MEH-2113":{"key":"MEH-2113","status":"Resolved","summary":"Resolve un-handled interrupt issue on MRB","customfield_11642":"2016-03-17","start":"2016-03-17","customfield_11643":"2016-03-21","end":"2016-03-21","timeoriginalestimate":288000,"timespent":230400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-04-07","issuetype":"Bug","worklogs":[{"id":"118165","started":"2016-04-25","time":"10:42:00.000-0500","timespent":8,"timespent_seconds":230400,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-2112":{"key":"MEH-2112","status":"Resolved","summary":"Confirm there is no TSC instability issue MRB guests","customfield_11642":"2016-03-17","start":"2016-03-17","customfield_11643":"2016-03-17","end":"2016-03-17","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-04-07","issuetype":"Bug","worklogs":[]},"MEH-2111":{"key":"MEH-2111","status":"Resolved","summary":"Update development related code to use mehv_extern.h definitions","customfield_11642":"2016-04-06","start":"2016-04-06","customfield_11643":"2016-04-07","end":"2016-04-07","timeoriginalestimate":43200,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-06","issuetype":"Task","worklogs":[{"id":"116711","started":"2016-04-22","time":"03:41:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Updated Reboot\/Shutdown and VirtIO_Console and HV Shell related code according to mehv_extern.h definitions\r\n","author":"ssohail"}]},"MEH-2109":{"key":"MEH-2109","status":"Resolved","summary":"Linux-Guest0 not Rebooting with latest (master-branch) code","customfield_11642":"2016-04-04","start":"2016-04-04","customfield_11643":"2016-04-05","end":"2016-04-05","timeoriginalestimate":57600,"timespent":50400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-04","issuetype":"Bug","worklogs":[{"id":"114937","started":"2016-04-05","time":"06:37:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Started Debugging the issue.\r\nIt appears that HEAP over-flow occurring while allocating memory.\r\nThere are lots of memory allocations occurring but as there is no \r\nde-allocation, heap gets overflowed\r\nMore debugging showed that there are too many EPT-violations occurring \r\nand while handling each EPT-violation, 64 bytes memory is allocated from \r\nheap.\r\nEven doubling the heap size doesn't remove the problem. Something is \r\nproducing too many EPT- violations\r\nUpdated code to use static memory ranges for EPT violation handling. Heap overflow not occurring anymore but Reboot of VM0 is still not \r\nsuccessful","author":"ssohail"},{"id":"114939","started":"2016-04-05","time":"06:41:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"\r\nHad a discussion with Madeeha about possible changes that can affect \r\nRebooting of Linux-VMs. It appears that some modifications were made in \r\nI\/O emulation code. the purpose of these modifications was to use \r\nstandard MACROs for representing I\/O port handling but there are some \r\nerrors in using the MACROs. One of the problematic thing is that VM0 is \r\nprovided with I\/O emulation of PIC for both Read\/Write operations.\r\n\r\nThe main problem was that IO_ATTR_R flag was registering both \r\nRead\/Write ops whereas IO_ATTR_RW flag was registering only Read \r\noperation. This is the opposite of what should happen.\r\n\r\nRemoving the errors here solved the problems.\r\nVM0 and VM1, both rebooting fine now.","author":"ssohail"}]},"MEH-2108":{"key":"MEH-2108","status":"Resolved","summary":"VM1 console not stable","customfield_11642":"2016-04-04","start":"2016-04-04","customfield_11643":"2016-04-04","end":"2016-04-04","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-04-04","issuetype":"Bug","worklogs":[{"id":"114795","started":"2016-04-04","time":"03:20:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"I have spent the day in order to locate the changes when VM1 console problem started occurring.\r\nEverything is working fine till my \"Pull Request # 153\"\r\n\r\nI have started looking into git log for checked-in FIT images and it appears that the commit on\r\n23rd of March had made changes in linux0.fit. My guess is that the changes were un-intentional\r\nbut somehow got check-in with the commit. I have reverted that modification in linux0.fit image\r\nand VM1 console started working fine.\r\n\r\n\r\nHere is the link to that commit:\r\nhttps:\/\/github.com\/MentorEmbedded\/mehv-x64-broxton\/commit\/c0876761049ebe8ea50a79bead4d730fc4e8fd99\r\n\r\n\r\nI'm sure that rebasing with my latest commit will solve the problem","author":"ssohail"}]},"MEH-2099":{"key":"MEH-2099","status":"Resolved","summary":"Modify system partitioning to move the ethernet controller to VM1 on Minnowmax","customfield_11642":"2016-03-28","start":"2016-03-28","customfield_11643":"2016-03-28","end":"2016-03-28","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-03-28","issuetype":"Bug","worklogs":[]},"MEH-2095":{"key":"MEH-2095","status":"Resolved","summary":"MEHV GVT Implement GVT Inter VM Event Channel","customfield_11642":"2015-12-02","start":"2015-12-02","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":288000,"timespent":172800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-22","issuetype":"Sub-task","worklogs":[{"id":"118026","started":"2016-05-06","time":"15:03:00.000-0500","timespent":6,"timespent_seconds":172800,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2093":{"key":"MEH-2093","status":"Resolved","summary":"Set up boot infrastructure for FAW","customfield_11642":"2015-09-10","start":"2015-09-10","customfield_11643":"2015-09-10","end":"2015-09-10","timeoriginalestimate":0,"timespent":117000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-03-20","issuetype":"Bug","worklogs":[{"id":"118162","started":"2016-05-04","time":"10:02:00.000-0500","timespent":4,"timespent_seconds":115200,"displayname":"Arslan, Muhammad [X]","comment":"* Looked at the design requirements. \r\n* Studied the ABL and ELK image formats.\r\n* Prepared a script to partition the eMMC. \r\n* Flashed the MRB with ABL+ELK.\r\n* Tested the setup by running the eMMC partitioning script. \r\n","author":"marslan"},{"id":"118220","started":"2016-05-10","time":"02:30:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Arslan, Muhammad [X]","comment":"Completed the write-up at http:\/\/confluence.alm.mentorg.com:8090\/display\/HV\/Booting+Hypervisor+on+FAW+Hardware","author":"marslan"}]},"MEH-2092":{"key":"MEH-2092","status":"Resolved","summary":"VM File System - Setup the required infrastructure for guest file systems","customfield_11642":"2016-03-17","start":"2016-03-17","customfield_11643":"2016-03-24","end":"2016-03-24","timeoriginalestimate":576000,"timespent":691200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-03-20","issuetype":"Task","worklogs":[{"id":"118178","started":"2016-05-09","time":"12:18:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Setup MRB board. Enabled NFSD server configurations in Linux-Guest0 \r\nand NFSD client configurations in Linux-Guest1. Built rootfs and kernel \r\nbinaries. Guest1 rootfs is not building correctly so for testing purposes, \r\nused same rootfs for guest1 which is created with guest0.\r\n\r\nCreated 2 partitions. First partition contains rootfs for guest0 and second \r\npartition contains rootfs for guest1.\r\n\r\nIncluded script in Guest0 to mount sda2 partition as guest1_rootfs and \r\nexport this with read\/write permissions for guest1.\r\nUpdated boot arguments of guest1 to get rootfs through nfs which is \r\nmounted on guest0.\r\n\r\nLinux is operating with sysv so manually tried to run NFS server. sda2 is \r\nmounted correctly and \/etc\/exports file is also created however guest1 is \r\nunable to access this mounted rootfs through virt-net.\r\n\r\nLinux-Linux configuration seems very unstable on MRB with these \r\nchanges. First guest frequently crashes while booting and guest1 seems \r\nto have issues with TSC timer stability. So, it is difficult to debug nfs rootfs \r\nmount\/export problem on MRB board.","author":"ssohail"},{"id":"118179","started":"2016-05-09","time":"12:31:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Tranfered all required changes for setting up rootfs, enabling NFSD, adding \r\nscripts and modifying boot arguments into Minnowmax and produced same \r\nproblem on Minnowmax. Linux-Linux configuration is stable on Minnowmax \r\nso it is relatively easier to go forward from this point.","author":"ssohail"},{"id":"118714","started":"2016-05-16","time":"14:03:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Applied all possible flags options at server side for exporting rootfs directory and at client side while mounting nfs-root device. Nothing helped\r\n\r\nTried to mount the directory on server side itself but it failed. Applied different extra packages including portmap which may be responsible for the failure of mount command. Finally updated nfs-utils version from 1.3.0 to 1.3.1 and nfs client-server started working on guest0 with basic mount command.\r\n\r\nNow, we have guest0 which mounts partition od usb in a directory and that directory can be mounted into an other directory within the same guest through basic mount command","author":"ssohail"},{"id":"118716","started":"2016-05-16","time":"14:08:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Started running Guest1 with with initramfs and tried to mount nfs-exported \r\ndirectory of guest0  with simple mount command at guest1. It gave some \r\nerrors at start but adding nolock flag resolved the error and mounting went \r\nsuccessful.\r\nRemoved initramfs from guest1 and enabled nfsroot parameters in \r\nbootargs. tried with some combination of flags and finally specifying \r\nnfs-version and nfs-protocol flags appeared to be the required flags.\r\n\r\nNow the situation is that guest0 mounts usb partition successfully and \r\nexports this mounted directory to guest1. guest1 mounts this directory \r\nthrough NFS and uses it as its rootfs.\r\n\r\nNow the problem is that after successfully mounting the directory as \r\nNFSROOT, guest1 takes 80 to 100 seconds before running the init script \r\nof rootfs.","author":"ssohail"},{"id":"118718","started":"2016-05-16","time":"14:16:00.000-0500","timespent":1.25,"timespent_seconds":36000,"displayname":"Sohail, Sharjeel","comment":"Started debugging the problem of unexpected wait and tried different \r\nconfiguration options but nothing helped.\r\n\r\nDiscussed the problem with Linux Services expert and started looking into \r\ninit pattern of Linux kernel. After mounting through NFS, it should directly \r\ngoes towards running init script.\r\n\r\nEnabled some prints and found that the delay time is taken while reading \r\n(getting pointer) of INIT script from mounted NFS. This delay doesn't \r\nappear in the same implementation of NFSroot for ARM bsps.\r\n\r\nTried to create an intentional delay at guest1's boot-time before mounting \r\nnfsroot directory and the result is that the intentional delay affects the \r\ndelay experienced after nfsroot is mounted.","author":"ssohail"},{"id":"118719","started":"2016-05-16","time":"14:22:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Core-image-minimal is not build-able for minnowmax bsp. So, it is not \r\npossible for us to test with a relatively smalled rootfs to see if that affects \r\ndelay time.\r\n\r\nMoved to MRB and re-produced all the progress on MRB board that we \r\nhad established for Minnowmax. The same delay can be experienced on \r\nMRB even with a relatively smaller rootfs (core-image-minimal).\r\n\r\nNow the only thing is to avoid this delay somehow and infrastructure can be \r\nintegrated as default process of booting linux guests. ","author":"ssohail"},{"id":"120302","started":"2016-06-03","time":"06:25:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Continued looking for possible reason why uncertain delay can appear with \r\nNFs server.\r\nAttempted many suggested solutions and found one peculiar gracing time \r\nthing which is initiated everytime NFS server is restarted. Reduced gracing \r\ntime from NFSD kernel code. it reduced the delay time but still experiencing \r\nalmost 60 seconds delay time. ","author":"ssohail"},{"id":"120303","started":"2016-06-03","time":"06:28:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Moved back to Minnowmax as other team members required MRB for \r\ndevelopment.\r\nTried many tests with Minnowmax and host machines. these tests resulted \r\nin the confirmation that delay in getting INIT script was a problem at server \r\nside and it is independent of VirtIO-net because it also appears when we \r\nuse physical interface ethernet connection between nfs-server and \r\nnfs-client\r\n\r\nInspected connection with nfs-client at server side by issuing netstat \r\ncommand. Found that there was some timeout state of server-client \r\nconnection when nfsserver restarts. Reduced many values from TCP \r\nstandard delay to see if that can bring connection at once but the delay is \r\nstill there however after these changes netstat is not showing this delay \r\nanymore. So, reverted back these changes","author":"ssohail"},{"id":"120304","started":"2016-06-03","time":"06:34:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Started looking into Kernel code which processes connection requests \r\ncoming from client side. the code and naming conventions in NFSD code \r\nwere a little fishy so started including prints in order to understand request \r\nreceiving path at the client side.\r\n\r\nBefore this I had confirmed that Client keeps requesting for INIT script \r\nright after NFSroot connection is established.\r\n\r\nEverything in the request receiving path was working fine, client was \r\navailable as an entry in confirmed-client tables however at the end of \r\nrequest receiving path, there was a check getting failed.\r\n\r\nThis check was resulting a negative because it finds locks in enabled \r\nstate. We have reduced grace time for NFSD locking but still this check \r\nwas not successful. Manually disabled all locking procedure as a work \r\naround and this happened to make things work.\r\n\r\nTested it for both MRB and Minnowmax and it was working. However even \r\nwith this fix there were still delays happening for certain initializations.","author":"ssohail"},{"id":"120306","started":"2016-06-03","time":"06:41:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Kept debugging the kernel code. Went inside the lock checking APIs and \r\nfound that the check doesn't only checks NFSD locks but all the locks in net \r\nqueue. Searched for all the services that get initiated at NFSD initializations \r\nand initiated locks with them. \r\n\r\nFound that lockd was enabled and initializing a lock of 50 Seconds. Tried to \r\ndisable LOCKD through kernel configurations but lockd configs are \r\ndependent on NFSv3 and if NFSv3 is enabled, lockd cannot be turned off. Furthermore, NFSv3 is used buy mount command so it can not be turned \r\noff.\r\n\r\nCreated a patch to decrease the grace time of lockd's lock and this fix \r\nworked for Minnowmax. No more delay is being experienced after \r\nNFSroot connection successfully establishes.\r\n\r\ntested this fix on MRB and then tested it with latest code. No more delay \r\nwith this fix in place","author":"ssohail"},{"id":"120308","started":"2016-06-03","time":"06:48:00.000-0500","timespent":2.5,"timespent_seconds":72000,"displayname":"Sohail, Sharjeel","comment":"Created patch for reducing NFSD grace time in VM0\r\nCreated patch for reducing time-period for sending nfs connection request \r\nat client side i.e. VM1\r\nCreated NFS-utils layer in hypervisor to use new version of NFS-utils i.e. 1.3.1\r\nCreated layer to incorporate automatic VM1's rootfs setup in VM0.\r\nCreated other required recipies and scripts\r\nUpdated boot-arguments\r\nUpdated Configuration files to enable NFS server and client configurations\r\n\r\nRecreated clean workspace and build Linux images with updated layers. Used these images and rootfs and validated the whole implementation in \r\na clean environment.\r\n\r\nDid the same steps for MRB. And successfully validated\r\nProvided MRB related recipies and patches to Madeeha for integration \r\nwith CentOS.\r\n\r\nCommitted all the work for Minnowmax and pushed into latest state of \r\ncode in master repository\r\n","author":"ssohail"},{"id":"122627","started":"2016-06-27","time":"07:26:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Provided patches to Madeeha and helped her port the feature on MRB connected-OS \r\nconfigurations by providing clean bbappend and related stuff.\r\n\r\nThings working, no more work required under this issue","author":"ssohail"}]},"MEH-2091":{"key":"MEH-2091","status":"Closed","summary":"System partitioning - Set up required GPIO partitioning","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2016-03-17","end":"2016-03-17","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-03-20","issuetype":"Bug","worklogs":[]},"MEH-2090":{"key":"MEH-2090","status":"Resolved","summary":"System partitioning - Set up required I2C partitioning","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2017-02-22","end":"2017-02-22","timeoriginalestimate":0,"timespent":108000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-03-20","issuetype":"Bug","worklogs":[{"id":"120779","started":"2016-06-08","time":"02:45:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Arslan, Muhammad [X]","comment":"Assigned all I2C devices to VM 1. ","author":"marslan"},{"id":"120860","started":"2016-06-09","time":"03:00:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Arslan, Muhammad [X]","comment":" It seems *random* assignment of I2C devices is not possible. Actually, what I discovered today was that one can't assign devices having same \"Device Number\" to different VMs. For example, in case of I2C channels we have following:\r\n{code}\r\nB0:D22:F0: I2C-0\r\nB0:D22:F1: I2C-1\r\nB0:D22:F2: I2C-2\r\nB0:D22:F3: I2C-3\r\n\r\nB0:D23:F0: I2C-4\r\nB0:D23:F1: I2C-5\r\nB0:D23:F2: I2C-6\r\nB0:D23:F3: I2C-7\r\n{code}\r\n\r\nIf we are to partition above configured I2C channels, then all the adapters having *D 22* must go to one VM, and the ones with the *D 23* to other. This way we have I2C channels *0-3* assigned to VM 0 and *4-7* to VM 1. I have verified assignment in this setting and channels appear correctly. This also is generally true for other devices. The interesting thing is if one tries to assign devices with the same *device number* to different VMs, then none of the devices mounted on that device number appear on any of the VM. \r\n\r\nSince I2C signals are directly connected with the GPIO pins (Table 2-37 of Apollo Lake SoC Manual), so this partitioning scheme shouldn't hamper us implementing the required setup (touch-pad to one VM and display to other etc).    ","author":"marslan"},{"id":"121261","started":"2016-06-10","time":"03:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"* The random assignment of I2C devices is not possible. Devices having the same device number should be assigned to a single VM. With this strategy in mind, I assigned channels 0-3 to VM0 and 4-7 to VM 1. \r\n\r\n* Initially, all look good, but upon further inspection it turned out that if we take some or all of the I2C devices from VM 0, then VM 0 fails to detect both the eMMC and SD-card in 2 Linux configurations, and eMMC in single Linux configuration.\r\n\r\n* Debugged this esoteric behavior. After a marathon session we were able to find a bug in the setup of pin bitmap which didn't allow the RTE entries to set-up properly. The fix can be seen in this commit. After the fix we verified that both the eMMC and sd-card are detected properly in the single Linux configuration even if all the I2C devices are not assigned to it. But, with two Linux configurations we were still running into the problem where eMMC is not getting detected. Need to inspect this further.\r\n\r\n* I have committed the work-so-far on the I2C partitioning. ","author":"marslan"},{"id":"121446","started":"2016-06-13","time":"03:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"Apparently, VM 1 is mucking with the MPS table and Redirection Table (RT) of VM 0. My thesis is based on following observations:\r\n\r\n    When two-Linux configuration is executed, VM 0 fails to detect the eMMC in the first boot (normal boot). But once it is rebooted (via vmreboot command of the shell), eMMC is properly detected. In other words, when VM 0 boots AFTER the VM 1, everything works fine. Which definitely points that VM 1 is changing either the MP table of RT table of VM 0.\r\n    If we turnoff the MP table creation for VM 1, everything works fine on VM 0, but VM 1 fails to boot. Which means MPS_Init for VM 1 is altering the pin assignments and hence the RT.\r\n\r\nApparently PIN 3 is used for both the mmc and ISA IRQs (which is assigned to both the VMs). Tried disabling the pin 3 from the ISA routing table. Strangely, this made the VM 0 not to detect the PIN 3 at all, although the pin 3 routing entry is present in the PCI IRQ routing table. \r\n\r\nPlayed around with the pin ownership code. It seemed that not all the PCI devices have the entries in the PCI IRQ routing table. Tried dumping the PIN map from the ABL, and even there the list was incomplete. Need to investigate this further. ","author":"marslan"},{"id":"121632","started":"2016-06-14","time":"03:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"PIN 3 is connected to both the mmc in the PCI irq routing table and to the the entry 4 in the ISA routing table (which is assigned to both the VMs). This resulted in giving the ownership of pin 3 to both the VMs, and hence the estranged entry in the Redirection Table. After forcing, the HV_Arch_Vioapic_Own_Pin routine to ignore pin 3 in case of VM 1, I could see that both the eMMC and sd-card are properly getting detected in the first boot of VM 0.\r\nThe hack I used is as follows:\r\n\r\nvoid HV_Arch_Vioapic_Own_Pin(VM * vm, UINT64 dest_pin)\r\n  {\r\n      V_IOAPIC * vioapic = (V_IOAPIC *) vm->arch_vm.virt_ioapic;\r\n  \r\n      \/* \r\n       * Since PIN 3 is connected to both the mmc in the PCI IRQ routing\r\n       * table, and ISA routing table (which is assigned to both the VMs),\r\n       * hence make sure that we don't assign the same pin to both VMs.\r\n       *\/\r\n      if (vm->attr.id && dest_pin == 0x3)\r\n      {\r\n          HV_Logmsg(LOG_SEVERITY_ERROR, \"Discard\\n\");\r\n          return;\r\n      }\r\n  \r\n      if(dest_pin < 64)\r\n      {\r\n          vioapic->pin_bitmap[0] |= ((UINT64)1 << dest_pin);\r\n      }\r\n      else\r\n      {\r\n          dest_pin = dest_pin - 64;\r\n          vioapic->pin_bitmap[1] |= ((UINT64)1 << dest_pin);\r\n      }\r\n  \r\n      HV_Logmsg(LOG_SEVERITY_ERROR, \"VM:%d, dest_pin:%d, bitmap:0x%016llx\\n\",\r\n              vm->attr.id, dest_pin, vioapic->pin_bitmap[0]);\r\n  }\r\n\r\nLater, when I removed prints from the above hack, issue started reproducing again. At which point, it becomes clear that this is a synchronization problem arising because we are booting both the guests simultaneously. Tried halting VM 1, booted VM 0, and then booted VM 1. This setting detected the devices properly even without the above hack. \r\n\r\n","author":"marslan"}]},"MEH-2089":{"key":"MEH-2089","status":"Resolved","summary":"System partitioning - Set up device partitioning required for FAW ","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-14","end":"2015-08-14","timeoriginalestimate":144000,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-03-20","issuetype":"Bug","worklogs":[{"id":"119335","started":"2016-05-23","time":"02:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"Worked on moving the USB device to VM 1:\r\n* Disabled the USB in the VM 0 kernel configuration. \r\n* Keep the USB on in the VM 1 kernel configuration. \r\n* Removed the PCI mappings of USB devices (BDF=0,0x15,0 and BDF=0,0x15,1) from the VM 0 PCI mappings and add the same mappings to VM 1 PCI map. \r\n\r\nFaced following when the binary is executed:\r\n* Whenever USB is attached following kernel panic is observed in both the kernels \r\n{code}\r\n\r\n  12.835496] Disabling lock debugging due to kernel taint\r\n[   12.835561] mce: [Hardware Error]: CPU 0: Machine Check Exception: 4 Bank 0: 9000000020000003\r\n[   12.835620] mce: [Hardware Error]: TSC 3a3b79040\r\n[   12.835671] mce: [Hardware Error]: PROCESSOR 0:506c8 TIME 5571244848 SOCKET 2 APIC 2 microcode 90081004\r\n[   12.835730] mce: [Hardware Error]: Run the above through 'mcelog --ascii'\r\n[   12.835776] mce: [Hardware Error]: CPU 0: Machine Check Exception: 4 Bank 4: b600000000010408\r\n[   12.835833] mce: [Hardware Error]: TSC 3a3b79040 ADDR 468d1715d0\r\n[   12.835889] mce: [Hardware Error]: PROCESSOR 0:506c8 TIME 5571244848 SOCKET 2 APIC 2 microcode 90081004\r\n[   12.835946] mce: [Hardware Error]: Run the above through 'mcelog --ascii'\r\n[   12.835991] mce: [Hardware Error]: CPU 0: Machine Check Exception: 4 Bank 6: b600000000090408\r\n[   12.836048] mce: [Hardware Error]: TSC 3a3b79040 ADDR 1c5655468d1715d0\r\n[   12.836111] mce: [Hardware Error]: PROCESSOR 0:506c8 TIME 5571244848 SOCKET 2 APIC 2 microcode 90081004\r\n[   12.836168] mce: [Hardware Error]: Run the above through 'mcelog --ascii'\r\n[   12.836213] mce: [Hardware Error]: CPU 0: Machine Check Exception: 4 Bank 0: 9000000020000003\r\n[   12.836270] mce: [Hardware Error]: TSC 3a3b79040\r\n[   12.836316] mce: [Hardware Error]: PROCESSOR 0:506c8 TIME 5571244848 SOCKET 2 APIC 2 microcode 90081004\r\n[   12.836374] mce: [Hardware Error]: Run the above through 'mcelog --ascii'\r\n[   12.836419] mce: [Hardware Error]: Machine check: Neither restart nor error IP\r\n[   12.836471] Kernel panic - not syncing: Fatal machine check\r\n[   12.836511] Kernel Offset: disabled\r\n[   12.836544] Rebooting in 30 seconds.. \r\n{code}\r\n\r\nInitially, thought that probably interrupts are not being properly routed. Tried inspecting the redirection tables, even forced the msi interrupts to always target the core Id of VM 1. Error remained the same. Tried inspecting the PCI address map for the  USB device from the respective BARs to check if corresponding memory is properly mapped in the VM 1 (EPT entries are created), but later checked that the complete PCI address space is mapped in both the VMs. So missing memory should not be a problem here. \r\n\r\nNeed to inspect this further.    ","author":"marslan"},{"id":"119457","started":"2016-05-24","time":"03:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"Tried to make sense of the Machine Check Exception. Since the default root fs does not have the utility - mcelog - which can extract the useful information from MCE dump, so added the utility in the VM 0 filesystem by writing mcelog layer. Resultant information dumped from mcelog is as follow:\r\n\r\n{code}\r\n\r\nmac@pkl-mac-ubuntu:~\/mgc\/hypervisor\/mehv-x64-broxton\/bsp\/mrb\/target_support\/boot\/abl$ cat error\r\nCPU 0: Machine Check Exception: 4 Bank 0: 9000000020000003\r\nTSC 11d34ca736 \r\nPROCESSOR 0:506c8 TIME 5702745715 SOCKET 0 APIC 0 microcode 90081004\r\nRun the above through 'mcelog --ascii'\r\n\r\nResult:\r\n~ # mcelog --cpu core_i7 --ascii < error_1 \r\nmcelog: Family 6 Model 5c CPU: only decoding architectural errors\r\nmcelog: Forced cputype Intel Xeon 5500 series \/ Core i3\/5\/7 (\"Nehalem\/Westmere\") does not match cpu type Intel generic architectural MCA from mcelog\r\nHardware event. This is not a software error.\r\nCPU 0 BANK 0 TSC 11d34ca736 \r\nTIME 5702745715 Fri Sep 18 00:01:55 2150\r\nMCG status:MCIP \r\nMCi status:\r\nCorrected error\r\nError enabled\r\nMCA: External error\r\nSTATUS 9000000020000003 MCGSTATUS 4\r\nCPUID Vendor Intel Family 6 Model 92\r\nSOCKET 0 APIC 0 microcode 90081004\r\n\r\nCPU 0: Machine Check Exception: 4 Bank 4: b600000000010408\r\nTSC 11d34ca736 ADDR 1c43c44300 \r\nPROCESSOR 0:506c8 TIME 5702745715 SOCKET 0 APIC 0 microcode 90081004\r\nRun the above through 'mcelog --ascii'\r\n\r\nResult:\r\n~ # mcelog --cpu core_i7 --ascii < error_2\r\nmcelog: Family 6 Model 5c CPU: only decoding architectural errors\r\nmcelog: Forced cputype Intel Xeon 5500 series \/ Core i3\/5\/7 (\"Nehalem\/Westmere\") does not match cpu type Intel generic architectural MCA from mcelog\r\nHardware event. This is not a software error.\r\nCPU 0 BANK 4 TSC 11d34ca736 \r\nADDR 1c43c44300 \r\nTIME 5702745715 Fri Sep 18 00:01:55 2150\r\nMCG status:MCIP \r\nMCi status:\r\nUncorrected error\r\nError enabled\r\nMCi_ADDR register valid\r\nProcessor context corrupt\r\nMCA: Internal unclassified error: 408\r\nSTATUS b600000000010408 MCGSTATUS 4\r\nCPUID Vendor Intel Family 6 Model 92\r\nSOCKET 0 APIC 0 microcode 90081004\r\n\r\nCPU 0: Machine Check Exception: 4 Bank 6: b600000000090408\r\nTSC 11d34ca736 ADDR 4395129c43c44300 \r\nPROCESSOR 0:506c8 TIME 5702745715 SOCKET 0 APIC 0 microcode 90081004\r\nRun the above through 'mcelog --ascii'\r\n\r\nResult:\r\n~ # mcelog --cpu core_i7 --ascii < error_3\r\nmcelog: Family 6 Model 5c CPU: only decoding architectural errors\r\nmcelog: Forced cputype Intel Xeon 5500 series \/ Core i3\/5\/7 (\"Nehalem\/Westmere\") does not match cpu type Intel generic architectural MCA from mcelog\r\nHardware event. This is not a software error.\r\nCPU 0 BANK 6 TSC 11d34ca736 \r\nADDR 4395129c43c44300 \r\nTIME 5702745715 Fri Sep 18 00:01:55 2150\r\nMCG status:MCIP \r\nMCi status:\r\nUncorrected error\r\nError enabled\r\nMCi_ADDR register valid\r\nProcessor context corrupt\r\nMCA: Internal unclassified error: 408\r\nSTATUS b600000000090408 MCGSTATUS 4\r\nCPUID Vendor Intel Family 6 Model 92\r\nSOCKET 0 APIC 0 microcode 90081004\r\n\r\nCPU 0: Machine Check Exception: 4 Bank 0: 9000000020000003\r\nTSC 11d34ca736 \r\nPROCESSOR 0:506c8 TIME 5702745715 SOCKET 0 APIC 0 microcode 90081004\r\nRun the above through 'mcelog --ascii'\r\n\r\nResult:\r\n~ # mcelog --cpu core_i7 --ascii < error_4\r\nmcelog: Family 6 Model 5c CPU: only decoding architectural errors\r\nmcelog: Forced cputype Intel Xeon 5500 series \/ Core i3\/5\/7 (\"Nehalem\/Westmere\") does not match cpu type Intel generic architectural MCA from mcelog\r\nHardware event. This is not a software error.\r\nCPU 0 BANK 0 TSC 11d34ca736 \r\nTIME 5702745715 Fri Sep 18 00:01:55 2150\r\nMCG status:MCIP \r\nMCi status:\r\nCorrected error\r\nError enabled\r\nMCA: External error\r\nSTATUS 9000000020000003 MCGSTATUS 4\r\nCPUID Vendor Intel Family 6 Model 92\r\nSOCKET 0 APIC 0 microcode 90081004\r\n\r\n\r\n\r\n\r\nMachine check: Neither restart nor error IP\r\n[   64.042309] Kernel panic - not syncing: Fatal machine check\r\n[   64.042349] Kernel Offset: disabled\r\n\r\n{code}\r\n\r\nAs can be seen, from the above the log, there is no useful information except for the one where it says that process context is corrupted. Need to look as to why context is corrupted when the PCI mappings are removed from VM 0 and assigned to VM 1?\r\n\r\nSpent time on enabling\/ verifying ethernet  on VM 0. ","author":"marslan"}]},"MEH-2088":{"key":"MEH-2088","status":"Resolved","summary":"Create VirtIO console front-end for MEHV","customfield_11642":"2015-08-11","start":"2015-08-11","customfield_11643":"2015-08-13","end":"2015-08-13","timeoriginalestimate":57600,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-03-19","issuetype":"Task","worklogs":[{"id":"114792","started":"2016-04-04","time":"03:11:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Went through VirtIO_Console front end implementation in MEHV for ARM. It \r\nappears that very minimal updates in Patches required.\r\nThe main thing here is to enable VirtIO_Console and HVC_driver in Linux-\r\nGuests through Configuration files. So, I have updated these options","author":"ssohail"},{"id":"116720","started":"2016-04-22","time":"03:58:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Integrated new patches with new virtIO-implementation for Minnowmax. Some problems appeared while initializing Queue for VirtIO-net.\r\nDebugged and resolved the problem with proper fix.","author":"ssohail"}]},"MEH-2087":{"key":"MEH-2087","status":"Resolved","summary":"Create a shell interface for x64 Hypervisor","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-14","end":"2015-08-14","timeoriginalestimate":144000,"timespent":172800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-03-18","issuetype":"Task","worklogs":[{"id":"114793","started":"2016-04-04","time":"03:14:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Integrated shell component from MEHV for ARM\r\nCompiled it as separate component.\r\nRemoved build errors and build-warnings\r\nCurrently some important instructions which are using Serial driver APIs, are \r\ncommented out","author":"ssohail"},{"id":"116455","started":"2016-04-17","time":"18:00:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Arslan, Muhammad [X]","comment":"* Integrated the shell with serial driver. \r\n* Made it run in the pooling mode.\r\n* Added the placeholders for the new shell APIs. ","author":"marslan"},{"id":"116703","started":"2016-04-21","time":"04:00:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"This commit adds the new switching strategy among the hypervisor shell and virtio consoles of different guests. vmlist command is also added in this commit.","author":"marslan"},{"id":"116722","started":"2016-04-22","time":"04:08:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Added VMreboot and VMshutdown commands in HV shell.\r\nTested it on MRB and Minnowmax","author":"ssohail"},{"id":"117038","started":"2016-04-26","time":"03:15:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Verified HV-Shell on MRB and moved hv-shell code from serivces\/ to hv\/services. Updated configurations accordingly ","author":"ssohail"}]},"MEH-2086":{"key":"MEH-2086","status":"Resolved","summary":"Create a serial driver for x64 Hypervisor","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-17","end":"2015-08-17","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-03-18","issuetype":"Story","worklogs":[]},"MEH-2085":{"key":"MEH-2085","status":"Resolved","summary":"Create VirtIO console back-end for MEHV","customfield_11642":"2015-08-11","start":"2015-08-11","customfield_11643":"2015-08-18","end":"2015-08-18","timeoriginalestimate":144000,"timespent":288000,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-03-18","issuetype":"Task","worklogs":[{"id":"114790","started":"2016-04-04","time":"03:06:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Implemented VirtIO_Console back-end.\r\nCompiled it as an isolated complonent\r\nRemoved Warnings and Errors.\r\nCurrently some important parts is commented out because of there \r\ndependency on shell and serial components","author":"ssohail"},{"id":"114791","started":"2016-04-04","time":"03:08:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Temporarily enhanced VirtIO_mmio component for enabling virtIO_console \r\nback-end implementation.\r\nTried to print VM1 log-msgs through VirtIO_console and debugged\/removed \r\nall problems that were appearing","author":"ssohail"},{"id":"116714","started":"2016-04-22","time":"03:48:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Updated back-end code according to new-virtIO implementation.\r\nVirtIO-Console didn't work with new implementation.\r\nDebugged for two days, removed some problems but things didn't appeared \r\nto work in order","author":"ssohail"},{"id":"116715","started":"2016-04-22","time":"03:50:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Updated VirtIO-console according to old virtio-implementation. \r\nDebugged the problems appearing and successfully achieved guest1 \r\nworking with virtio-console doing tx and rx operations\r\n\r\nExtended this support to two guests and achieved a working solution for \r\nvirtio-console on Minnowmax with old virtio-implementation","author":"ssohail"},{"id":"116717","started":"2016-04-22","time":"03:53:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Took virtio-console working solution as reference and started debugging the problems with virtio-console implementation.\r\nStarted fixing different errors in new-implementation and finally got the solution working with new virtio-implementation","author":"ssohail"},{"id":"116718","started":"2016-04-22","time":"03:54:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Took Shell component working with old virtio-implementation and made it \r\nwork with virtio-console on new virtio-implementation\r\nThe whole structure works fine on Minnowmax. Rebased with latest state of code and validated VirtIO-console and Shell again.\r\nVirtIO-console and HV-shell are working on Minnowmax with new virtio-implementation","author":"ssohail"}]},"MEH-2066":{"key":"MEH-2066","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_DOMCTL_IOMEM_PERMISSION","customfield_11642":"2015-11-30","start":"2015-11-30","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118729","started":"2016-05-16","time":"18:32:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2065":{"key":"MEH-2065","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_DOMCTL_MEMORY_MAPPING","customfield_11642":"2015-11-20","start":"2015-11-20","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":115200,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118197","started":"2016-05-09","time":"20:23:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Implemented hypercalls:\r\nMEHV_GVT_HC_DOMCTL_MEMORY_MAPPING and\r\nMEHV_GVT_HC_DOMCTL_IOMEM_PERMISSION\r\n\r\nMEHV_GVT_HC_DOMCTL_MEMORY_MAPPING needs an OS_MMU_Unmap_Mem() function implmented to support it.\r\n\r\nMEHV_GVT_HC_DOMCTL_IOMEM_PERMISSION needs an OS_MMU_EPT_Attr_Set() function implemented to support it.","author":"cgriffin"},{"id":"118730","started":"2016-05-16","time":"18:33:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2064":{"key":"MEH-2064","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_DOMCTL_DOMAIN_INFO_GET","customfield_11642":"2015-11-18","start":"2015-11-18","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":28800,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118012","started":"2016-05-06","time":"14:29:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2063":{"key":"MEH-2063","status":"In Progress","summary":"MEHV GVT Implement hypercall command MEHV_DOMCTL_DOMAIN_PAUSE","customfield_11642":"2015-11-17","start":"2015-11-17","customfield_11643":"2015-11-18","end":"2015-11-18","timeoriginalestimate":14400,"timespent":12600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118011","started":"2016-05-06","time":"14:28:00.000-0500","timespent":0.4375,"timespent_seconds":12600,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2062":{"key":"MEH-2062","status":"In Progress","summary":"MEHV GVT Implement hypercall command MEHV_SCHEDOP_REMOTE_SHUTDOWN","customfield_11642":"2015-11-16","start":"2015-11-16","customfield_11643":"2015-11-17","end":"2015-11-17","timeoriginalestimate":28800,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118024","started":"2016-05-06","time":"14:52:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Remote shutdown done.\r\nNeed to investigate if self shutdown is required and if so implement it.","author":"cgriffin"}]},"MEH-2061":{"key":"MEH-2061","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_MEM_GET_MFN_FROM_PFN","customfield_11642":"2015-11-09","start":"2015-11-09","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118728","started":"2016-05-16","time":"18:31:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2060":{"key":"MEH-2060","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_MEM_MAXIMUM_GPFN","customfield_11642":"2015-11-05","start":"2015-11-05","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":50400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118727","started":"2016-05-16","time":"18:29:00.000-0500","timespent":1.75,"timespent_seconds":50400,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2059":{"key":"MEH-2059","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_MEM_TYPE_SET","customfield_11642":"2015-11-02","start":"2015-11-02","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118731","started":"2016-05-16","time":"18:33:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2058":{"key":"MEH-2058","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_INJECT_MSI","customfield_11642":"2015-10-29","start":"2015-10-29","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":28800,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118017","started":"2016-05-06","time":"14:39:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2057":{"key":"MEH-2057","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_IOREQ_SERVER_STATE_SET","customfield_11642":"2015-10-26","start":"2015-10-26","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118023","started":"2016-05-06","time":"14:51:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.\r\nWe are going to have to make sure that inflight requests are not lost.","author":"cgriffin"}]},"MEH-2056":{"key":"MEH-2056","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_IOREQ_SERVER_DESTROY","customfield_11642":"2015-10-20","start":"2015-10-20","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":72000,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118022","started":"2016-05-06","time":"14:49:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2055":{"key":"MEH-2055","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_IOREQ_SERVER_IO_RANGE_UNMAP","customfield_11642":"2015-10-14","start":"2015-10-14","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118021","started":"2016-05-06","time":"14:45:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Griffin, Clyde","comment":"Need to determine if the unmapping happens in this function or when the mem type is cleared.  Right now we are only registering and deregistering memory with MAP and UNMAP calls.","author":"cgriffin"}]},"MEH-2054":{"key":"MEH-2054","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_IOREQ_SERVER_IO_RANGE_MAP","customfield_11642":"2015-10-05","start":"2015-10-05","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118020","started":"2016-05-06","time":"14:43:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Griffin, Clyde","comment":"Need to determine if the mapping happens in this function or when the mem type is set.","author":"cgriffin"}]},"MEH-2053":{"key":"MEH-2053","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_IOREQ_SERVER_INFO_GET","customfield_11642":"2015-10-01","start":"2015-10-01","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118019","started":"2016-05-06","time":"14:42:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2052":{"key":"MEH-2052","status":"Resolved","summary":"MEHV GVT Implement hypercall command MEHV_HVMOP_IOREQ_SERVER_CREATE","customfield_11642":"2015-09-24","start":"2015-09-24","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":144000,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"118018","started":"2016-05-06","time":"14:41:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2051":{"key":"MEH-2051","status":"Resolved","summary":"MEHV GVT Generate mehv_gvt.ko source files patch","customfield_11642":"2016-02-05","start":"2016-02-05","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":28800,"timespent":1800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117977","started":"2016-05-06","time":"09:40:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2050":{"key":"MEH-2050","status":"Resolved","summary":"MEHV GVT Generate mehv_gvt.ko Makefile","customfield_11642":"2016-02-05","start":"2016-02-05","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":7200,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"113301","started":"2016-03-16","time":"15:13:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"Basic Makefile is working to build mehv_gvt.ko\r\n\r\nWill need additional refinement as the code progress.","author":"cgriffin"},{"id":"117976","started":"2016-05-06","time":"09:38:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"Implemented.  \r\nWill need some adjustment when mehv_gvt_stubs is removed.\r\n","author":"cgriffin"}]},"MEH-2049":{"key":"MEH-2049","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .write_va","customfield_11642":"2016-02-04","start":"2016-02-04","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":14400,"timespent":12630,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"113296","started":"2016-03-16","time":"14:04:00.000-0500","timespent":0,"timespent_seconds":30,"displayname":"Griffin, Clyde","comment":"API is done.\r\nNeeds testing on real hardware.","author":"cgriffin"},{"id":"117975","started":"2016-05-06","time":"09:37:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"},{"id":"118725","started":"2016-05-16","time":"18:24:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2048":{"key":"MEH-2048","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .read_va","customfield_11642":"2016-02-03","start":"2016-02-03","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":14400,"timespent":12600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"113295","started":"2016-03-16","time":"14:02:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"API is done.\r\nNeeds testing on real hardware.","author":"cgriffin"},{"id":"117973","started":"2016-05-06","time":"09:35:00.000-0500","timespent":0.3125,"timespent_seconds":9000,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"},{"id":"118724","started":"2016-05-16","time":"18:23:00.000-0500","timespent":0.0625,"timespent_seconds":1800,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2047":{"key":"MEH-2047","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .gpa_to_va","customfield_11642":"2016-01-28","start":"2016-01-28","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[]},"MEH-2046":{"key":"MEH-2046","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .hvm_exit","customfield_11642":"2016-01-28","start":"2016-01-28","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117972","started":"2016-05-06","time":"09:32:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2045":{"key":"MEH-2045","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .hvm_init","customfield_11642":"2016-01-27","start":"2016-01-27","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117970","started":"2016-05-06","time":"09:31:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2044":{"key":"MEH-2044","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .inject_msi","customfield_11642":"2016-01-26","start":"2016-01-26","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":28800,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"113299","started":"2016-03-16","time":"15:02:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Griffin, Clyde","comment":"\/* MEHV_GVT STATUS:\r\n *      Done for now.\r\n *      Will formalize this API later.\r\n *\r\n * MEHV GVT NOTES:\r\n *      XENGT implementation of this APIs is lacking.  It has implied knowledge\r\n *      about what type of interrupt controller is being used in the hypervisor,\r\n *      Local APIC in this case.  API should be more interrupt controller agnostic.\r\n *      \r\n *\/","author":"cgriffin"},{"id":"117968","started":"2016-05-06","time":"09:29:00.000-0500","timespent":0.625,"timespent_seconds":18000,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2043":{"key":"MEH-2043","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .from_mfn_to_virt","customfield_11642":"2016-01-20","start":"2016-01-20","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[]},"MEH-2042":{"key":"MEH-2042","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .from_virt_to_mfn","customfield_11642":"2016-01-14","start":"2016-01-14","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[]},"MEH-2041":{"key":"MEH-2041","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .check_host","customfield_11642":"2016-01-13","start":"2016-01-13","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":28800,"timespent":21600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117967","started":"2016-05-06","time":"09:28:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2040":{"key":"MEH-2040","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .unset_wp_pages","customfield_11642":"2016-01-08","start":"2016-01-08","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117966","started":"2016-05-06","time":"09:27:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2039":{"key":"MEH-2039","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .set_wp_pages","customfield_11642":"2016-01-05","start":"2016-01-05","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117965","started":"2016-05-06","time":"09:22:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2038":{"key":"MEH-2038","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .set_trap_area","customfield_11642":"2015-12-25","start":"2015-12-25","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":115200,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117964","started":"2016-05-06","time":"09:20:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2037":{"key":"MEH-2037","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .map_mfn_to_gpfn","customfield_11642":"2015-12-16","start":"2015-12-16","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117963","started":"2016-05-06","time":"09:19:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2036":{"key":"MEH-2036","status":"In Progress","summary":"MEHV GVT Implement struct kernel_dm .shutdown_domain","customfield_11642":"2015-12-11","start":"2015-12-11","customfield_11643":"2015-12-16","end":"2015-12-16","timeoriginalestimate":86400,"timespent":36000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"113303","started":"2016-03-16","time":"16:19:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Griffin, Clyde","comment":"\/* MEHV_GVT STATUS:\r\n *      Mostly Done\r\n *      Testing required\r\n *\r\n * MEHV GVT NOTES:\r\n *      Until I fully undestand what notifications the IO Request Server needs I\r\n *      am coding this as two separate hypercalls. MEHV_GVT_SCHEDOP_REMOTE_SHUTDOWN\r\n *      as a notifier and using MEHV_VM_State_Set() for the actual shutdown.\r\n *\/","author":"cgriffin"},{"id":"117962","started":"2016-05-06","time":"09:14:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2035":{"key":"MEH-2035","status":"In Progress","summary":"MEHV GVT Implement struct kernel_dm .pause_domain","customfield_11642":"2015-12-07","start":"2015-12-07","customfield_11643":"2015-12-08","end":"2015-12-08","timeoriginalestimate":28800,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"113291","started":"2016-03-16","time":"12:52:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Griffin, Clyde","comment":"API is done.\r\nStill needs test on live board.","author":"cgriffin"},{"id":"117961","started":"2016-05-06","time":"09:12:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2034":{"key":"MEH-2034","status":"Resolved","summary":"MEHV GVT Implement struct kernel_dm .g2m_pfn","customfield_11642":"2015-12-02","start":"2015-12-02","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":86400,"timespent":72000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117960","started":"2016-05-06","time":"09:11:00.000-0500","timespent":2.5,"timespent_seconds":72000,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2033":{"key":"MEH-2033","status":"Resolved","summary":"MEHV GVT Implement kernel side support for GVT memory operations.","customfield_11642":"2015-11-19","start":"2015-11-19","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":115200,"timespent":36000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117979","started":"2016-05-06","time":"09:43:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Griffin, Clyde","comment":"In progress.","author":"cgriffin"},{"id":"118726","started":"2016-05-16","time":"18:25:00.000-0500","timespent":0.875,"timespent_seconds":25200,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-2032":{"key":"MEH-2032","status":"Resolved","summary":"MEHV GVT Implement support for inter vm GVT notifications","customfield_11642":"2015-11-27","start":"2015-11-27","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":144000,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"117980","started":"2016-05-06","time":"09:47:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Griffin, Clyde","comment":"Implemented.\r\nNeeds testing.","author":"cgriffin"}]},"MEH-2031":{"key":"MEH-2031","status":"Resolved","summary":"MEHV GVT Generate i915 GVT Driver Patch for MEHV","customfield_11642":"2015-11-23","start":"2015-11-23","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":43200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[]},"MEH-2030":{"key":"MEH-2030","status":"Resolved","summary":"MEHV GVT Kconfig extensions","customfield_11642":"2015-11-19","start":"2015-11-19","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Sub-task","worklogs":[{"id":"113300","started":"2016-03-16","time":"15:04:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Griffin, Clyde","comment":"Have basic Kconfig functionality in place.  CONFIG_MEHV_GVT is dependent on CONFIG_MEHV.  I defined CONFIG_MEHV in my tree but I am not sure it exists in the baseline.  I will need to investigate.  Works the same way Xen and KVM did from a make menuconfig perspective.","author":"cgriffin"}]},"MEH-2029":{"key":"MEH-2029","status":"Resolved","summary":"Create the MEHV GT Linux guest kernel module","customfield_11642":"2015-11-19","start":"2015-11-19","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2016-03-14","issuetype":"Task","worklogs":[]},"MEH-2026":{"key":"MEH-2026","status":"Resolved","summary":"Use VM premption timer for polling reboot requests from master guest","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-11","end":"2015-08-11","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-03-10","issuetype":"Task","worklogs":[{"id":"113134","started":"2016-03-15","time":"07:34:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Researched through documentation architecture manuals about Preemption Timer enablement and use.\r\nFollowing steps required have been implemented:\r\n* Set Preemption_timer_Activate flag\r\n* Set Preemtion_timer_vmx_save flag\r\n* Added metadata option for Preemtion Timer's time-period and\r\n  implemented code to initialize timer accordingly\r\n* Implemented Preemption_Timer handler to reset timer value after\r\n  checking VM's state\r\n\r\nDebugged the problems. cleaned up the code, tested with fresh workspace and committed the changes","author":"ssohail"},{"id":"114794","started":"2016-04-04","time":"03:17:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Preemtion timer is enabled and working. Updated the handler according to Review. No more work required under this issue","author":"ssohail"}]},"MEH-2018":{"key":"MEH-2018","status":"Resolved","summary":"Use consistent API naming convention for all internal interfaces","customfield_11642":"2016-03-08","start":"2016-03-08","customfield_11643":"2016-03-08","end":"2016-03-08","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-03-08","issuetype":"Bug","worklogs":[]},"MEH-2007":{"key":"MEH-2007","status":"Open","summary":"We need a dynamic memory manager (support for free()) within our x64 hypervisor codebase","customfield_11642":"2016-03-01","start":"2016-03-01","customfield_11643":"2016-03-01","end":"2016-03-01","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-03-01","issuetype":"Task","worklogs":[]},"MEH-1996":{"key":"MEH-1996","status":"Resolved","summary":"inter-VM reboot infrastructure","customfield_11642":"2016-02-29","start":"2016-02-29","customfield_11643":"2016-03-01","end":"2016-03-01","timeoriginalestimate":172800,"timespent":144000,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-02-29","issuetype":"ESD Requirement","worklogs":[{"id":"112891","started":"2016-03-11","time":"09:22:00.000-0600","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Implemented Syscall for doing privileged level operations from VM.\r\nCreated vm_reboot and vm_shutdown user-level applications which take vm_id as argument and do syscall for rebooting and shutting-down corresponding VM accordingly. In result, a hypercall is triggered which handles these privileged operations","author":"ssohail"},{"id":"112892","started":"2016-03-11","time":"09:26:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Implemented Privileged operations handling APIs in Hypervisor. Cleaned-up \r\nthe whole implementation.\r\nTried to trigger NMI for forcing other VM to exit but due to some restrictions, \r\nit couldn't be achieved. Discussed the problems with Dan and Arvind and \r\nremoved the part of making forceful VM_exit","author":"ssohail"}]},"MEH-1994":{"key":"MEH-1994","status":"In Progress","summary":"Implement infrastructure for guest health monitoring","customfield_11642":"2016-02-26","start":"2016-02-26","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-02-26","issuetype":"ESD Requirement","worklogs":[]},"MEH-1993":{"key":"MEH-1993","status":"Resolved","summary":"Extend Hypercall handling infrastructure to enforce Hypercalls supported w.r.t Privilege level","customfield_11642":"2016-02-26","start":"2016-02-26","customfield_11643":"","end":"","timeoriginalestimate":57600,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-02-26","issuetype":"ESD Requirement","worklogs":[{"id":"112197","started":"2016-03-03","time":"05:04:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Added Privilege level property in vm_description as well as in vm_attributes.\r\nTested by building a fresh workspace","author":"ssohail"},{"id":"112889","started":"2016-03-11","time":"09:19:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Implemented Privileged level and restricted access to high privilege level operations to only Mater VM","author":"ssohail"}]},"MEH-1962":{"key":"MEH-1962","status":"Resolved","summary":"Implement Virtio-NET back-end network switch that enables interguest communications","customfield_11642":"2016-02-25","start":"2016-02-25","customfield_11643":"2016-03-07","end":"2016-03-07","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-02-15","issuetype":"Bug","worklogs":[]},"MEH-1956":{"key":"MEH-1956","status":"Resolved","summary":"Design interrupt virtualization architecture","customfield_11642":"2016-02-05","start":"2016-02-05","customfield_11643":"2016-02-05","end":"2016-02-05","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-02-05","issuetype":"Task","worklogs":[]},"MEH-1952":{"key":"MEH-1952","status":"Resolved","summary":"Implement VM exit handling for RDTSC and RDTSCP instructions","customfield_11642":"2016-02-02","start":"2016-02-02","customfield_11643":"2016-02-02","end":"2016-02-02","timeoriginalestimate":null,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2016-02-02","issuetype":"ESD Requirement","worklogs":[{"id":"109847","started":"2016-02-02","time":"02:00:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"Added the handlers to do TSC timer virtualization.","author":"marslan"},{"id":"110474","started":"2016-02-11","time":"02:00:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Arslan, Muhammad [X]","comment":"Summary: This commit adds the per-CPU value for TSC_AUX stored in a VCPU structure. This value is modified whenever guest tries to change the TSC_AUX_MSR. This commit also changes the MSR handlers structure to a less rigid structure to handle multiple MSR cases. I did not see any attempt by guest(s) to read\/ write any TSC_* MSRs.\r\n","author":"marslan"}]},"MEH-1947":{"key":"MEH-1947","status":"Resolved","summary":"HPET configs are not properly disabled","customfield_11642":"2016-01-27","start":"2016-01-27","customfield_11643":"2016-01-27","end":"2016-01-27","timeoriginalestimate":57600,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2016-01-27","issuetype":"Bug","worklogs":[{"id":"111449","started":"2016-02-24","time":"04:30:00.000-0600","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Investigated the issue and found that kconfig of kernel isn't rightly set to show HPET prompt in case of x64 architecture. Patched kconfig, turned-off HPET timer configuration through menuconfig part of bitbake.\r\nUpdated our default defconfig accordingly, created patches and tested the whole thing with a fresh workspace. HPET configurations are now correctly turned off in both VMs","author":"ssohail"}]},"MEH-1942":{"key":"MEH-1942","status":"Resolved","summary":"Implement IOAPIC virtualization infrastructure","customfield_11642":"2016-01-20","start":"2016-01-20","customfield_11643":"2016-01-20","end":"2016-01-20","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-01-20","issuetype":"Task","worklogs":[]},"MEH-1935":{"key":"MEH-1935","status":"Resolved","summary":"Implement LAPIC virtualization infrastructure","customfield_11642":"2016-01-14","start":"2016-01-14","customfield_11643":"2016-01-14","end":"2016-01-14","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-01-14","issuetype":"Task","worklogs":[]},"MEH-1933":{"key":"MEH-1933","status":"Resolved","summary":"Create MMIO emulation infrastructure","customfield_11642":"2016-01-14","start":"2016-01-14","customfield_11643":"2016-01-14","end":"2016-01-14","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2016-01-14","issuetype":"Task","worklogs":[]},"MEH-1928":{"key":"MEH-1928","status":"Open","summary":"Boot unicore ABL based Linux booting as guest","customfield_11642":"2016-01-14","start":"2016-01-14","customfield_11643":"2016-01-20","end":"2016-01-20","timeoriginalestimate":144000,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-01-08","issuetype":"Task","worklogs":[{"id":"108695","started":"2016-01-15","time":"07:52:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"","author":"javedm"},{"id":"108696","started":"2016-01-18","time":"07:53:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-1927":{"key":"MEH-1927","status":"Resolved","summary":"Boot unicore UEFI based Linux booting as guest","customfield_11642":"2016-01-08","start":"2016-01-08","customfield_11643":"2016-01-13","end":"2016-01-13","timeoriginalestimate":115200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-01-08","issuetype":"Task","worklogs":[]},"MEH-1915":{"key":"MEH-1915","status":"Resolved","summary":"Add support for FUSE to build Intel HV","customfield_11642":"2015-12-16","start":"2015-12-16","customfield_11643":"2015-12-22","end":"2015-12-22","timeoriginalestimate":144000,"timespent":144000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-12-16","issuetype":"Task","worklogs":[{"id":"108369","started":"2016-01-07","time":"00:30:00.000-0600","timespent":5,"timespent_seconds":144000,"displayname":"Arslan, Muhammad [X]","comment":"Added the FUSE build system. ","author":"marslan"}]},"MEH-1914":{"key":"MEH-1914","status":"Open","summary":"Switching virtual console on VM0 results in a kernel crash.","customfield_11642":"2015-12-15","start":"2015-12-15","customfield_11643":"2015-12-15","end":"2015-12-15","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-15","issuetype":"Bug","worklogs":[]},"MEH-1912":{"key":"MEH-1912","status":"In Progress","summary":"Implement back-end shared graphics support in Intel HV","customfield_11642":"2015-09-24","start":"2015-09-24","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1911":{"key":"MEH-1911","status":"Resolved","summary":"Two VMs - one unicore (cluster) VM and one 3 core (IVI) VM on MRB","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-09-03","end":"2015-09-03","timeoriginalestimate":576000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1910":{"key":"MEH-1910","status":"Resolved","summary":"Build \/ boot ConnectedOS natively on MRB using ABL","customfield_11642":"2015-08-20","start":"2015-08-20","customfield_11643":"2015-08-27","end":"2015-08-27","timeoriginalestimate":144000,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"118138","started":"2016-05-03","time":"07:22:00.000-0500","timespent":0.625,"timespent_seconds":18000,"displayname":"Javed, Madeeha","comment":"Setup environment and started repo sync on 2 machines.\r\n\r\nTried to boot pre-built images provided by ABU but was unsuccessful because boot arguments for rootfs stitched into iasImage.\r\n\r\nCommunicated to Arvind that I am unable to download sources.","author":"javedm"},{"id":"118139","started":"2016-05-04","time":"07:27:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Realized that I can see boot arguments in kernel boot and so placed images over partitions in eMMC and was able to successfully boot connected OS.","author":"javedm"},{"id":"118141","started":"2016-05-06","time":"07:28:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"After some exchange of messages with folks in ABU, was able to download connected OS sources without any issue.\r\nStarted build.\r\nBooted images obtained from the build.","author":"javedm"},{"id":"118142","started":"2016-05-09","time":"07:30:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Documented build and boot instructions.","author":"javedm"}]},"MEH-1909":{"key":"MEH-1909","status":"Resolved","summary":"Get initial integration with ABL implemented \/ documented to support MRB","customfield_11642":"2015-12-29","start":"2015-12-29","customfield_11643":"2016-01-04","end":"2016-01-04","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1908":{"key":"MEH-1908","status":"Resolved","summary":"Get 2 unicore VMs with Intel provided Linux running on MRB","customfield_11642":"2015-12-04","start":"2015-12-04","customfield_11643":"2015-12-24","end":"2015-12-24","timeoriginalestimate":432000,"timespent":302400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"109613","started":"2016-02-01","time":"07:33:00.000-0600","timespent":5,"timespent_seconds":144000,"displayname":"Javed, Madeeha","comment":"Updated kernel configuration of Linux guest 0 to build an in-built DRM kernel driver. This allows to enable graphical console on boot up.\r\nUpdated kernel configuration of Linux guest 1 to boot via InitRAMfs.\r\nUpdated boot arguments to boot VM0 with serial console and VM1 with graphical console.\r\nEncountered \"MP-BIOS bug: 8254 timer not connected to IO-APIC\" on VM1. Disable timer check via boot arguments. Disabled hpet in both VMs.\r\nLinux  guest 1 requires UART PCI device to access console. Does not detect UART device otherwise contrary to Minnow Max where device is detected via I\/O port. Hence PCI device partitioning updated to assign UART PCI device to VM0 and removed from VM1.\r\nWith the above changes in place, Linux guest 0 boots to prompt over LCD display while Linux guest 1 boots quite further however hangs just before the prompt over serial console.\r\nContinued to debug Linux guest 1 hang. Updating Linux guest 1 configurations to disable accessing devices other than UART.","author":"javedm"},{"id":"112299","started":"2016-02-08","time":"05:24:00.000-0600","timespent":5,"timespent_seconds":144000,"displayname":"Javed, Madeeha","comment":"Discussed UART issue with Arvind\/Dan where Dan suggested to create per VM MP tables.\r\nConsulted MP spec and decoded master MP table of MRB. Created a C program to out put PCI interrupt information and IO APIC pin information.\r\nGenerated per VM MP tables based on the above information.\r\nVerified MP table generation on MRB. Linux guest 1 UART device was enabled now but not receiving keyboard input over serial console. Debugged the issues.\r\nChanging the order of adding IRQ routing entries in MP table generation (first PCI entries and then ISA entries) fixed the above issue.\r\nModified generic MP table implementation to pick various fields like IOAPIC id and interrupt trigger and polarity information from tables - data driven approach.\r\nCreated review for the MP table implementation changes. ","author":"javedm"},{"id":"112300","started":"2016-03-03","time":"05:26:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Created meta-hyp layers for Linux guests.\r\nDocumented steps to build Linux guests over hypervisor on MRB.","author":"javedm"}]},"MEH-1907":{"key":"MEH-1907","status":"Resolved","summary":"Get 2-3 core VM with Intel provided Linux SMP guest running on MRB","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-20","end":"2015-08-20","timeoriginalestimate":288000,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"118696","started":"2016-05-16","time":"12:07:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Tried to build Connected OS in unicore configuration.\r\nGot compilation errors due to CONFIG_DRM_I915 selecting CONFIG_STOP_SELECT.\r\nGot over the issue by temporarily disabling this dependency.\r\nWas able to boot unicore kernel successfully but with this boot, init services failed to enable display.\r\nAlso faced another issue, kernel tries to rebuild and fails when building core-imag-automotive","author":"javedm"},{"id":"118794","started":"2016-05-17","time":"06:38:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Was able to successfully boot with maxcpus=1.\r\nWas also able to boot this kernel as guest 0 on hypervisor. All PCI devices are assigned to guest 0.\r\nAlso tried to boot 2 guest configuration where guest 0 is connected os while guest 1 is bme. Both guests boot but display does not come up in this configuration.","author":"javedm"}]},"MEH-1906":{"key":"MEH-1906","status":"Resolved","summary":"Get unicore Intel Linux distro booting in VM on MRB","customfield_11642":"2016-01-08","start":"2016-01-08","customfield_11643":"2016-01-13","end":"2016-01-13","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1905":{"key":"MEH-1905","status":"Resolved","summary":"Create design \/ study Xen support for back-end graphics sharing","customfield_11642":"2015-09-07","start":"2015-09-07","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":432000,"timespent":345600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"118037","started":"2016-05-06","time":"17:49:00.000-0500","timespent":12,"timespent_seconds":345600,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-1904":{"key":"MEH-1904","status":"Resolved","summary":"Timer virtualization research","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-14","end":"2015-08-14","timeoriginalestimate":144000,"timespent":144000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"109846","started":"2016-01-18","time":"05:09:00.000-0600","timespent":5,"timespent_seconds":144000,"displayname":"Arslan, Muhammad [X]","comment":"Provide the analysis based on the research. ","author":"marslan"}]},"MEH-1903":{"key":"MEH-1903","status":"Open","summary":"Add VTd support for DMA virtualization","customfield_11642":"2015-09-07","start":"2015-09-07","customfield_11643":"2015-10-15","end":"2015-10-15","timeoriginalestimate":0,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-12-14","issuetype":"Story","worklogs":[]},"MEH-1902":{"key":"MEH-1902","status":"Open","summary":"Add VTd support for interrupt virtualization","customfield_11642":"2015-09-07","start":"2015-09-07","customfield_11643":"2015-10-01","end":"2015-10-01","timeoriginalestimate":576000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-12-14","issuetype":"Story","worklogs":[]},"MEH-1901":{"key":"MEH-1901","status":"Open","summary":"Add VM front-end rpmsg support into Linux guests","customfield_11642":"2015-09-17","start":"2015-09-17","customfield_11643":"2015-10-01","end":"2015-10-01","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1900":{"key":"MEH-1900","status":"In Progress","summary":"Add back-end rpmsg support in HV","customfield_11642":"2015-09-07","start":"2015-09-07","customfield_11643":"2015-09-17","end":"2015-09-17","timeoriginalestimate":288000,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"113420","started":"2016-03-18","time":"02:10:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Started looking into RPMSG implementation and assessment of time-requirement for RPMSG integration with Intel-Hypervisor.\r\n\r\nHad discussions with Atif and Saad on the current situation of RPMSG improvements and confirmed that RPMSG back-end will not be affected by the design changes in RPMSG-frontend driver\r\n\r\n","author":"ssohail"},{"id":"113421","started":"2016-03-18","time":"02:12:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Integrated RPMSG back-end into hypervisor.\r\nRemoved Warnings and cleaned-up the implementation.\r\nNo build errors\/warnings. So, checking-in the code","author":"ssohail"}]},"MEH-1899":{"key":"MEH-1899","status":"Resolved","summary":"Validate debug support on MRB","customfield_11642":"2016-01-04","start":"2016-01-04","customfield_11643":"2016-01-06","end":"2016-01-06","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1898":{"key":"MEH-1898","status":"Resolved","summary":"Validate EFI booting support on MRB","customfield_11642":"2015-12-30","start":"2015-12-30","customfield_11643":"2016-01-01","end":"2016-01-01","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1897":{"key":"MEH-1897","status":"Resolved","summary":"Boot Intel Linux natively on MRB","customfield_11642":"2015-12-01","start":"2015-12-01","customfield_11643":"2015-12-03","end":"2015-12-03","timeoriginalestimate":230400,"timespent":223200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"107457","started":"2015-12-30","time":"05:25:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Rebuilt kernel and core-image-minimal with BIOS kernel configuration. \r\nCreated USB drive with ELK rootfs and booted the kernel via BIOS.\r\nImplemented script to checkout base Yocto layers for MRB Linux.","author":"javedm"},{"id":"107588","started":"2015-12-31","time":"06:36:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Continued working on the script to setup Intel custom layers for MRB.\r\nAnd setting up the kernel sources from the release package.\r\nContinued to document the steps.\r\n ","author":"javedm"},{"id":"107589","started":"2016-01-01","time":"06:39:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Tested the script on Ubuntu host and was able to successfully build the ELK artifacts.\r\nProgrammed the SPI flash with the debug adapter and was able to boot the ELK kernel successfully.\r\n","author":"javedm"},{"id":"107590","started":"2016-01-04","time":"06:41:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Booted the PLK successfully via eMMC on MRB.\r\nConverted the stitching and flashing tools from rpms to deb packages and installed them on Ubuntu.\r\nContinued to document steps.","author":"javedm"},{"id":"107739","started":"2016-01-05","time":"06:06:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"Continued to refine documentation. Added steps to boot ELK.","author":"javedm"},{"id":"107847","started":"2016-01-06","time":"01:58:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Configured a unicore kernel and booted PLK.\r\n","author":"javedm"},{"id":"107849","started":"2015-12-25","time":"02:01:00.000-0600","timespent":3,"timespent_seconds":86400,"displayname":"Javed, Madeeha","comment":"Installed Fedora virtual machine. Manual setup of build environment following the Intel's getting started guide. ","author":"javedm"}]},"MEH-1896":{"key":"MEH-1896","status":"Resolved","summary":"Add support for rebooting VM in Intel HV","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-09-04","end":"2015-09-04","timeoriginalestimate":576000,"timespent":777600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-12-14","issuetype":"Task","worklogs":[{"id":"109091","started":"2016-01-25","time":"09:26:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Started looking into core specific initialization in hyp.c file.\r\nhyp_main() is supposed to initialize core specific Virtual structures, launch VMs and then maintain their running state by properly handling VMexits and doing VMresumes.\r\nWhile going through the code, found that virtIO_init and a generic VMhandle registering were being called from hyp_main whereas hyp_main should only do CPU specific initialization. So, moved these generic initialization in init_boot API in cpu.c. This way these initialization wouldn't be done multiple times for each CPU\r\nTested linux-linux configuration after this change and committed the changes","author":"ssohail"},{"id":"109113","started":"2016-01-25","time":"10:08:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Build Linux as VM0 and studied its initialization pattern when REBOOT \r\ncommand is issued on Linux. Found that first it sends signal to all processes \r\nto kill themselves and when it is done, it starts shutting down the core. The \r\nprocedure of shutting down the core affects all core which means if we let VM \r\nto do this, it will crash the whole state of hypervisor.\r\nSo, we should make a hypercall right before VM calls for core shutdown.\r\nTested this idea by implementing a dummy reboot hypercall, the handler of \r\nwhich does nothing currently","author":"ssohail"},{"id":"109115","started":"2016-01-25","time":"10:13:00.000-0600","timespent":4,"timespent_seconds":115200,"displayname":"Sohail, Sharjeel","comment":"For implementing shutdown\/de-init for CPU and other structures, we need \r\ninterface for deallocating the allocated memory, which is currently not \r\npresent.\r\n\r\nSo, started testing the reboot restrictions by trying to re-initialize VCPU and \r\nVM structure (doing this testing without doing any deallocation\/shutdown of \r\nalready initialized structures)\r\n\r\nFound some problems in the way, made modifications and for simplifying \r\nthis test, halted the other VCPU at the start of initialization. So, in other \r\nwords, doing this test with one VM configuration. This didn't resulted in \r\npositive response and guest was not properly rebooted\r\n\r\nTo avoid possible problems, right before re-loading guest and othere \r\nrelated binaries like ramfs, bootargs, zeropage etc. , did memset on all the \r\n\r\nVM ram space except first 1MByte. This didn't help and guest didn't reboot.\r\n\r\nEnabled debug prints in the initialization pattern and compared the initial \r\nstate of all the structures and parameters including Guest and host state \r\nareas. Everything seems fine and mateched with the first time initialization \r\npatterns and states.\r\n\r\nKept doing debugging and finally found that it was the first 1MBytes of \r\nmemory which is not in initialization state. It probably contains BIOS info in \r\nfirst 4KBytes and the initial state of page-tables. While rebooting we must \r\nre-establish the same state of this first 1MBytes space comared to what we \r\nhad while booting the VM first time.\r\n\r\nDid a little experiment with this idea and this was it. If we store the initial \r\nstate of this 1MByte somewhere while booting VM first time and then \r\nre-use this initial state when rebooting the VM, then VM correctly reboots.\r\n\r\nNow, this must be properly handled while rebooting guest (currently used a \r\nhack for testing purposes)\r\n\r\nNext step is to extend this test for both VMs and see if one's reboot affects \r\nother in any way. Moreover proper shutdown APIs need to be implemented","author":"ssohail"},{"id":"109886","started":"2016-02-03","time":"10:33:00.000-0600","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Paravirtualized VM1-linux to do a hypercall when user commands it to reboot.\r\nEnabled VM1-linux to run on core1 because previous testing was done by running only one linux as VM0.\r\nAfter doing this and other corresponding changes, ran linux-linux configuration. Two facts came out:\r\n1: Linux Guest0 doesn't successfully reboots in two-linux configuration, if  second VM is not launched, VM0 reboots fine but elsewise both guest hang when VM0 tries to reboot.\r\n2: Linux Guest1 using core-image-minimal as rootfs which doesn't have proper reboot support\r\n\r\nTried some changes like stored initial pagetable state of first 1MB somewhere else and similar things but no success.","author":"ssohail"},{"id":"109892","started":"2016-02-03","time":"10:43:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Tried to debug the reason why Linux-VM0 doesn't successfully reboot in \r\nLinux-Linux configuration. Some additions of print messages showed that \r\nVM0 after reboot process started has done 33621 hyp-calls and after that \r\nguests hangs. That behavior is always the same.\r\n\r\nTried a simple test by launching VM1 without launching VM0. Unexpectedly \r\nVM1 boots but hangs if VM0 is not yet booted. This issue can probably be \r\nrelated to reboot issue. Discussed with Dan and opened an issue covering \r\nthis problem","author":"ssohail"},{"id":"109893","started":"2016-02-03","time":"10:53:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"After some emails exchange with Dan regarding shutdown\/reboot and dealloc \r\nAPI need. Started implementing Reinit APIs which use already allocated \r\nmemory for different parameters of VCPU and VM structures and re-initializes \r\nit to properly reboot the guest. Built a clean workspace and tested VM0 reboot \r\nin single linux configuration with this. After a few tries, it worked.\r\n\r\nIncrementally made some modifications, registered proper handler and \r\nstandardized the input argument for calling hyp_reboot to make \r\nresemblance with hyp_main(). Still doing improvements to distinguish \r\nbetween shutdown and reboot. Trying to generalize it for all VMs\/VCPUs \r\netc. ","author":"ssohail"},{"id":"109896","started":"2016-02-03","time":"11:05:00.000-0600","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Tried 2-linux configuration after my cleaned-up changes of using already \r\nallocated memory to reinitialize VCPU and VM. Found an improvement in \r\nthe behavior. When VM0 reboot, VM1 still hangs but now atleast VM0 \r\nreboots fine.\r\nVM1 hangs right where it hangs in the previous case.\r\n\r\nTrying to evaluate common memory and common devices if given to \r\nguests. LAPIC\/APIC area (0xF0000000-0xFFFFFFFF) is provided to both \r\nguests with read\/write access. While rebooting VM0 must have re-initialized \r\nsomething which VM1 is also using. Still figuring out the dependencies \r\nbetween guests related to common memory and devices.\r\n\r\nWith help of Madeeha, trying to enable reboot support in VM1-linux.","author":"ssohail"},{"id":"110335","started":"2016-02-10","time":"10:52:00.000-0600","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Did some research and found that Reboot command works with minimal \r\nInitramfs if executed forcefully. i.e. \"reboot -f\"\r\nRunning this command on Linux-VM1 in Linux-Linux configuration didn't \r\nsuccessfully reboot the guest but some problem appearing which includes \r\nvirtio error and guest0 hanging.\r\n\r\nDebugged a little, modified guest memory reset instructions and included \r\ncommands to reset VirtIO device while rebooting.\r\nAfter these changes Reboot works perfectly on Linux-VM1, both guests \r\nkeeps running and VirtIO_net stays healthy. ","author":"ssohail"},{"id":"110336","started":"2016-02-10","time":"10:58:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Linux0 doesn't reboot successfully in Linux-Linux configuration, there are two discrete\r\nbehaviors. First, Linux0 reboots but Linux1 hangs, second, both guests hang if Linux0 is\r\nrebooted. These behaviors are quite random where second one appear more frequently. And by\r\nhang, I mean, console hangs and no further vmcall received. Last 2-3 days, I have been tracking\r\nGuest0 initializations which may corrupt guest1. It appears that while doing io_apic\r\ninitializations, guest0 calls setup_IO_APIC_irqs() from setup_IO_APIC(), right at this initialization\r\npoint, guests stops responding. I used some hacks to stop some of the initialization with which\r\nit moved forward and Guest0 starts rebooting successfully every-time but guest1 still hangs at\r\nsome higher PCI related irq-initializations. As we know that currently io_apic is not virtualized so\r\nsuch behavior was expected.\r\nIt seems that Successful reboot of guest0 very much depends on this io_apic virtualization.","author":"ssohail"},{"id":"110337","started":"2016-02-10","time":"11:00:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Did some more testing on first 1MB memory.\r\nHere some facts:\r\n1- Both guest need the first 1MB to be set correctly before booting\r\n2- MPS tables generated at runtime and doesn't appear to affect\/change first 1MB region\r\n3- State of first 1MB must be stored or regenerated at run-time\r\n\r\nCurrently on Linux-Linux configuration:\r\n1- Linux-VM1 reboots fine.\r\n2- Linux-VM0 rebooting invoke problems related to io_apic which is used by both guests","author":"ssohail"},{"id":"111451","started":"2016-02-24","time":"04:41:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Created reboot patches and Integrated reboot support APIs with latest state \r\nof POC. Tested\r\nLinux-Linux configuration, same behavior achieved with latest code.","author":"ssohail"},{"id":"111452","started":"2016-02-24","time":"04:41:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Investigated secondary_cpu_boot section which goes to the lower 1MB ram. Used linker file\r\nsymbols to spot the location of this section in binary and used these symbols to copy this section\r\nat the start of each VM-ram at run-time. This fix works fine and it also confirms that this is the\r\nonly section needed in first 1MB ram.","author":"ssohail"},{"id":"111453","started":"2016-02-24","time":"04:45:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Did some effort to disable HPET timer (MEH-1947) which was not properly turned off in Linux-\r\nguests. Did some modifications in kconfig prompt condition and successfully disabled HPET\r\ntimer. But unfortunately, it had no affect on rebooting problem.","author":"ssohail"},{"id":"111455","started":"2016-02-24","time":"04:46:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Did some deep debugging and commented-out some code in setting-up IRQs and get\/set of\r\nsome timer state. It made things go a little forward. Now, when Linux0 does initialization of\r\nSerial_8250, Linux1 console hangs. Disabled Serial_8250 driver and related configurations from\r\nLinux0. With these changes when I try rebooting guest0, sometimes guest0 reboots fine along\r\nwith guest1 staying healthy and sometimes both guest hangs.","author":"ssohail"},{"id":"111457","started":"2016-02-24","time":"04:49:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Worked with Madeeha and removed some of the timer related IRQs from IRQ tables (0,2,4). Built a fresh workspace, removed all hacks from Linux-kernel. Built images and rebooting guests was successful everytime.\r\nBut unfortunately the behavior was not the same on other Minnowmax boards. One some boards it worked, on some it didn't. making some changes in code also affect this. So, the behavior is not consistent and not-stable.\r\nDebugging showed that when booting or rebooting doesn't work. Kernel was actually trying to set-up\/check timer and when it finds no working timer, it create panic.","author":"ssohail"},{"id":"111459","started":"2016-02-24","time":"04:57:00.000-0600","timespent":2.5,"timespent_seconds":72000,"displayname":"Sohail, Sharjeel","comment":"Discussed timer code and problems with Madeeha and finally we settled at \r\nthe idea that VM0 should get io_apic timer, hence we should not remove any \r\ntimer related irq from irq tables.\r\nBut if IRQ2 is enabled, the io_apic timer is found but the VM masks pic timer-bits which hangs VM1's console.\r\n\r\nMadeeha also reported that io-emulation code is not in working state, means changes in io-emulation table doesn't have any affect on access or deny of io-port access\r\nWe worked on it and tried to make it working. For that, we had to implement the idea that at first, we should give VM access to all io-ports and then one-by-one deny access of those io-ports whose entry lie in io-emulation table.\r\nTo implement this idea, I modified io-bitmap setup and handler registeration code and also modified io-emulation table entries.\r\nNow, depending on value of flags for that particular entry, handler of io-port is registered.\r\nAfter these changes I was able to successfully transfer the ownership of PIC-write operation to VM1 and all write requests for PIC io-port from VM0 are denied.\r\nAfter these fixes, we can successfully boot\/reboot  each VM without having any affect on other. We have done some stress testing of rebooting VMs after all fixes and everything keeps working fine.\r\n\r\nCommitted the changes after testing.","author":"ssohail"},{"id":"111461","started":"2016-02-24","time":"05:13:00.000-0600","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Did code clean-up of VM reboot implementation\r\n\r\nMerged EPT_Reinit API with EPT_Create API\r\nMerged VCPU_Reinit API with VCPU_Create API\r\nMerged VM_Reinit API with VM_Create API\r\n\r\nRemoved warnings\r\n\r\nTested after each change. Committed clean-up and push onto master repository\r\n","author":"ssohail"}]},"MEH-1894":{"key":"MEH-1894","status":"Resolved","summary":"Add 32-bit multi-libs to support AoL \/ CES demo requirements","customfield_11642":"2015-08-27","start":"2015-08-27","customfield_11643":"2015-08-27","end":"2015-08-27","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1893":{"key":"MEH-1893","status":"Resolved","summary":"Dynamically create MPS tables from boot-loader provided MPS tables","customfield_11642":"2015-09-07","start":"2015-09-07","customfield_11643":"2015-09-10","end":"2015-09-10","timeoriginalestimate":144000,"timespent":0,"labels":["I","intel_automotive_hyp"],"assignee":"javedm","created":"2015-12-14","issuetype":"Task","worklogs":[]},"MEH-1885":{"key":"MEH-1885","status":"Resolved","summary":"Remove all build warnings from Intel hypervisor POC","customfield_11642":"2015-12-07","start":"2015-12-07","customfield_11643":"2015-12-07","end":"2015-12-07","timeoriginalestimate":14400,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-12-07","issuetype":"Task","worklogs":[{"id":"106148","started":"2015-12-07","time":"11:15:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Removed all warning and tested with a fresh workspace for our major test-cases like iperf","author":"ssohail"}]},"MEH-1881":{"key":"MEH-1881","status":"Resolved","summary":"Get Nucleus VM working on both MinnowMax and MRB","customfield_11642":"2015-12-29","start":"2015-12-29","customfield_11643":"2015-12-29","end":"2015-12-29","timeoriginalestimate":28800,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-12-03","issuetype":"Task","worklogs":[]},"MEH-1879":{"key":"MEH-1879","status":"Resolved","summary":"Get 2 unicore VMs with bare-metal guests running on Intel MRB","customfield_11642":"2015-12-01","start":"2015-12-01","customfield_11643":"2015-12-28","end":"2015-12-28","timeoriginalestimate":576000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-12-01","issuetype":"Task","worklogs":[]},"MEH-1878":{"key":"MEH-1878","status":"Resolved","summary":"CTRL+C not working in Intel HV VM1 (busybox) min kernel terminal","customfield_11642":"2015-12-01","start":"2015-12-01","customfield_11643":"2015-12-01","end":"2015-12-01","timeoriginalestimate":0,"timespent":72000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-12-01","issuetype":"Bug","worklogs":[{"id":"106202","started":"2015-12-04","time":"02:00:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Arslan, Muhammad [X]","comment":"Enabled CONFIG_SETSID and CONFIG_CTTYHACK in the defconfig of busybox, because these commands were not available in the default configuration of the busybox.\r\nSince there was no device enumeration for the \"ttyS0\" in the \"\/dev\", hence we could not use the cttyhack tool. Debugged as to why ttyS0 was not visible in the guest1 rootfs, even though we have set the device in the kernel command line - console=ttyS0, 115200.\r\nIt appeared that devtmpfs - where all the device enumerations are created by the device drivers - was not being mounted. Mounted the devtmpfs and \/dev\/ttyS0 node appeared. This made the cttyhack tool to switch the shell from \/dev\/console to \/dev\/ttyS0.\r\n\r\nCltrl-C is now working in VM 1.\r\n","author":"marslan"},{"id":"106272","started":"2015-12-08","time":"10:00:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Arslan, Muhammad [X]","comment":"Added the change-set in the yocto layer of hypervisor. Built and tested the initramfs of VM1. ","author":"marslan"}]},"MEH-1869":{"key":"MEH-1869","status":"Closed","summary":"Linux guests do not boot when HDMI display is not connected.","customfield_11642":"2015-08-31","start":"2015-08-31","customfield_11643":"2015-09-03","end":"2015-09-03","timeoriginalestimate":115200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-11-26","issuetype":"Bug","worklogs":[]},"MEH-1868":{"key":"MEH-1868","status":"Resolved","summary":"Ensure stability and performance of VirtIO_net on Intel hypervisor","customfield_11642":"2015-08-11","start":"2015-08-11","customfield_11643":"2015-08-11","end":"2015-08-11","timeoriginalestimate":144000,"timespent":129600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-11-25","issuetype":"Bug","worklogs":[{"id":"105438","started":"2015-11-25","time":"12:20:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Prepared IPERF package and inserted it into rootfs of each guest.\r\nRunning IPERF test invoked page-faults","author":"ssohail"},{"id":"105439","started":"2015-11-25","time":"12:21:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"It turned-out that page-fault was happening because for VirtIO_ring address \r\ntranslation, we were relying on a global guest_id variable which isn't a very \r\ngood solution. Added some hacks to get pass this problem and the same \r\ntime reported and explained the problem to the team","author":"ssohail"},{"id":"105440","started":"2015-11-25","time":"12:24:00.000-0600","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"To provide some level of stability, included Spin-lock and added \r\ninitialization for spinlocks as well.\r\n\r\nEven this change didn't help in successfully running IPERF test.\r\n\r\nWhen I run IPERF test, in a few miliseconds, tsc timer gets disturbed and \r\nhence the communication disturbed. Although Virtio_net link remains up \r\nand we can ping between guests but a heavy test like IPERF doesn't \r\nsuccess and if succeeds, doesn't provide valuable results.\r\n\r\nReported this problem to other team and opened an issue regarding TSC \r\ntimer stability. Probably we will be using different timer for each guest and \r\nthen I will continue progress on this issue again.","author":"ssohail"},{"id":"106874","started":"2015-12-16","time":"12:09:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Did experiments with VirtIO_net performance. Set CPU_FREQ disable in kernel configuration. VirtIO_net is stable at the moment.\r\n\r\nIPERF results\r\n\r\nGuest0 to Guest1 : 173 Mbps\r\nGuest1 to Guest0 : 215 Mbps\r\n\r\nAverage Ping time : 0.150 msec","author":"ssohail"}]},"MEH-1867":{"key":"MEH-1867","status":"Resolved","summary":"TSC Timer not stable for Linux guests running on Intel Hypervisor","customfield_11642":"2015-08-27","start":"2015-08-27","customfield_11643":"2015-08-27","end":"2015-08-27","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-11-25","issuetype":"Bug","worklogs":[]},"MEH-1858":{"key":"MEH-1858","status":"Resolved","summary":"Building with optimization besides -O0 results in hypervisor crash","customfield_11642":"2015-08-11","start":"2015-08-11","customfield_11643":"2015-08-18","end":"2015-08-18","timeoriginalestimate":144000,"timespent":144000,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-11-16","issuetype":"Bug","worklogs":[{"id":"106875","started":"2015-12-16","time":"12:14:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Built a fresh workspace with -O0 as starting point and confirmed that \r\nbuild\/run is smooth.\r\nUpdated minnowmax.mk to compile sources with -O1 optimization.\r\nSome warnings appeared while building the code and \"General Protection Error\" occurred while runtime.\r\nUpdated the code to remove all the warnings. Warnings were all related to \r\npossibility of un-initialized variables in an API.\r\nRan the code after removing warnings but still \"General Protection Error \r\nappearing\". Commented-out the cpu-halt command in Exception handler \r\nand when ran the resulted binary, it appeared to have continuously \r\ngenerating \"General Protection Error\" at the same address.\r\n\r\nUsed addr2line to see the instruction where protection fault appearing, \r\nhere is the reference: hyp\/arch\/x64\/arch_vmx_svcs_asm.S (Line=71)\r\n","author":"ssohail"},{"id":"107853","started":"2016-01-08","time":"04:36:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Fetched Dan's changes and reproduced the progress on this issue at my \r\nside. Started looking into the problem of HLT VM-exit condition.\r\nHalted the second core intentionally to make debugging simple. Used some \r\nbasic debug prints to track the values of VM and VCPU structure. Compared \r\nthe results with O0 cmpl-optimization level. Things seems fine all the way \r\nbefore hlt instruction appeared.","author":"ssohail"},{"id":"107854","started":"2016-01-08","time":"04:40:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"It appeared that initializations were happening much faster when compiled with -O1 optimization. The idea hit me that it is possible that some important initialization is being skipped. So, I tracked the code which is being run faster with increased optimization. It appeared that nothing was being skipped in initialization but some time-taking instructions like Guest-loading and page-table creation (memcpy) are taking less time.","author":"ssohail"},{"id":"107855","started":"2016-01-08","time":"04:52:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Enabled Debug information prints to track the records as well as investigate \r\nthe initialization of VMCS structure. There were only dynamic base address \r\nchanged for some parameters\/structures but over-all initialization seems fine.\r\nHowever, including some extra debugging points in path of VM-exit shown \r\nthat there was an uncertain page-fault(0x00000002) from guest right before \r\nHLT exception appeared. Tracked the page-fault instruction in Linux guest. It \r\nwas coming from a basic API written to populate CPU information. If we \r\ncomment-out this instruction then the very next instruction starts giving \r\nsimilar page fault. It seems like something wrong happened right before this instruction executed.","author":"ssohail"},{"id":"107856","started":"2016-01-08","time":"04:57:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"The developed idea for the possible problem is that right before this unexpected page-fault, sync_core() was called which produced VM-exit. Probably during this VM-exit, the values of guest registers get disturbed and some structure pointer becomes NULL in result.\r\nSetup Probe to investigate more.","author":"ssohail"},{"id":"107857","started":"2016-01-08","time":"05:00:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Fetched Dan's latest changes and the problems with optimization level are removed now.\r\nLinux-Linux configuration is running fine with -O1 and -O2 optimization level. But with -Ofast, there are still some problems","author":"ssohail"},{"id":"108035","started":"2016-01-11","time":"06:23:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Tested again with head of the branch and everything working fine with all level of optimizations","author":"ssohail"},{"id":"108036","started":"2016-01-11","time":"06:24:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Removed build warnings at all optimization levels.\r\nNo more work required under this issue","author":"ssohail"}]},"MEH-1857":{"key":"MEH-1857","status":"Open","summary":"Clean up Hypervisor source code ","customfield_11642":"2015-12-14","start":"2015-12-14","customfield_11643":"2015-12-18","end":"2015-12-18","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-11-16","issuetype":"Task","worklogs":[]},"MEH-1828":{"key":"MEH-1828","status":"Resolved","summary":"issue in obtaining Linux kernel entry address from the FIT image","customfield_11642":"2015-08-11","start":"2015-08-11","customfield_11643":"2015-08-11","end":"2015-08-11","timeoriginalestimate":null,"timespent":18000,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-11-01","issuetype":"Bug","worklogs":[{"id":"103930","started":"2015-11-02","time":"06:09:00.000-0600","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Debugged and fixed the issue.\r\nNumeric FIT property data pointer must be type-cast on UINT and then \r\nvalue should be accessed","author":"ssohail"},{"id":"104008","started":"2015-11-03","time":"04:40:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"Fix is tested by more than one person.\r\nProblem resolved","author":"ssohail"}]},"MEH-1827":{"key":"MEH-1827","status":"Resolved","summary":"Enable Linux guests to use SDCARD based file system Vs initramfs","customfield_11642":"2015-08-26","start":"2015-08-26","customfield_11643":"2015-08-27","end":"2015-08-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-10-28","issuetype":"Task","worklogs":[]},"MEH-1825":{"key":"MEH-1825","status":"Resolved","summary":"Make temporary page tables for secondary core work with large embedded guests","customfield_11642":"2015-10-28","start":"2015-10-28","customfield_11643":"2015-10-28","end":"2015-10-28","timeoriginalestimate":7200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-10-28","issuetype":"New Feature","worklogs":[]},"MEH-1794":{"key":"MEH-1794","status":"Open","summary":"Hypervisor able to support two VMs running a Linux instance each","customfield_11642":"2015-10-06","start":"2015-10-06","customfield_11643":"2015-11-25","end":"2015-11-25","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"atraza","created":"2015-10-06","issuetype":"Epic","worklogs":[]},"MEH-1793":{"key":"MEH-1793","status":"Resolved","summary":"Validate HDMI\/Display support for Linux Yocto distro for Minnowmax (core-sato-image)","customfield_11642":"2015-08-26","start":"2015-08-26","customfield_11643":"2015-08-26","end":"2015-08-26","timeoriginalestimate":28800,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-10-06","issuetype":"Bug","worklogs":[]},"MEH-1792":{"key":"MEH-1792","status":"Resolved","summary":"MEH-1792 Implement PCI-PCI Bridge Swizzle for Device\/Function\/INT to Controller\/Line matchup. ","customfield_11642":"2017-06-16","start":"2017-06-16","customfield_11643":"2017-06-22","end":"2017-06-22","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1791":{"key":"MEH-1791","status":"Resolved","summary":"MEH-1791 Implement PCI bus driver so interrupt subsystem can do PCI-PCI Bridge Swizzle","customfield_11642":"2017-06-09","start":"2017-06-09","customfield_11643":"2017-06-15","end":"2017-06-15","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1790":{"key":"MEH-1790","status":"Resolved","summary":"MEH-1790 Finish coding standard comments for all APIs.","customfield_11642":"2017-02-14","start":"2017-02-14","customfield_11643":"2017-02-14","end":"2017-02-14","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1789":{"key":"MEH-1789","status":"Resolved","summary":"MEH-1789 Determine how Intel Automotive Hypervisor SMP interrupt subsystem is consumed by Nucleus.","customfield_11642":"2017-05-23","start":"2017-05-23","customfield_11643":"2017-06-05","end":"2017-06-05","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1788":{"key":"MEH-1788","status":"Resolved","summary":"MEH-1788 Implement Interrupt Support for Message Signalled Interrupts (MSI)","customfield_11642":"2017-05-12","start":"2017-05-12","customfield_11643":"2017-05-22","end":"2017-05-22","timeoriginalestimate":201600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1787":{"key":"MEH-1787","status":"Closed","summary":"MEH-1787 Implement Interrupt Support for the LACPI TSC Deadline","customfield_11642":"2017-06-02","start":"2017-06-02","customfield_11643":"2017-06-06","end":"2017-06-06","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1786":{"key":"MEH-1786","status":"Resolved","summary":"MEH-1786 Implement Interrupt Support for the TSC","customfield_11642":"2017-05-31","start":"2017-05-31","customfield_11643":"2017-06-01","end":"2017-06-01","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1785":{"key":"MEH-1785","status":"Resolved","summary":"MEH-1785 Implement Interrupt Support for HPET","customfield_11642":"2017-05-26","start":"2017-05-26","customfield_11643":"2017-05-30","end":"2017-05-30","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1784":{"key":"MEH-1784","status":"Resolved","summary":"Implement spinlock APIs that lock \/ unlock IRQs","customfield_11642":"2015-08-11","start":"2015-08-11","customfield_11643":"2015-08-14","end":"2015-08-14","timeoriginalestimate":86400,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-10-06","issuetype":"Task","worklogs":[{"id":"107772","started":"2016-01-06","time":"10:16:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Added spinlock APIs which save\/restore interrupts.","author":"ssohail"}]},"MEH-1783":{"key":"MEH-1783","status":"Resolved","summary":"MEH-1783 Fix Page Allocation API to properly return interrupt controller vaddr.  ","customfield_11642":"2017-05-19","start":"2017-05-19","customfield_11643":"2017-05-22","end":"2017-05-22","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1782":{"key":"MEH-1782","status":"Resolved","summary":"MEH-1782 Determine how guest MPS FP Struct will be found by guest at boot.","customfield_11642":"2017-05-16","start":"2017-05-16","customfield_11643":"2017-05-18","end":"2017-05-18","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1781":{"key":"MEH-1781","status":"Resolved","summary":"MEH-1781 Create MPS tables for guest consumption","customfield_11642":"2017-05-12","start":"2017-05-12","customfield_11643":"2017-05-15","end":"2017-05-15","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-10-06","issuetype":"Technical task","worklogs":[]},"MEH-1780":{"key":"MEH-1780","status":"Resolved","summary":"MEH-1780 Place ACPI Table in Location Consumed by Guest","customfield_11642":"2015-07-31","start":"2015-07-31","customfield_11643":"2015-08-03","end":"2015-08-03","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1779":{"key":"MEH-1779","status":"Resolved","summary":"MEH-1779 Create ACPI tables for guest.","customfield_11642":"2015-07-27","start":"2015-07-27","customfield_11643":"2015-07-30","end":"2015-07-30","timeoriginalestimate":115200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1778":{"key":"MEH-1778","status":"Resolved","summary":"MEH-1778 Research minimal set of ACPI tables needed by guest.","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-10-06","issuetype":"Sub-task","worklogs":[]},"MEH-1766":{"key":"MEH-1766","status":"Resolved","summary":"Get baremetal guest running with paging disabled.","customfield_11642":"2015-10-05","start":"2015-10-05","customfield_11643":"2015-10-05","end":"2015-10-05","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-10-05","issuetype":"Bug","worklogs":[]},"MEH-1763":{"key":"MEH-1763","status":"Resolved","summary":"Obtain platform definition for Linux for minnowmax kernel and population VM0 description based on native Linux platform data definition ..","customfield_11642":"2015-09-25","start":"2015-09-25","customfield_11643":"2015-09-25","end":"2015-09-25","timeoriginalestimate":28800,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-09-25","issuetype":"Sub-task","worklogs":[]},"MEH-1762":{"key":"MEH-1762","status":"Resolved","summary":"MEH-1762 Add support for Interrupt Mode Command Register (IMCR) and Spurious Vector Register (SVR)","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":28800,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-09-24","issuetype":"Sub-task","worklogs":[{"id":"101448","started":"2015-09-25","time":"00:13:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Did some minor PIC initialization cleanup.\r\n\r\nWe are no longer using MPS Default Configuration 5.  ACPI takes over if MPS is not available.\r\n\r\nOptimized some signature detection in MADT\r\n\r\nAdded support for Interrupt Mode Command Register (IMCR) to properly switch the system out of PIC mode when specs indicate such is in order.\r\n\r\nAdded support to preallocate the Local APIC Spurious Vector before programming the Spurious Vector Register (SVR).\r\n\r\nMisc comment fixes and updates.","author":"cgriffin"}]},"MEH-1761":{"key":"MEH-1761","status":"Closed","summary":"Finish chipset drivers for interrupt subsystem.","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-09-24","issuetype":"Task","worklogs":[]},"MEH-1760":{"key":"MEH-1760","status":"Resolved","summary":"Enable Linux virtio\/front-end drivers and validated virtio\/NET based virtual networking","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-10","end":"2015-08-10","timeoriginalestimate":null,"timespent":288000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-09-23","issuetype":"Sub-task","worklogs":[{"id":"105509","started":"2015-11-01","time":"09:35:00.000-0600","timespent":10,"timespent_seconds":288000,"displayname":"Arslan, Muhammad [X]","comment":"- Paravirtualized the virtIO net front-end driver.\r\n- Implemented the hypercall interface for guest to VMM communication.\r\n- Added the support for IPI handling in the Linux guest for virtIO notifications (VMM to guest communication interface).\r\n- Implemented the backend to send the notifications to guest(s).\r\n- Added the fixes in the virtIO-net backend to enable virt-net. \r\n- Enabled and tested NAT in guest0.   ","author":"marslan"}]},"MEH-1759":{"key":"MEH-1759","status":"Resolved","summary":"Updates to arch_vm_io_svcs","customfield_11642":"2015-09-22","start":"2015-09-22","customfield_11643":"2015-09-22","end":"2015-09-22","timeoriginalestimate":null,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-09-22","issuetype":"Sub-task","worklogs":[{"id":"101381","started":"2015-09-23","time":"03:39:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"- Removed VM_IO_HDLR_DESCS and included descriptor as member of the VM_IO_HDLR.\r\n- Updated Hyp_Arch_IO_Create_Handler to populated the descriptor.\r\n- Updated Hyp_Arch_IO_Instruction_Handler to refer to the descriptor from the IO handler directly.\r\n- Tested BME on Minnow Max.","author":"javedm"}]},"MEH-1758":{"key":"MEH-1758","status":"Resolved","summary":"Internal MS 4 - Boot single unicore VM with Linux guest with Native Graphics","customfield_11642":"2015-08-04","start":"2015-08-04","customfield_11643":"2015-08-04","end":"2015-08-04","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-22","issuetype":"Task","worklogs":[]},"MEH-1757":{"key":"MEH-1757","status":"Resolved","summary":"Create hypercall services \/ support to handle Hypercalls in Intel HV","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-10","end":"2015-08-10","timeoriginalestimate":144000,"timespent":135000,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-09-22","issuetype":"Task","worklogs":[{"id":"107749","started":"2016-01-04","time":"01:00:00.000-0600","timespent":2.625,"timespent_seconds":75600,"displayname":"Arslan, Muhammad [X]","comment":"*) Added the implementation of System V AMD 64 ABI. \r\n*) Implemented the dispatch table for hypercall handlers. \r\n*) Tested the change-set of linux-linux configuration. ","author":"marslan"},{"id":"108156","started":"2016-01-12","time":"07:29:44.000-0600","timespent":0.03125,"timespent_seconds":900,"displayname":"Javed, Madeeha","comment":"Review by javedm","author":"javedm"},{"id":"108308","started":"2016-01-14","time":"04:25:34.000-0600","timespent":0.03125,"timespent_seconds":900,"displayname":"Javed, Madeeha","comment":"Review by javedm","author":"javedm"},{"id":"110475","started":"2016-02-05","time":"02:00:00.000-0600","timespent":2,"timespent_seconds":57600,"displayname":"Arslan, Muhammad [X]","comment":"Changed the hyper call ABI definition. ","author":"marslan"}]},"MEH-1756":{"key":"MEH-1756","status":"Resolved","summary":"Hypervisor memory mgmt modifications\/optimizations","customfield_11642":"2015-10-16","start":"2015-10-16","customfield_11643":"2015-10-19","end":"2015-10-19","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-22","issuetype":"Task","worklogs":[]},"MEH-1755":{"key":"MEH-1755","status":"Resolved","summary":"Hypervisor interrupt mgmt infrastructure modifications\/optimization","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2017-06-22","end":"2017-06-22","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-09-22","issuetype":"Task","worklogs":[]},"MEH-1752":{"key":"MEH-1752","status":"Resolved","summary":"Create Virtio\/networking infrastructure\/support","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-09-04","end":"2015-09-04","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-22","issuetype":"Task","worklogs":[]},"MEH-1751":{"key":"MEH-1751","status":"Resolved","summary":"Enable EPT based memory virtualization","customfield_11642":"2015-09-22","start":"2015-09-22","customfield_11643":"2015-09-22","end":"2015-09-22","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-22","issuetype":"Sub-task","worklogs":[]},"MEH-1750":{"key":"MEH-1750","status":"Resolved","summary":"Create (ACPI) platform data discovery infrastructure","customfield_11642":"2015-07-23","start":"2015-07-23","customfield_11643":"2015-08-03","end":"2015-08-03","timeoriginalestimate":0,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2015-09-22","issuetype":"Task","worklogs":[{"id":"101449","started":"2015-09-25","time":"00:19:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Started looking at other industry standard solutions to determine how they are solving this problem.  Also looked at some non GPL Intel helper code for this issue.","author":"cgriffin"}]},"MEH-1749":{"key":"MEH-1749","status":"Resolved","summary":"Create VM Taskswitch, CPUID, HLT instruction handling","customfield_11642":"2015-09-22","start":"2015-09-22","customfield_11643":"2015-09-22","end":"2015-09-22","timeoriginalestimate":null,"timespent":5400,"labels":["intel_automotive_hyp"],"assignee":"marslan","created":"2015-09-22","issuetype":"Sub-task","worklogs":[{"id":"101597","started":"2015-09-28","time":"03:00:00.000-0500","timespent":0.1875,"timespent_seconds":5400,"displayname":"Arslan, Muhammad [X]","comment":"This commit port the handlers for Taskswitch, CPUID, and HLT instructions from the POC to new codebase. \r\n\r\nNote: There is only a stub for \"Hyp_Arch_Task_Switch_Handler\" in the POC. [~araghura] does this issue also cover the implementation of the complete handler or is it only confined to porting the POC code to new flow? If former were the case, then please reopen this issue with appropriate instructions.  ","author":"marslan"}]},"MEH-1748":{"key":"MEH-1748","status":"Resolved","summary":"Enable dual-core VM with linux SMP guest on Minnowmax","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-20","end":"2015-08-20","timeoriginalestimate":288000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-22","issuetype":"Task","worklogs":[]},"MEH-1747":{"key":"MEH-1747","status":"Resolved","summary":"Drive VM CR3 based on VM description","customfield_11642":"2015-08-04","start":"2015-08-04","customfield_11643":"2015-08-04","end":"2015-08-04","timeoriginalestimate":null,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-21","issuetype":"Sub-task","worklogs":[{"id":"101414","started":"2015-09-23","time":"21:16:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Raghuraman, Arvind","comment":"","author":"araghura"}]},"MEH-1743":{"key":"MEH-1743","status":"Resolved","summary":"MEH-1743 Integegrate ACPI Multiple APIC Descriptor Table (MADT)","customfield_11642":"2015-07-23","start":"2015-07-23","customfield_11643":"2015-07-24","end":"2015-07-24","timeoriginalestimate":115200,"timespent":115200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-09-17","issuetype":"Sub-task","worklogs":[{"id":"101417","started":"2015-09-24","time":"00:33:00.000-0500","timespent":4,"timespent_seconds":115200,"displayname":"Griffin, Clyde","comment":"Local APIC configuration is now ACPI driven.  Multiple processors are enumerated and coming up.  Also added support for 8259A under this issue to reflect the fact that without a full ACPI implementation we will have to back off to non symmetric bus interrupts using the 8259A.  That said \r\nI also implemented support for IO APICs with ACPI but we will not be able to use them with ACPI until a more complete ACPI solution is in place.","author":"cgriffin"}]},"MEH-1742":{"key":"MEH-1742","status":"Closed","summary":"Create arch_vm_mem_mgt_svcs","customfield_11642":"2015-08-04","start":"2015-08-04","customfield_11643":"2015-08-04","end":"2015-08-04","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-16","issuetype":"Task","worklogs":[]},"MEH-1741":{"key":"MEH-1741","status":"Resolved","summary":"Create arch_vm_sw_svcs","customfield_11642":"2015-09-28","start":"2015-09-28","customfield_11643":"2015-09-28","end":"2015-09-28","timeoriginalestimate":144000,"timespent":187200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-09-16","issuetype":"Task","worklogs":[{"id":"101964","started":"2015-10-02","time":"11:02:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Implemented e820_table creation as separate API","author":"ssohail"},{"id":"101965","started":"2015-10-02","time":"11:03:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Added Zero_page structures and sub-structures from Linux sources.\r\nRemoved hard-coding from Zero-page creation API and made it more data-driven alike.","author":"ssohail"},{"id":"101966","started":"2015-10-02","time":"11:04:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Debugged and removed some build-errors appearing because of my changes. After successful build. Committed my changes to master repo","author":"ssohail"},{"id":"101968","started":"2015-10-02","time":"11:10:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Updated following files\r\n\r\narch_vm_io_svcs.c\r\narch_vmexit_handler.h\r\nvm_sw_svcs.c\r\nfit_svcs.c\r\n\r\nUpdated mentioned files to follow coding standards.\r\nAlso modified some comments and placed some new comments to make code more readable.\r\n\r\nTested with a fresh build and did commits","author":"ssohail"},{"id":"101970","started":"2015-10-02","time":"11:10:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Made VM registers initialization code and zero-page code functional by doing proper modifications in Load_VM_SW API","author":"ssohail"},{"id":"101971","started":"2015-10-02","time":"11:12:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"We cannot use Linux implementation of Zero-page declaration as it is \r\nlicensed under GPL terms.\r\nAfter discussion with Arvind and Madiha, updated Zero-page structure code. Removed all the substructure definitions which are not of a ny use for now \r\nand replaced them with simple byte arrays to hold place.\r\nMoved hdr definition within Zero-page definition and updated some variable \r\nnames according to our standards.\r\nTested with a fresh build and approved these changes from Arvind and Madiha","author":"ssohail"},{"id":"101972","started":"2015-10-02","time":"11:16:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Did detailed testing for Zeropage structure and Creation API by using \r\ndetailed prints and Linux Fit image.\r\nFound some problems in certain places. Did proper fixes after minor \r\ndebugging. Checked -in my changes. Just a little test of e820 table creation \r\nis pending. ","author":"ssohail"},{"id":"102188","started":"2015-10-06","time":"02:42:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Verified E820 table creation via boot linux as a Native OS from hypervisor.\r\nVerified the results by applying some changes.\r\nthings seem to work as needed","author":"ssohail"}]},"MEH-1740":{"key":"MEH-1740","status":"Resolved","summary":"Validate interrupt virtualization support for x64 HV","customfield_11642":"2016-01-14","start":"2016-01-14","customfield_11643":"2016-01-20","end":"2016-01-20","timeoriginalestimate":576000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-16","issuetype":"Task","worklogs":[]},"MEH-1738":{"key":"MEH-1738","status":"Resolved","summary":"Fixup Exception Handling IDT\/Dispatcher","customfield_11642":"2015-07-21","start":"2015-07-21","customfield_11643":"2015-07-22","end":"2015-07-22","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-09-15","issuetype":"Sub-task","worklogs":[{"id":"100978","started":"2015-09-16","time":"21:36:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Created APIs for Exception Handling Registration\/Deregisrtation.\r\nEXCP_Exception_Setup()\r\nEXCP_Exception_Clear()\r\n\r\nCreated exception handling dispatcher to handler complex hypervisor scenarios.  This includes exception stages, priorities and callout policies.\r\n\r\nIn addition to handling hypervisor exceptions this API will enable us to easily add handlers to perform guest emulation tasks.\r\n\r\nRemoved obsolete POC exception handling code.","author":"cgriffin"}]},"MEH-1737":{"key":"MEH-1737","status":"Resolved","summary":"Create arch_vm_pci_svcs component","customfield_11642":"2015-09-28","start":"2015-09-28","customfield_11643":"2015-09-30","end":"2015-09-30","timeoriginalestimate":86400,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2015-09-15","issuetype":"Task","worklogs":[{"id":"101382","started":"2015-09-22","time":"03:41:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Javed, Madeeha","comment":"- Went through POC code to understand PCI emulation.\r\n- Read about PCI configuration space access methods specified in Atom's manual.\r\n- Tried to understand PCI mappings, referred Atom's manual.\r\n- Prepared some questions about shadow devices and mappings for team meeting.\r\n- Started to create APIs for PCI emulation. Created PCI mappings and PCI IO handler.","author":"javedm"}]},"MEH-1735":{"key":"MEH-1735","status":"Resolved","summary":"Create message logging services to be used by the HV","customfield_11642":"2015-09-10","start":"2015-09-10","customfield_11643":"2015-09-10","end":"2015-09-10","timeoriginalestimate":28800,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-09-10","issuetype":"Task","worklogs":[]},"MEH-1729":{"key":"MEH-1729","status":"Resolved","summary":"Implement ACPI parser to capture useful data.","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-16","end":"2015-04-16","timeoriginalestimate":115200,"timespent":79200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-09-08","issuetype":"Sub-task","worklogs":[{"id":"100881","started":"2015-09-15","time":"15:13:00.000-0500","timespent":2.75,"timespent_seconds":79200,"displayname":"Griffin, Clyde","comment":"Completed initial effort to find RSD PTR from BIOS or EFI.  Mapped in RSD PTR to determine level of ACPI support.  Depending on support level further mapped and parsed XSDT or RSDT to get a list of System Description Table (SDT) which describe the capabilities of the system. \r\n\r\ncpu.c has been updated capture ACPI info when tables are present.\r\n\r\nsupport\/boot\/efi\/boot.c was modified to find the ACPI tables from EFI.  When EFI is present traditional means of finding ACPI table via BIOS are not available.  In fact no extended BIOS tables were found of MinnowMax.\r\n\r\nI left to the consumer of ACPI the exercise of mapping in additional tables and deciding what to do with the data there in. \r\n\r\nComing out of this effort will be some additional effort to capture Multiple ACPI Descriptor Table (MADT) information.\r\n\r\nNew Files are:\r\nacpi.h\r\nacpi.c\r\n\r\nPublic APIs are:\r\nACPI_Get_Info()\r\nACPI_Map_Table()\r\nACPI_SDT_Show()\r\n\r\nACPI_Get_Info returns a filled out structure ACPI_INFO_T which contains the information necessary to further parse out ACPI tables.","author":"cgriffin"}]},"MEH-1722":{"key":"MEH-1722","status":"Closed","summary":"Create arch_vm_io_svcs","customfield_11642":"2015-09-25","start":"2015-09-25","customfield_11643":"2015-09-25","end":"2015-09-25","timeoriginalestimate":144000,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-09-03","issuetype":"Task","worklogs":[{"id":"101209","started":"2015-09-21","time":"05:51:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Did a brief check on how to populate existing definition of APIs with new VM abstractions. Populated some APIs and wrote some commented code which was not clear how to be updated with new VM abstractions.\r\n\r\nHad some discussions about the concers and confusions","author":"ssohail"},{"id":"101210","started":"2015-09-21","time":"05:54:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Populated remaining APIs and added some new APIs.\r\nCreated some macros definition for accessing I\/O information from exit-qualification field. Tested the changes so far","author":"ssohail"},{"id":"101211","started":"2015-09-21","time":"05:56:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Updated Bit-mapping MACROs and made the commented -out code functional.\r\nDid some debugging and tested I\/O emulation for two BME configuration.\r\nThings working fine. Passed some of my concerns about design to Arvind ","author":"ssohail"}]},"MEH-1720":{"key":"MEH-1720","status":"Resolved","summary":"Create VM, VCPU, and VMX mgmt svcs .. and VMEntry and VMExit handling infrastructure","customfield_11642":"2015-09-28","start":"2015-09-28","customfield_11643":"2015-09-28","end":"2015-09-28","timeoriginalestimate":57600,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-01","issuetype":"Task","worklogs":[{"id":"100977","started":"2015-09-16","time":"20:29:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Raghuraman, Arvind","comment":"","author":"araghura"}]},"MEH-1719":{"key":"MEH-1719","status":"Resolved","summary":"Remove vtx directory from \/hyp\/include\/arch\/x64 directory and move headers one level up","customfield_11642":"2015-09-01","start":"2015-09-01","customfield_11643":"2015-09-01","end":"2015-09-01","timeoriginalestimate":null,"timespent":25200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-09-01","issuetype":"Task","worklogs":[{"id":"99875","started":"2015-09-02","time":"13:49:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Transferred hyp\/arch\/ headers to one level up.\r\nRenamed where required to avoid conflicts.\r\nUpdated all files accordingly.\r\nTested with a fresh build. ","author":"ssohail"},{"id":"99979","started":"2015-09-03","time":"09:45:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"Required work is done and tested","author":"ssohail"}]},"MEH-1718":{"key":"MEH-1718","status":"Closed","summary":"Establish source code baseline per design for Intel Hypervisor (move away from POC baseline)","customfield_11642":"2015-09-01","start":"2015-09-01","customfield_11643":"2015-09-01","end":"2015-09-01","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-09-01","issuetype":"Task","worklogs":[]},"MEH-1713":{"key":"MEH-1713","status":"Closed","summary":"Add virtual address support in page table \/ MMU table init code","customfield_11642":"2015-07-02","start":"2015-07-02","customfield_11643":"2015-07-30","end":"2015-07-30","timeoriginalestimate":7200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-08-28","issuetype":"Task","worklogs":[]},"MEH-1712":{"key":"MEH-1712","status":"Resolved","summary":"Implement Interrupt Subsystem for x86","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-14","end":"2015-04-14","timeoriginalestimate":374400,"timespent":345600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-08-28","issuetype":"Sub-task","worklogs":[{"id":"99583","started":"2015-08-28","time":"11:56:00.000-0500","timespent":10,"timespent_seconds":288000,"displayname":"Griffin, Clyde","comment":"Support for IOxAPIC done.\r\nSupprot for xAPIC and x2APIC 90% done.\r\nSupport for 8259 in progress.\r\nPublic API done.\r\nHardware abstractions 90% done.","author":"cgriffin"},{"id":"100312","started":"2015-09-08","time":"17:40:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Documented architecture on confluence.","author":"cgriffin"}]},"MEH-1708":{"key":"MEH-1708","status":"Resolved","summary":"Create scalable abstractions for machine and virtual machine components","customfield_11642":"2015-08-24","start":"2015-08-24","customfield_11643":"2015-08-24","end":"2015-08-24","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-08-24","issuetype":"Task","worklogs":[]},"MEH-1707":{"key":"MEH-1707","status":"Resolved","summary":"Update data Types used in POC to nucleus types","customfield_11642":"2015-07-02","start":"2015-07-02","customfield_11643":"2015-07-02","end":"2015-07-02","timeoriginalestimate":57600,"timespent":28800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-08-24","issuetype":"Task","worklogs":[{"id":"100262","started":"2015-09-08","time":"05:25:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"The required work has been done and tested","author":"ssohail"}]},"MEH-1696":{"key":"MEH-1696","status":"Resolved","summary":"Implement Interrupt Dispatcher","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-14","end":"2015-04-14","timeoriginalestimate":57600,"timespent":72000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-08-10","issuetype":"Sub-task","worklogs":[{"id":"99536","started":"2015-08-27","time":"18:29:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"},{"id":"100311","started":"2015-09-08","time":"17:38:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"Implemented with 5 dispatch policies and support for a alternate dispatchers.","author":"cgriffin"}]},"MEH-1695":{"key":"MEH-1695","status":"Resolved","summary":"Implement support for IO APIC","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-14","end":"2015-04-14","timeoriginalestimate":86400,"timespent":79200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-08-10","issuetype":"Sub-task","worklogs":[{"id":"98281","started":"2015-08-10","time":"11:48:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"IO APIC support is complete.  Need to now enumerate devices with MPS.","author":"cgriffin"},{"id":"98283","started":"2015-08-10","time":"16:42:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Griffin, Clyde","comment":"Checked in ioapic.c and ioapic.h providing support for ioapics.\r\nTODO: Enumerate IO APICs via MPS.  To be done on a separate subtask.","author":"cgriffin"}]},"MEH-1689":{"key":"MEH-1689","status":"Resolved","summary":"Update VM Exit handling to work in 64 bit\/IA32e to support required exit conditions","customfield_11642":"2015-07-31","start":"2015-07-31","customfield_11643":"2015-07-31","end":"2015-07-31","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-31","issuetype":"Sub-task","worklogs":[]},"MEH-1687":{"key":"MEH-1687","status":"Resolved","summary":"Create flows to enable creation of FIT for Nucleus guest","customfield_11642":"2015-07-30","start":"2015-07-30","customfield_11643":"2015-07-30","end":"2015-07-30","timeoriginalestimate":null,"timespent":32400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-07-30","issuetype":"Sub-task","worklogs":[{"id":"97752","started":"2015-08-03","time":"09:26:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Enabled host side support of FIT image generation for Nucleus guest.\r\nTo test this stuff. Tried to load and boot Nucleus guest image in hypervisor \r\ncontext. It entered successfully but later generated an exception.\r\nDebugged this problem a little and found that it was happening because \r\nthere were irregular hard-coded physical memory addresses used in \r\nNucleus sources. Arvind commits fixed it.\r\n","author":"ssohail"},{"id":"97753","started":"2015-08-03","time":"09:30:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"Committed and merged my changes into master branch","author":"ssohail"}]},"MEH-1684":{"key":"MEH-1684","status":"Resolved","summary":"Implement MPS Table Parser and MPS Table Creator","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-17","end":"2015-04-17","timeoriginalestimate":144000,"timespent":104400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-29","issuetype":"Sub-task","worklogs":[{"id":"99534","started":"2015-08-27","time":"18:00:00.000-0500","timespent":3.625,"timespent_seconds":104400,"displayname":"Griffin, Clyde","comment":"Created a MPS table parser.\r\nCreated default config table 5.\r\nRewrote the table creator using structures common to the parser,","author":"cgriffin"}]},"MEH-1683":{"key":"MEH-1683","status":"Closed","summary":"Support for guest page tables","customfield_11642":"2015-07-15","start":"2015-07-15","customfield_11643":"2015-07-21","end":"2015-07-21","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-28","issuetype":"Sub-task","worklogs":[]},"MEH-1682":{"key":"MEH-1682","status":"Closed","summary":"Support for guest interrupt processing","customfield_11642":"2015-07-10","start":"2015-07-10","customfield_11643":"2015-07-14","end":"2015-07-14","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-28","issuetype":"Sub-task","worklogs":[]},"MEH-1681":{"key":"MEH-1681","status":"Resolved","summary":"Clean up  existing x64 enablement work to comply with comment and coding standards.","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":288000,"timespent":14760,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-28","issuetype":"Sub-task","worklogs":[{"id":"97471","started":"2015-07-29","time":"14:16:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"Added approved headers to files in\r\narch\/i386\r\narch\/i386\/include\/asm","author":"cgriffin"},{"id":"100313","started":"2015-09-08","time":"17:42:00.000-0500","timespent":0.0125,"timespent_seconds":360,"displayname":"Griffin, Clyde","comment":"This is ongoing.  Going to track this with individual subtasks going forward.  So will close this issue now.","author":"cgriffin"}]},"MEH-1680":{"key":"MEH-1680","status":"Resolved","summary":"Implement VMCALL handling infrastructure to enable printf based debugging of guests","customfield_11642":"2015-07-09","start":"2015-07-09","customfield_11643":"2015-07-09","end":"2015-07-09","timeoriginalestimate":7200,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-28","issuetype":"Sub-task","worklogs":[]},"MEH-1679":{"key":"MEH-1679","status":"Resolved","summary":"Implement a simple hypercall interface for the BME guest","customfield_11642":"2015-07-08","start":"2015-07-08","customfield_11643":"2015-07-08","end":"2015-07-08","timeoriginalestimate":3600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-28","issuetype":"Sub-task","worklogs":[]},"MEH-1677":{"key":"MEH-1677","status":"Resolved","summary":"Enable the secondary CPU boot path and launch of second VM on the second CPU","customfield_11642":"2015-07-23","start":"2015-07-23","customfield_11643":"2015-07-23","end":"2015-07-23","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-07-23","issuetype":"Sub-task","worklogs":[]},"MEH-1674":{"key":"MEH-1674","status":"Resolved","summary":"Integrate the Page Attribute Table (PAT) into paging","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":720,"timespent":115200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-21","issuetype":"Sub-task","worklogs":[{"id":"97035","started":"2015-07-23","time":"17:07:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Added APIs to allow redefinition and reloading of the page attribute table.\r\nThis also allowed for the refinement of many other paging related defines.  Additionally the paging API was modified to use the encodings in PAT, PCD and PWT instead of the bit settings in PCD and PWT to determine the paging type.  Still having some issues with MTTRs when reloading the PAT.  But for now will close this issue.","author":"cgriffin"},{"id":"97036","started":"2015-07-23","time":"17:10:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-1673":{"key":"MEH-1673","status":"Resolved","summary":"Hypervisor able to handle PCI\/MMIO mapped access emulation","customfield_11642":"2015-07-20","start":"2015-07-20","customfield_11643":"2015-07-20","end":"2015-07-20","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-20","issuetype":"Sub-task","worklogs":[]},"MEH-1672":{"key":"MEH-1672","status":"Resolved","summary":"Hypervisor able to handle IO port mapped access emulation","customfield_11642":"2015-07-20","start":"2015-07-20","customfield_11643":"2015-07-20","end":"2015-07-20","timeoriginalestimate":288000,"timespent":259200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-07-20","issuetype":"Sub-task","worklogs":[{"id":"98723","started":"2015-08-17","time":"13:33:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Sohail, Sharjeel","comment":"Did some study on IO emulation and VM exit conditions invoking because of Secure IO port Access.\r\nWet through current code to see how IO emulation Exit handling structure is maintained at hypervisor side","author":"ssohail"},{"id":"98724","started":"2015-08-17","time":"13:35:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Created a workspace. Updated BME application to write directly on Console with Port I\/O operations. All I\/O port are currently set as accessible by guest therefore Console write\/read operation must be successful.\r\nIt went fine and I\/O port write on console worked fine ","author":"ssohail"},{"id":"98725","started":"2015-08-17","time":"13:37:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Added some code in virtual machine creation function to set some bits of I\/O bitmap for virtual machine. Set the bitmap to generate vm_exit when console I\/O port read or write operation is done from vitrual machine.\r\nIt went fine.\r\nThen I added some code in I\/O port instruction handling structure to do I\/O port operation for guest from hypervisor side.\r\nThings went well. But this all is done through hard-coding and indroducing new way to handle request. What must be done here is to use existing handling code by setting proper structures for I\/O port operation handling, hence making a test case of I\/O port emulation with existing code","author":"ssohail"},{"id":"98726","started":"2015-08-17","time":"13:42:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Created and filled IO_mapping structure for guest0 and added it into virtual_machine description for first virtual machine. This I\/O mapping tells that two ports on which Console write read operations are done should be mapped for I\/O emulation.\r\nAdded code in virtual machine creation API to get information from Virtual_machine description about IO ports to mapped and then correspondingly set the IO_bitmap for that virtual machine. Used some prints to test that this part is working fine.\r\n\r\nWhen guest tries to access these ports, vm_exit is invoked and hypervisor goes into IO_instruction handling API by reading vm_exit details.\r\n\r\nSo, this part is working fine","author":"ssohail"},{"id":"98727","started":"2015-08-17","time":"13:47:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Dig more into hypervisor code which was handling IO port vm_exit conditions. A handler is needed to be registered corresponding to each IO port for a specific virtual machine.\r\nCollected information about which fields of IO_handler structure are needed and what is a proper way to add a handler. After investigating this stuff, tried to create IO_handler structures for Console IO port operations.\r\nAdded some APIs where needed. Modified some code in virtual_machine_creation API to make it generate IO handler corresponding to each IO mapping field in virtual_machine description function.\r\nTested the changes, after a few debugging efforts, was able to make it work. Cleaned up some code and tested with a fresh workspace. I\/O emulation is working fine with current I\/O port handling infrastructure.\r\n","author":"ssohail"}]},"MEH-1669":{"key":"MEH-1669","status":"Closed","summary":"Create arch_vm_exit_handler","customfield_11642":"2015-09-25","start":"2015-09-25","customfield_11643":"2015-09-25","end":"2015-09-25","timeoriginalestimate":57600,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-20","issuetype":"Task","worklogs":[]},"MEH-1668":{"key":"MEH-1668","status":"Resolved","summary":"Create Hypervisor infrastructure to initialize MTRRs based on machine description","customfield_11642":"2015-07-20","start":"2015-07-20","customfield_11643":"2015-07-20","end":"2015-07-20","timeoriginalestimate":172800,"timespent":183600,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-20","issuetype":"Sub-task","worklogs":[{"id":"96889","started":"2015-07-20","time":"20:39:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Griffin, Clyde","comment":"Spent time reading the arch docs, developing an initial approach.","author":"cgriffin"},{"id":"97363","started":"2015-07-28","time":"08:48:00.000-0500","timespent":3.5,"timespent_seconds":100800,"displayname":"Griffin, Clyde","comment":"The implementation is nearly complete.  Need to finalize the proper sequence of disabling and re-enabling MTRRs, caching and so for per spec.  I did discover in the process of working on this that the msr_read() and msr_write() APIs were both broken with respect to setting and retrieving a 64 bit value.  This was causing problems in several subsystems which, now that things are fixed, are working correctly now.  MSRs writes are always 64 bits and MSR reads are always 64 bits.","author":"cgriffin"},{"id":"97393","started":"2015-07-28","time":"17:02:00.000-0500","timespent":0.875,"timespent_seconds":25200,"displayname":"Griffin, Clyde","comment":"Merged Page Attribute Table (PAT) and Memory Type Rage Register (MTRR) initialization sequences into one since both require the same very detailed sequence of control register and msr writes before and after setting PAT and MTTRs.\r\n\r\nSecondary CPUs may now call mttr_init(cpunum) and all the appropriate setup will occur.","author":"cgriffin"}]},"MEH-1666":{"key":"MEH-1666","status":"Resolved","summary":"Create a board board abstraction \/support\/guests\/<board_name>\/ and check in the Linux kernel for minnowmax","customfield_11642":"2015-07-16","start":"2015-07-16","customfield_11643":"2015-07-16","end":"2015-07-16","timeoriginalestimate":57600,"timespent":57600,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2015-07-16","issuetype":"Sub-task","worklogs":[{"id":"101094","started":"2015-09-18","time":"08:28:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-1665":{"key":"MEH-1665","status":"Resolved","summary":"Update the machine definition to initialize all of available RAM memory on Minnowmax","customfield_11642":"2015-07-16","start":"2015-07-16","customfield_11643":"2015-07-16","end":"2015-07-16","timeoriginalestimate":null,"timespent":50400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-07-16","issuetype":"Sub-task","worklogs":[{"id":"97754","started":"2015-08-03","time":"09:31:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Provided all memory to hypervisor by modifying MMU enteries, linker file \r\nand efi loader addresses. It generated an exception\/page fault while testing \r\nthese changes with Guest load\/boot testcase","author":"ssohail"},{"id":"97755","started":"2015-08-03","time":"09:33:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Debugged the problem and found that providing complete memory to \r\nhypervisor till the end of 2GB RAM produces this problem. If we free even \r\none byte from the end, it runs fine. Surely a Memory boundary related \r\nproblem in some mapping checks.\r\nDiscussed with team and went forward with my working modifications","author":"ssohail"},{"id":"97756","started":"2015-08-03","time":"09:35:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Modified guests memory ranges and tested for different values.\r\nFinally provided 512MB to each guest which is king of sufficient for a normal \r\nOperating System.\r\nTested these changes with Guest load\/boot in hypervisor context testcase.","author":"ssohail"},{"id":"97757","started":"2015-08-03","time":"09:37:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Committed my changes. rebased with master merges.\r\nTested again with latest rebased code and then merged my commits into \r\nmaster branch of main repository","author":"ssohail"}]},"MEH-1660":{"key":"MEH-1660","status":"Resolved","summary":"Complete the interrupt registration API","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-15","end":"2015-04-15","timeoriginalestimate":115200,"timespent":115200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-14","issuetype":"Technical task","worklogs":[{"id":"98266","started":"2015-08-10","time":"11:08:00.000-0500","timespent":4,"timespent_seconds":115200,"displayname":"Griffin, Clyde","comment":"Posted proposed interrupt API on confluence.  Recevied good comments that I will integrate. ","author":"cgriffin"}]},"MEH-1659":{"key":"MEH-1659","status":"Resolved","summary":"Calibrate APIC Timer","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":480,"timespent":22080,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-14","issuetype":"Sub-task","worklogs":[{"id":"96501","started":"2015-07-15","time":"03:31:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Griffin, Clyde","comment":"Calibrated APIC against 8254 timer.","author":"cgriffin"},{"id":"96502","started":"2015-07-15","time":"03:33:00.000-0500","timespent":0.016666666666667,"timespent_seconds":480,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-1658":{"key":"MEH-1658","status":"Resolved","summary":"Fix stack sizing allocations for stack and temporary page allocation.","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":14400,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-14","issuetype":"Sub-task","worklogs":[{"id":"96487","started":"2015-07-14","time":"18:55:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Griffin, Clyde","comment":"Our temporary page allocator is using the ,stack section.  Cleaned things up so there is little confusion as to how things are being used.","author":"cgriffin"}]},"MEH-1643":{"key":"MEH-1643","status":"Resolved","summary":"Fix paging to deal with 4k pages and more entries.","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-14","end":"2015-04-14","timeoriginalestimate":57600,"timespent":72000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-10","issuetype":"Sub-task","worklogs":[{"id":"96194","started":"2015-07-09","time":"08:55:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"},{"id":"96578","started":"2015-07-15","time":"15:17:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Griffin, Clyde","comment":"Fixed 4k page mapping bug.\r\nFixed memset to not attempt to zero a page until it is mapped.\r\nModified the API a bit to enable paging APIs to be a mmu service.  More work to be done here though.","author":"cgriffin"},{"id":"96579","started":"2015-07-15","time":"15:18:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-1640":{"key":"MEH-1640","status":"Resolved","summary":"Relocate Paging Intialization to be called early on in __minnow_setup() ","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":null,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-09","issuetype":"Sub-task","worklogs":[{"id":"96151","started":"2015-07-09","time":"17:39:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Griffin, Clyde","comment":"","author":"cgriffin"}]},"MEH-1637":{"key":"MEH-1637","status":"Resolved","summary":"Update vmxops to 64bit and enable VMCS setup","customfield_11642":"2015-07-09","start":"2015-07-09","customfield_11643":"2015-07-09","end":"2015-07-09","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-09","issuetype":"Sub-task","worklogs":[]},"MEH-1631":{"key":"MEH-1631","status":"Closed","summary":"Update implementation in cpu.c for operation in 64 bit mode ","customfield_11642":"2015-07-06","start":"2015-07-06","customfield_11643":"2015-07-06","end":"2015-07-06","timeoriginalestimate":null,"timespent":240,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-07-06","issuetype":"Sub-task","worklogs":[{"id":"95980","started":"2015-07-06","time":"11:30:00.000-0500","timespent":0.0083333333333333,"timespent_seconds":240,"displayname":"Griffin, Clyde","comment":"Spent time understand how things we are rearranging are being used to ensure that the changes I make are appropriate.","author":"cgriffin"}]},"MEH-1630":{"key":"MEH-1630","status":"Resolved","summary":"Modify kernel configuration with absolute minimal peripheral support","customfield_11642":"2015-07-06","start":"2015-07-06","customfield_11643":"2015-07-08","end":"2015-07-08","timeoriginalestimate":86400,"timespent":86400,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-07-06","issuetype":"Sub-task","worklogs":[{"id":"100853","started":"2015-09-15","time":"07:42:00.000-0500","timespent":3,"timespent_seconds":86400,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"MEH-1629":{"key":"MEH-1629","status":"Resolved","summary":"Identify a Linux kernel distro, and configure kernel appropriately for platform data discovery","customfield_11642":"2015-07-06","start":"2015-07-06","customfield_11643":"2015-07-06","end":"2015-07-06","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-07-06","issuetype":"Sub-task","worklogs":[]},"MEH-1627":{"key":"MEH-1627","status":"Resolved","summary":"Validate GOS load and GOS boot API for Linux guests as VMM root ","customfield_11642":"2015-07-08","start":"2015-07-08","customfield_11643":"2015-07-31","end":"2015-07-31","timeoriginalestimate":57600,"timespent":496800,"labels":["intel_automotive_hyp"],"assignee":null,"created":"2015-07-05","issuetype":"Sub-task","worklogs":[{"id":"96135","started":"2015-07-09","time":"11:22:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Created the ITS for Linux images and then created the Linux FIT image.\r\nTried to check if FIT image configure returns success.\r\nIn the first attempt, FIT image configuration failed.\r\nDebugged FIT image loading. Observed FDT_ERR_NOTFOUND.\r\nTried with bare-metal setup. Observed same issues.\r\nConsulted with Sharjeel who checked the ITS file and pointed that the boot arguments and ramdisk nodes in case of BME are missing. Suggested a work around in Makefile that helped.\r\nSharjeel also pointed out that bootargs file must not be empty in case of Linux.\r\nWith these changes, FIT image loading was successful.","author":"javedm"},{"id":"96679","started":"2015-07-10","time":"12:21:00.000-0500","timespent":4,"timespent_seconds":115200,"displayname":"Javed, Madeeha","comment":"Tried to jump to start of load address of the kernel in memory. The entry point exists at 0x200 offset. Encountered invalid opcode.\r\nChecked out latest code with paging enablement relocated to early initialization. Encountered page fault.\r\nPosted findingd to Arvind.\r\nContinued to work with older code to investigate invalid opcode. \r\nInspected linux kernel boot up code. Reproduced the invalid opcode issue with BME. The setup code being in 16 bit clarified the invalid opcode issue.\r\nContinued to investigate 64 bit entry points in kernel.  startup_64 seems like one entry point that is 64 bit code and decompresses the kernel.\r\n","author":"javedm"},{"id":"97426","started":"2015-07-22","time":"04:41:00.000-0500","timespent":5,"timespent_seconds":144000,"displayname":"Javed, Madeeha","comment":"Focused more on kernel code organization. Investigated start up code and various entry points.\r\nCalculated offset of startup_64. Used this entry point to jump into linux. However could not see proper boot messages and kernel got stuck at some point.\r\nMemory access issue on real mode data, reported by GDB created a bit of distraction however it was a non-issue.\r\nSetup GDB environment. GDB 7.4 was not loading symbol information properly. Upgraded to 7.6.\r\nWith the help of debugging, found out that boot arguments are being overwritten in memory with kernel code. Updated boot arguments load address and kernel started to boot properly.\r\nDebugged the issue of initramfs not mounting successfully. Was basically a problem with init script. Switching to basic boot rather than live image boot solved the issue.\r\nDocumented instructions and research points.","author":"javedm"},{"id":"97455","started":"2015-07-29","time":"11:20:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Followed the instructions on Confluence page and established Minnowmax Linux build on Host machine.\r\nWorked out some further steps and reached the same position of debugging as at Madeeha's side","author":"ssohail"},{"id":"97456","started":"2015-07-29","time":"11:28:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Resolved some memory related issue appearing because of loading Linux into non-memory-mapped area.\r\nThen found a required update in qemu command.\r\nDiscussed with Madeeha and Committed these fixes into master repository","author":"ssohail"},{"id":"97457","started":"2015-07-29","time":"11:31:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"\r\nAdded the changes to load cmdline as text file, initramfs image.\r\nUpdated the corresponding addresses and corrected Zero-page creation address.\r\n","author":"ssohail"},{"id":"97458","started":"2015-07-29","time":"11:33:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Linux messages were not appearing, so, I setup the debugging environment via gdb terminal and verified that th kernel was actually running and falling to an idle state.\r\nWorked with Madeeha and verified some cmdline and zeropage structure updates at Linux side.\r\nLinux is getting zeropage and cmdline accurately.\r\n","author":"ssohail"},{"id":"97459","started":"2015-07-29","time":"11:36:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Did some debugging, then tried with Clyde's commits of fixing some paging related problems. Checkingout these changes made the Linux messages to appear on Console.\r\nNow we can see that Linux was properly booting with hypervisor's provided Strutures and falling into a state where it waits for some media device","author":"ssohail"},{"id":"97460","started":"2015-07-29","time":"11:38:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Debugged further, Wait message wasn't coming from Linux kernel but from \r\nLinux rootfs. Madeeha suggested to use initramfs-boot recipe instead of \r\ninitramfs-live boot recipe to prepare rootfs.\r\nOnce I made this update, linux kernel boot process got complete and Linux \r\nshell appeared.\r\nCommitted some changes that can reproduce the booting of Linux guest within Hypervisor context.\r\nUpdated confluence page (created by Madeeha) with new initramfs.","author":"ssohail"}]},"MEH-1626":{"key":"MEH-1626","status":"Resolved","summary":"Validate GOS load and GOS boot API for bare-metal guests as VMM root ","customfield_11642":"2015-07-06","start":"2015-07-06","customfield_11643":"2015-07-06","end":"2015-07-06","timeoriginalestimate":43200,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-07-05","issuetype":"Sub-task","worklogs":[{"id":"96141","started":"2015-07-09","time":"12:49:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Loaded bare-metal binary at all the three locations. kernel\/cmdline\/initramfs\r\n\r\nUsed a function pointer to carry load address of application and booted the kernel from Root context by directly making a call to thi sfunction.\r\n\r\nChanged this load address to initramfs and cmdline and kernel one-by-one.\r\nSuccessfully booted the bare-metal application from all three places\r\n\r\nFurthermore. Used textfile to contain test-cmdline. packaged it as cmdline file. Loaded at the specified address and then by using a character pointer, printed this string. It worked fine. Just a test to see if text file can work and it does.","author":"ssohail"}]},"MEH-1623":{"key":"MEH-1623","status":"Resolved","summary":"Initialize VMCS for a given VM configuration and launch VM","customfield_11642":"2015-07-03","start":"2015-07-03","customfield_11643":"2015-07-07","end":"2015-07-07","timeoriginalestimate":144000,"timespent":14400,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-02","issuetype":"Sub-task","worklogs":[{"id":"96847","started":"2015-07-17","time":"11:43:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Raghuraman, Arvind","comment":"Able to launch a simple VM with a single (VMCALL) instruction BME application. ","author":"araghura"}]},"MEH-1622":{"key":"MEH-1622","status":"Resolved","summary":"Changes to turn ON VMX in 64bit mode. ","customfield_11642":"2015-07-02","start":"2015-07-02","customfield_11643":"2015-07-02","end":"2015-07-02","timeoriginalestimate":60,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-07-02","issuetype":"Sub-task","worklogs":[]},"MEH-1608":{"key":"MEH-1608","status":"Resolved","summary":"Load IDT, connect interrupt handlers, start timer interrupts.","customfield_11642":"2015-06-23","start":"2015-06-23","customfield_11643":"2015-06-23","end":"2015-06-23","timeoriginalestimate":null,"timespent":90000,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-23","issuetype":"Sub-task","worklogs":[{"id":"96146","started":"2015-07-08","time":"14:33:00.000-0500","timespent":1.25,"timespent_seconds":36000,"displayname":"Griffin, Clyde","comment":"Cleaned up a lot of LAPIC initialization.  I'm not able to do memory mapped IO however.  Will need to move the paging setup code earlier in the startup sequence.","author":"cgriffin"},{"id":"96484","started":"2015-07-13","time":"16:13:00.000-0500","timespent":1.875,"timespent_seconds":54000,"displayname":"Griffin, Clyde","comment":"Fixed or identified a number of issues on the way to getting the APIC generating timer interrupts.\r\nIssues:\r\n- Paging: Had to use a 2M page instead of 4k,  Needs further investigation.\r\n- Paging: Cannot use memset in page alloc else faults get generated.\r\n- Stack:  Needs work.  Page Alloc is using space intended for stack. Will create issue.\r\n- Early init relies on some paging to be in place.  This needs to change.\r\n- Fixed a syntax but in the IDT causing GP faults.\r\n- Disabled PIC and Virtual Wire mode.  We'll use the APIC and IO APIC going forward.\r\n- APIC Timer needs calibration and need to determine tick rate.\r\n\r\nI will create sub issues to deal with these outstanding items.\r\n","author":"cgriffin"}]},"MEH-1605":{"key":"MEH-1605","status":"Resolved","summary":"Establish source code baseline per design for Intel Hypervisor (move away from POC baseline)","customfield_11642":"2015-08-24","start":"2015-08-24","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-21","issuetype":"Task","worklogs":[]},"MEH-1596":{"key":"MEH-1596","status":"Resolved","summary":"Fix size of LDT reservation in GDT","customfield_11642":"2015-06-18","start":"2015-06-18","customfield_11643":"2015-06-18","end":"2015-06-18","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-18","issuetype":"Bug","worklogs":[]},"MEH-1595":{"key":"MEH-1595","status":"Resolved","summary":"Update to 64 bit register set in relevant data CPU context related data structures","customfield_11642":"2015-06-18","start":"2015-06-18","customfield_11643":"2015-06-18","end":"2015-06-18","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-18","issuetype":"Sub-task","worklogs":[]},"MEH-1591":{"key":"MEH-1591","status":"Resolved","summary":"Implement IA32e 64 bit paging infrastructure for the hypervisor","customfield_11642":"2015-06-17","start":"2015-06-17","customfield_11643":"2015-06-17","end":"2015-06-17","timeoriginalestimate":86400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-17","issuetype":"Sub-task","worklogs":[]},"MEH-1590":{"key":"MEH-1590","status":"Resolved","summary":"Internal MS 6 - Enable two VMs each booting unicore Linux guest","customfield_11642":"2015-08-10","start":"2015-08-10","customfield_11643":"2015-08-26","end":"2015-08-26","timeoriginalestimate":374400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-06-17","issuetype":"Task","worklogs":[]},"MEH-1589":{"key":"MEH-1589","status":"Resolved","summary":"Task 12 - Baremetal on two VMs","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":230400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-06-17","issuetype":"Task","worklogs":[]},"MEH-1588":{"key":"MEH-1588","status":"Closed","summary":"Internal MS 3 - Enable Linux on first VM","customfield_11642":"2015-09-25","start":"2015-09-25","customfield_11643":"2015-10-23","end":"2015-10-23","timeoriginalestimate":288000,"timespent":259200,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-06-17","issuetype":"Task","worklogs":[{"id":"102897","started":"2015-10-06","time":"04:22:00.000-0500","timespent":9,"timespent_seconds":259200,"displayname":"Javed, Madeeha","comment":"With EPT enabled hypervisor, details of work on booting Linux as guest are in the following commits:\r\n\r\nhttps:\/\/github.com\/MentorEmbedded\/mehv-x64-broxton\/commit\/a4a7034a3a51eddaf5e9036f2f233a591143f04c\r\n\r\nand\r\n\r\nhttps:\/\/github.com\/MentorEmbedded\/mehv-x64-broxton\/commit\/cc1ae675bef9489f8b6ec1877f29526497f26bc2","author":"javedm"}]},"MEH-1587":{"key":"MEH-1587","status":"Resolved","summary":"Enable two VMs that boot two baremetal guests on POC","customfield_11642":"2015-07-23","start":"2015-07-23","customfield_11643":"2015-07-23","end":"2015-07-23","timeoriginalestimate":374400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-17","issuetype":"Task","worklogs":[]},"MEH-1586":{"key":"MEH-1586","status":"Resolved","summary":"Task 7 - Port POC source base to Baytrail on Minnowboard","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":662400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-17","issuetype":"Task","worklogs":[]},"MEH-1585":{"key":"MEH-1585","status":"Resolved","summary":"Implement GOS loading and booting services run-time component in the  Hypervisor","customfield_11642":"2015-07-06","start":"2015-07-06","customfield_11643":"2015-08-03","end":"2015-08-03","timeoriginalestimate":230400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-06-17","issuetype":"Task","worklogs":[]},"MEH-1583":{"key":"MEH-1583","status":"Resolved","summary":"Modify POC for 64-bit mode of operation","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-07-24","end":"2015-07-24","timeoriginalestimate":518400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-17","issuetype":"Task","worklogs":[]},"MEH-1582":{"key":"MEH-1582","status":"Resolved","summary":"Modify POC VM and GOS configuration and management infrastructure to achieve goals of milestone 1","customfield_11642":"2015-07-16","start":"2015-07-16","customfield_11643":"2015-07-16","end":"2015-07-16","timeoriginalestimate":374400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-17","issuetype":"Task","worklogs":[]},"MEH-1581":{"key":"MEH-1581","status":"Resolved","summary":"Add 64 bit IDT and Hyperviosr front end service routines","customfield_11642":"2015-07-03","start":"2015-07-03","customfield_11643":"2015-07-07","end":"2015-07-07","timeoriginalestimate":86400,"timespent":300,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-16","issuetype":"Sub-task","worklogs":[{"id":"95981","started":"2015-07-07","time":"11:34:00.000-0500","timespent":0.0083333333333333,"timespent_seconds":240,"displayname":"Griffin, Clyde","comment":"Spent time understanding what the POC is doing wrt interrupts, APIC, etc.","author":"cgriffin"},{"id":"96485","started":"2015-07-14","time":"17:07:00.000-0500","timespent":0.0020833333333333,"timespent_seconds":60,"displayname":"Griffin, Clyde","comment":"Dispatcher needs to support share interrupts.","author":"cgriffin"}]},"MEH-1580":{"key":"MEH-1580","status":"Resolved","summary":"Implement missing functionality in setup_gos_context internal API","customfield_11642":"2015-07-21","start":"2015-07-21","customfield_11643":"2015-08-03","end":"2015-08-03","timeoriginalestimate":288000,"timespent":262800,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-06-16","issuetype":"Sub-task","worklogs":[{"id":"95836","started":"2015-07-06","time":"09:52:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Studied POC implementation for Zero-Page and E820 table entries to setup guest space","author":"ssohail"},{"id":"95837","started":"2015-07-06","time":"09:53:00.000-0500","timespent":2,"timespent_seconds":57600,"displayname":"Sohail, Sharjeel","comment":"Modified POC provided code for Zero Page setup in our environement. Marked some gray areas and provided feedback","author":"ssohail"},{"id":"95838","started":"2015-07-06","time":"09:54:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Discussed related points with Madiha and Arvind and after consistent sections of questions and answers, modified and kind of purified the API for Zero page and E820 table setup. Committed my changes","author":"ssohail"},{"id":"95839","started":"2015-07-06","time":"09:56:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"Referred to Natrive Linux bootlog when running on Minnowmax and tried to establish an updated E820 table entries.\r\nLater modified some entries to use 256MB RAM as usable memory with starting point of guest load_addr\r\nApplied checks on environment settings, to setup guest space only in case of Linux guest","author":"ssohail"},{"id":"95840","started":"2015-07-06","time":"09:59:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Discussed Gray Areas in Team meeting and setup a Confluence page based on composed findings about Zero page structure.\r\n","author":"ssohail"},{"id":"95982","started":"2015-07-07","time":"11:59:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Moved guest zeropage settings API in a separate file and did some other modifications","author":"ssohail"},{"id":"95983","started":"2015-07-07","time":"12:00:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Added Commandline string processing code.\r\n\r\nUsing a text file for containing commandline bootargs of linux guest","author":"ssohail"},{"id":"96121","started":"2015-07-09","time":"08:33:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Sohail, Sharjeel","comment":"Added Instructions to load initramfs image in case of Linux guest","author":"ssohail"}]},"MEH-1579":{"key":"MEH-1579","status":"Resolved","summary":"Identify, configure and boot a suitable Linux distro on Minnowmax board. Understand use of SFI\/MPS\/ACPI by Linux.","customfield_11642":"2015-07-06","start":"2015-07-06","customfield_11643":"2015-07-08","end":"2015-07-08","timeoriginalestimate":230400,"timespent":244800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2015-06-16","issuetype":"Task","worklogs":[{"id":"94649","started":"2015-06-17","time":"03:28:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Searched about the available Linux distributions for MMAX.\r\nTizen and Yocto are 2 options.\r\nMMAX machine available in Yocto Dizzy. Did setup to build the Yocto distribution.","author":"javedm"},{"id":"94651","started":"2015-06-18","time":"03:32:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Started building the Yocto distribution. Resolved a few caveats related to layer inclusion.\r\nBuild completed successfully. \r\nSetup the board to boot Linux.","author":"javedm"},{"id":"94653","started":"2015-06-19","time":"03:39:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Faced a few issues while booting. Seems like boot environment variables need to be set properly. ","author":"javedm"},{"id":"95118","started":"2015-06-22","time":"03:38:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Was able to boot Linux on Minnow Max.\r\nBoot log contained entries for E820 table and EFI table.\r\nInvestigated boot params structure, E820 table, the relationship between E820 and EFI tables. \r\nFrom an initial kernel code review: Linux always uses E820 table for its internal processing. If kernel is booted off from UEFI, EFI tables are converted to E820 tables. If kernel is booted off from a boot loader, the boot loader will create an E820 table from EFI table to pass off to kernel. Otherwise if E820 table is available from the firmware, the bootloader updates it and passes it on.\r\nWent back to check POC. In POC, E820 is hard coded and passed to kernel in bootparams\r\nDiscussion with Sharjeel over the findings.","author":"javedm"},{"id":"95139","started":"2015-06-23","time":"05:12:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Continued to dig into boot parameter contents.\r\n- setup header\r\n- e820 map\r\n- efi info\r\n\r\nGathered understanding of setup header fields, how its read and modified by the boot loader.\r\nUnderstanding of e820 map entries.\r\nUnderstand of efi map. In the meeting, we concluded that we will not be needing this.","author":"javedm"},{"id":"95140","started":"2015-06-25","time":"06:28:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Started to gain understanding of POC implementation, creation of e820 map. With Sharjeel's help, I was able to quickly see how the zero page is setup.\r\nWe decided to use kernel reported E820 map as reference. And to finalize our entries in the hypervisor code but first we needed confirmation if using the reported map was correct or not.\r\nFollowing the linux kernel boot sequence from setup_arch(), I was able to confirm that the first map reported by kernel was the unmodified map. E820 map is copied from boot params and printed right away, also an unmodified map copy is saved in the kernel in e820_saved while e820 is later modified by the kernel.","author":"javedm"},{"id":"95141","started":"2015-06-26","time":"06:37:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Started investigations into SFI, MPS and ACPI maps in Linux kernel as discussed in the meetings.\r\nLinux x86 does not use device trees and uses ACPI tables provided by the firmware.\r\nLinux config CONFIG_SFI enables the use of SFI tables.\r\nPOC uses SFI and MPS for device configuration.\r\nSkimmed over SFI specification.\r\nGoing through kernel's SFI implementation to enable SFI.","author":"javedm"},{"id":"95801","started":"2015-06-29","time":"05:31:00.000-0500","timespent":4,"timespent_seconds":115200,"displayname":"Javed, Madeeha","comment":"Boot kernel with SFI\/MPS\/ACPI enabled.\r\nBoot kernel with SFI\/MPS enabled and ACPI disabled.\r\nModified SFI initialization code in kernel to confirm absence of SFI tables from firmware.\r\nInvestigated differences between boot logs and reason for kernel hang.\r\nWent through MP spec.\r\nDocumented findings.","author":"javedm"}]},"MEH-1578":{"key":"MEH-1578","status":"Resolved","summary":"Modify build infrastructure to convert the elf output to binary ","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-06-15","issuetype":"Task","worklogs":[]},"MEH-1575":{"key":"MEH-1575","status":"Resolved","summary":"More GDT enhancements","customfield_11642":"2015-06-10","start":"2015-06-10","customfield_11643":"2015-06-10","end":"2015-06-10","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-10","issuetype":"Improvement","worklogs":[]},"MEH-1574":{"key":"MEH-1574","status":"Resolved","summary":"Enable a single VM that boots a baremetal applictaion","customfield_11642":"2015-07-02","start":"2015-07-02","customfield_11643":"2015-07-21","end":"2015-07-21","timeoriginalestimate":374400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-10","issuetype":"Task","worklogs":[]},"MEH-1573":{"key":"MEH-1573","status":"Resolved","summary":"Integrate console support that works with POC RTL","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-09","issuetype":"Task","worklogs":[]},"MEH-1572":{"key":"MEH-1572","status":"Resolved","summary":"Task 2 - Modifications to POC build infrastructure to enable static linking for a 64bit address and all changes to build infrastructure","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":144000,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"araghura","created":"2015-06-09","issuetype":"Task","worklogs":[]},"MEH-1570":{"key":"MEH-1570","status":"Resolved","summary":"Reposition GDT for EFI Boot","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-08","issuetype":"New Feature","worklogs":[]},"MEH-1561":{"key":"MEH-1561","status":"Resolved","summary":"Create GDT Macros and GDT Initialization","customfield_11642":"2015-06-02","start":"2015-06-02","customfield_11643":"2015-06-02","end":"2015-06-02","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-02","issuetype":"Improvement","worklogs":[]},"MEH-1560":{"key":"MEH-1560","status":"Resolved","summary":"Nucleus RTOS port to run on X86_64 bit mode","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-06-01","issuetype":"Task","worklogs":[]},"MEH-1559":{"key":"MEH-1559","status":"Resolved","summary":"Integrate NU_EMBED macros to embed the GOS FIT images into the Hypervisor binary image","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":0,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-06-01","issuetype":"Sub-task","worklogs":[{"id":"93761","started":"2015-06-10","time":"10:28:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Investigated NU_EMBED macros in Nucleus code.\r\nTook help from a Nucleus guy","author":"ssohail"},{"id":"93762","started":"2015-06-10","time":"10:28:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Tested NU_EMBED macros to embed guest fit image with Hypervisor and loacte this fit image while booting hypervisor.\r\nDid this testing on ARM imax6 bsp of working MEHV repository","author":"ssohail"},{"id":"93763","started":"2015-06-10","time":"10:30:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Minimized the macros and changed the names to GOS_EMBED rather than NU_EMBED.\r\nIntegrated these macros in Intel MEHV source under a separate header file","author":"ssohail"}]},"MEH-1558":{"key":"MEH-1558","status":"Resolved","summary":"Implement run-time GOS loading and boot services component and integrate it into the POC.","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":129600,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-06-01","issuetype":"Sub-task","worklogs":[{"id":"93764","started":"2015-06-10","time":"10:43:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Investigated DDC functions and there use in ARM MEHV structure for extracting FIT image information.\r\nAtif helped me understanding function of certain APIs. ","author":"ssohail"},{"id":"93765","started":"2015-06-10","time":"10:44:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Wrote an API which takes FIT image start_addr and returns all the important information about a certain image embedded within that FIT image.\r\nTested on ARM MEHV imx6 bme configuration. ","author":"ssohail"},{"id":"93766","started":"2015-06-10","time":"10:46:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Created an example API for locating and loading Guest image  using FIT image information about this specific image. It can be modified to cover multiple guests.","author":"ssohail"},{"id":"93767","started":"2015-06-10","time":"10:48:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Added ddc library and fdtlibrary into Intel MEHV sources.\r\nStripped ddc library to minimum functions that are needed to extract its related information.\r\nIntegrated the APIs as well.","author":"ssohail"},{"id":"94324","started":"2015-06-17","time":"11:46:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Further stripped down fdt library.\r\nCreated template ITS file and ITS creation script.\r\nMoved into sources. Tested and committed the changes","author":"ssohail"},{"id":"94326","started":"2015-06-17","time":"11:48:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Gone through fit_loader restructuring. Things are simpler now.\r\nModified the ITS creation  script according to new ITS format.\r\nModified BME Makefile to use script for generating ITS file.\r\nTested and committed the changes","author":"ssohail"}]},"MEH-1557":{"key":"MEH-1557","status":"Resolved","summary":"Implement host side packaging infrastructure for supported GOSes and implement infrastructure to embed GOSs into hypervisor image","customfield_11642":"2015-07-30","start":"2015-07-30","customfield_11643":"2015-07-30","end":"2015-07-30","timeoriginalestimate":230400,"timespent":122400,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2015-06-01","issuetype":"Task","worklogs":[{"id":"93758","started":"2015-06-10","time":"10:18:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Gathered information about mkimage utility and its use to make FIT image\r\nStudied ITS file structure through following site\r\nhttp:\/\/www.denx.de\/wiki\/U-Boot\/Documentation","author":"ssohail"},{"id":"93759","started":"2015-06-10","time":"10:21:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Tested mkimage utility for some ARM configuration and added the utility and instructions in Intel MEHV repository.\r\n","author":"ssohail"},{"id":"94663","started":"2015-06-22","time":"04:34:00.000-0500","timespent":1.5,"timespent_seconds":43200,"displayname":"Sohail, Sharjeel","comment":"A unified ITS file and an its updating script has been created and merged into Repositiory","author":"ssohail"},{"id":"94664","started":"2015-06-22","time":"04:36:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Guest packaging changes has been integrated.\r\n\r\nmkimage utility\r\nunified ITS file along with script\r\nEmbedding of FIT image in Hypervisor","author":"ssohail"},{"id":"95879","started":"2015-07-06","time":"13:45:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Sohail, Sharjeel","comment":"Updated ITS generation script a little.\r\nAdded README file containing information for guest packaging\r\nREADME file explains ITS generation and FIT image generation step-wise","author":"ssohail"},{"id":"96120","started":"2015-07-09","time":"08:32:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Sohail, Sharjeel","comment":"Some modifications in ITS generation script.\r\nMoreover standardized Guests load addresses","author":"ssohail"}]},"MEH-1556":{"key":"MEH-1556","status":"Resolved","summary":"Modify POC to get it to build in 64-bit mode -m64","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-06-01","issuetype":"Sub-task","worklogs":[]},"MEH-1555":{"key":"MEH-1555","status":"Resolved","summary":"Task 1 - Enable boot mechanics for EFI based booting of Hypervisor on Minow board","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":230400,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-06-01","issuetype":"Task","worklogs":[]},"MEH-1554":{"key":"MEH-1554","status":"Resolved","summary":"More work on EFI OS Loader and hyp initialization code","customfield_11642":"2015-06-01","start":"2015-06-01","customfield_11643":"2015-06-01","end":"2015-06-01","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-05-30","issuetype":"New Feature","worklogs":[]},"MEH-1553":{"key":"MEH-1553","status":"Resolved","summary":"Ongoing support for bootable efi app","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-05-28","issuetype":"Improvement","worklogs":[]},"MEH-1552":{"key":"MEH-1552","status":"Resolved","summary":"Add support content for guests and debug into broxton hypvisor repo","customfield_11642":"2015-05-27","start":"2015-05-27","customfield_11643":"2015-05-27","end":"2015-05-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"dand","created":"2015-05-27","issuetype":"Task","worklogs":[]},"MEH-1515":{"key":"MEH-1515","status":"Resolved","summary":"EFI Bootloader Work for MinnowBoard","customfield_11642":"2015-04-13","start":"2015-04-13","customfield_11643":"2015-04-13","end":"2015-04-13","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-05-11","issuetype":"Improvement","worklogs":[]},"MEH-1436":{"key":"MEH-1436","status":"Resolved","summary":"Added README.md","customfield_11642":"2015-04-10","start":"2015-04-10","customfield_11643":"2015-04-10","end":"2015-04-10","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-04-10","issuetype":"New Feature","worklogs":[]},"MEH-1435":{"key":"MEH-1435","status":"Resolved","summary":"Initial Commit for mehv-x64-broxton","customfield_11642":"2015-04-10","start":"2015-04-10","customfield_11643":"2015-04-10","end":"2015-04-10","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"cgriffin","created":"2015-04-10","issuetype":"New Feature","worklogs":[]},"HL-457":{"key":"HL-457","status":"Open","summary":"MEHV 2.2 -  ACPI table for two MIPI-DSI displays on IVI VM","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":46800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-30","issuetype":"Task","worklogs":[{"id":"146324","started":"2017-04-04","time":"02:49:00.000-0500","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Went through the ACPI collateral and sent some questions to Harshit.\r\nHad a discussion with Harshit over the questions.\r\nCreated an mehv iasImage using the steps.","author":"javedm"},{"id":"146325","started":"2017-04-05","time":"03:00:00.000-0500","timespent":0.75,"timespent_seconds":21600,"displayname":"Javed, Madeeha","comment":"Applied the mipi dsi patches over POC5 kernel.\r\nThe created stitched mehv image did not boot with ABL, issue being the wrong order of input files.\r\nWas not able to see DSI interfaces in the VM0. ","author":"javedm"},{"id":"146326","started":"2017-04-06","time":"03:05:00.000-0500","timespent":0.5,"timespent_seconds":14400,"displayname":"Javed, Madeeha","comment":"Enabled DRM and i915 debug boot args but still did not see DSI information.\r\nTried to build a native kernel from POC5 base to try bare metal.\r\nDisabled VGT patches in guests but got build errors. Tried to resolve build errors but kernel did not boot. Tried various other methods but unsuccessful.\r\nStarted building GP1.0.1 to enable i915 without VGT and try MIPI DSI patches.\r\nSent questions to Harshit if MIPI DSI was working on XEN.","author":"javedm"}]},"HL-445":{"key":"HL-445","status":"Resolved","summary":"MEHV internal release 2.1","customfield_11642":"","start":"","customfield_11643":"2017-03-29","end":"2017-03-29","timeoriginalestimate":0,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"hsrivast","created":"2017-03-28","issuetype":"Task","worklogs":[{"id":"145582","started":"2017-03-28","time":"06:21:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Prepared and tested the release.\r\n","author":"javedm"}]},"HL-440":{"key":"HL-440","status":"Closed","summary":"adding camera related _DSD (ACPI) entries","customfield_11642":"","start":"","customfield_11643":"2017-03-29","end":"2017-03-29","timeoriginalestimate":0,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-28","issuetype":"Task","worklogs":[{"id":"145490","started":"2017-03-28","time":"08:55:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"DSDT and vm_description of guests modified to include new camera device settings.\r\n","author":"javedm"}]},"HL-439":{"key":"HL-439","status":"Resolved","summary":"Custom MEHV 1.6.1 build modified ACPI ","customfield_11642":"","start":"","customfield_11643":"2017-03-28","end":"2017-03-28","timeoriginalestimate":null,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-27","issuetype":"Task","worklogs":[{"id":"145443","started":"2017-03-28","time":"04:35:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Updated DSDT on top of MEHV 1.6.1 and committed MEHV library.","author":"javedm"}]},"HL-434":{"key":"HL-434","status":"Open","summary":"Hang on cluster kernel with intel kernel config option ","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-23","issuetype":"Task","worklogs":[{"id":"145176","started":"2017-03-24","time":"11:39:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Investigated how C states can be supported in MEHV. Looked a bit at Xen's implementation and studied a paper.","author":"javedm"}]},"HL-433":{"key":"HL-433","status":"Open","summary":"Crash with MEHV 2.0 after following command \"echo l > \/proc\/sysrq-trigger\"","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":140400,"labels":["intel_automotive_hyp"],"assignee":"aarehman","created":"2017-03-23","issuetype":"Task","worklogs":[{"id":"146284","started":"2017-04-05","time":"10:53:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Investigated why break point exception(also called INT3) is not handled. \r\nResult: \r\n  - It's handler is not installed in Interrupt Descriptor table\r\n\r\nTried couple of things: \r\n  - Dump interrupt vectors that caused VMEXITs during life time of guest and particularly on running the given command. \r\n  - Tried ignoring the unhandled exception in excep_dispatch function and it works. There are no side-effects and the system runs smoothly but there is no backtrace produced. Need to look at a proper fix. \r\n \r\nEssentially there should have been a VMEXIT on this exception and then in the VMEXIT handler for interrupt this exception should have been handled. ","author":"aarehman"},{"id":"146285","started":"2017-04-06","time":"11:01:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Investigated the behavior on XEN POC5. It doesn't show backtrace which is exactly same as if we ignore the exception. \r\n\r\nTried running native linux built from POC5 kernel but it did not boot probably because POC5 isn't supposed to boot natively. Idea was to test the same command on it. \r\n\r\nTried a fix for no VMEXIT occurrence as suggest by Madeeha. It did produce VMEXITs(cause by #BP) during the boot of VM1 but didn't produce VMEXIT on running the given command. \r\nPS. Fix was to enable INT3 bit in VMCS_EXCEPTION_BITMASK. \r\n\r\nFurther investigation is required as to why isn't VMEXIT occurring even after enabling it in the VMCS.  \r\n  ","author":"aarehman"},{"id":"146519","started":"2017-04-07","time":"11:20:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"- I read the code to understand how the IDTs are setup here is what i understand:\r\n        - Hypervisor initially setups IDTs that are not used at all or at least not supposed to be used because the base address that initially Hypervisor sets for IDTs is changed when the guest boots up. \r\n        - second reason to why Hypervisor IDTs are not supposed to be used is that EXCEPTION_BITMASK is all 0xff so every exception must cause VMEXIT and as I understand they are again injected to the guest. \r\n    - I enabled the vector 3 exception bitmaks to enable vmexit on INT3 and yes it does cause VMEXITs during the boot of VM1 but when this specific command is run no VMEXIT is caused. \r\n    - Another strange observation:\r\n        - from what i understand, the unhandled exception must have been in VMX context but I'm unable to make any hypercalls from that exception handler code on top of this I'm able to read stuff using VMM functions like HV_Arch_VM_Read this leads me to believe that this exception handler code is invoked in VMM context -- Correct me if i'm wrong.\r\n","author":"aarehman"},{"id":"146520","started":"2017-04-10","time":"11:22:00.000-0500","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Findings on command: \"echo l > sysrq-trigger\"\r\n    - this causes the handler: arch_trigger_all_cpu_backtrace to be called.\r\n        - this handler in turn tries to send IPI to all the processors (speaking from guest perspective)\r\n            - IPI info:\r\n                - vector NMI is being sent which is translated to :  APIC_DM_NMI\r\n                - logical destination: 0x800\r\n    - as soon as this request to send ipi is made the exception handler is called. \r\n\r\nI further debugged the vlapic_fix_destination function(this function is invoked when ipi is send) for CPU-ID 0 for the time period when the command is run and the exception is raised. \r\n\r\nHere are my findings:\r\n    - destination is set to 1 initially and for cpu-id = 0 it has to remain 1 which seems to be correct as real_dest generated is also 1.\r\n    - I tried disabling the writing to 0x300 (reg used to send IPI) and it stops causing exception from VM0 although it makes things terribly wrong like guest 1 won't boot but it proves that IPI generated is causing the issue. \r\n\r\nFurther debugging is required.","author":"aarehman"},{"id":"146570","started":"2017-04-11","time":"06:36:00.000-0500","timespent":0.875,"timespent_seconds":25200,"displayname":"Rehman, Aabdul","comment":"- Delivery mode for the IPI sent is NMI which is not handled in the hypervisor. \r\n- besides this vector 0 is being sent which seems wrong as according to the documentation range 0-15 for vectors is illegal.  ","author":"aarehman"}]},"HL-427":{"key":"HL-427","status":"Resolved","summary":"MEHV internal release 1.6.1","customfield_11642":"","start":"","customfield_11643":"2017-03-18","end":"2017-03-18","timeoriginalestimate":0,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"hsrivast","created":"2017-03-16","issuetype":"Task","worklogs":[{"id":"144482","started":"2017-03-16","time":"02:49:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"","author":"javedm"}]},"HL-412":{"key":"HL-412","status":"Resolved","summary":"MEHV internal release 2.0","customfield_11642":"","start":"","customfield_11643":"2017-03-18","end":"2017-03-18","timeoriginalestimate":0,"timespent":7200,"labels":["intel_automotive_hyp"],"assignee":"hsrivast","created":"2017-03-14","issuetype":"Task","worklogs":[{"id":"144325","started":"2017-03-14","time":"06:20:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Prepared and announced MEHV 2.0","author":"javedm"},{"id":"144326","started":"2017-03-15","time":"06:22:00.000-0500","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Prepared notes on updates in MEHV 2.0 since MEHV 1.8 and description of patches delivered.","author":"javedm"}]},"HL-407":{"key":"HL-407","status":"Resolved","summary":"POC5 kernel bring-up: EPT violation","customfield_11642":"","start":"","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":0,"timespent":10800,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-03-07","issuetype":"Bug","worklogs":[{"id":"143955","started":"2017-03-08","time":"14:20:00.000-0600","timespent":0.375,"timespent_seconds":10800,"displayname":"Javed, Madeeha","comment":"Built images provided by ABU team.\r\nReproduced the EPT violation on MEHV internal release 1.8.\r\nFixed the violation by updating kernel entry address.\r\nReplied to ABU team with proper information.","author":"javedm"}]},"HL-402":{"key":"HL-402","status":"Resolved","summary":"MEHV internal release 1.8","customfield_11642":"","start":"","customfield_11643":"2017-03-09","end":"2017-03-09","timeoriginalestimate":0,"timespent":3600,"labels":["intel_automotive_hyp"],"assignee":"hsrivast","created":"2017-03-02","issuetype":"Task","worklogs":[{"id":"143018","started":"2017-03-02","time":"01:37:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Created and verified the internal release.\r\nPosted release notes, emails tickets etc.","author":"javedm"}]},"HL-394":{"key":"HL-394","status":"Resolved","summary":"remove ADV7481A and ADV7481B from ACPI Tables ","customfield_11642":"","start":"","customfield_11643":"2017-02-24","end":"2017-02-24","timeoriginalestimate":0,"timespent":1800,"labels":["hypervisor","intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-17","issuetype":"Task","worklogs":[{"id":"142387","started":"2017-02-21","time":"08:17:00.000-0600","timespent":0.0625,"timespent_seconds":1800,"displayname":"Javed, Madeeha","comment":"Removed these definitions from guest ACPI tables.","author":"javedm"}]},"HL-393":{"key":"HL-393","status":"Resolved","summary":"i2c busses in hypervisor","customfield_11642":"","start":"","customfield_11643":"2017-03-01","end":"2017-03-01","timeoriginalestimate":null,"timespent":7200,"labels":["Hypervisor","intel_automotive_hyp"],"assignee":"hsrivast","created":"2017-02-17","issuetype":"Task","worklogs":[{"id":"143034","started":"2017-02-28","time":"02:12:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Investigated and replied to queries.","author":"javedm"}]},"HL-387":{"key":"HL-387","status":"Resolved","summary":"inconvenient choice of hypervisor hotkey","customfield_11642":"","start":"","customfield_11643":"2017-03-13","end":"2017-03-13","timeoriginalestimate":57600,"timespent":43200,"labels":["intel_automotive_hyp"],"assignee":"ssohail","created":"2017-02-16","issuetype":"Bug","worklogs":[{"id":"142921","started":"2017-02-28","time":"04:49:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Went through previous discussions on this topic and suggested a solution which may complete our design requirement","author":"ssohail"},{"id":"142923","started":"2017-03-01","time":"04:50:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Sohail, Sharjeel","comment":"Found some concerns in suggested design.\r\nTo handle multi-keyboard standards, command-line approach seems best.\r\nSuggested the approach with all the benefits it offers.\r\nArvind gave a go ahead with this approach.\r\nStarted implementation of this Console switching design.\r\nImplemented \"console <vm-id>\" command in HV-Shell.\r\nUpdated console switching helper APIs and created some new one.\r\nTested the implementation.\r\nFrom HV-Shell:         \"console <vm-id>\" command switches to VM's console\r\nFrom VM's console: Entring NULL Character i.e. \"CTRL+SPACE\" switches to HV_Shell ","author":"ssohail"},{"id":"142924","started":"2017-03-02","time":"04:55:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Sohail, Sharjeel","comment":"Some cleanup in HV-Shell related to Console switching solution","author":"ssohail"}]},"HL-378":{"key":"HL-378","status":"Resolved","summary":"hypervisor kernel header file Non-GPL again","customfield_11642":"2017-02-27","start":"2017-02-27","customfield_11643":"2017-02-27","end":"2017-02-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-15","issuetype":"Bug","worklogs":[]},"HL-368":{"key":"HL-368","status":"Resolved","summary":"Writing to a i2c device on VM1 after creating a vgt instance on VM0  crashes both the VM0 and VM1","customfield_11642":"","start":"","customfield_11643":"2017-03-06","end":"2017-03-06","timeoriginalestimate":0,"timespent":39600,"labels":["functional","intel_automotive_hyp"],"assignee":"ziaa","created":"2017-02-07","issuetype":"Bug","worklogs":[{"id":"142618","started":"2017-02-27","time":"08:34:00.000-0600","timespent":1,"timespent_seconds":28800,"displayname":"Rehman, Aabdul","comment":"Investigated the issue and here are my findings:\r\n    - i enabled logs for r\/w in hv\/arch\/x64\/hv_arch_pci.c but no r\/w were observed on issuing i2cget\/i2cset commands.\r\n\r\nCause of the problem on i2c set:\r\n    - the i2cset command is first handled by the vgt emulation handler i915\/vgt\/edid.c:433 \r\n    - in this function the specified offset corresponds to PCH_GMBUS3 which is not handled please see the code below:\r\nswitch (offset) {\r\ncase PCH_GMBUS0:\r\nreturn vgt_gmbus0_mmio_write(vgt, offset, p_data, bytes);\r\ncase PCH_GMBUS1:\r\nreturn vgt_gmbus1_mmio_write(vgt, offset, p_data, bytes);\r\ncase PCH_GMBUS2:\r\nreturn vgt_gmbus2_mmio_write(vgt, offset, p_data, bytes);\r\n\/* TODO: *\/\r\ncase PCH_GMBUS3:\r\nBUG();\r\nreturn false;\r\ndefault:\r\nmemcpy((char *)vgt->state.vReg + offset, p_data, bytes);\r\n}\r\n","author":"aarehman"},{"id":"143028","started":"2017-03-02","time":"02:04:00.000-0600","timespent":0.25,"timespent_seconds":7200,"displayname":"Zia, Asad","comment":"Investigated why we need the I2C device and if there is some workaround.","author":"ziaa"},{"id":"143222","started":"2017-03-06","time":"04:40:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Zia, Asad","comment":"Gvt-g emulates GMBUS and the case of PCH_GMBUS3 is unhandeled. Opened the following ticket to Intel. As a workaround, access the PCH_GMBUS3 from VM0, it should work ok. \r\n\r\nhttps:\/\/mentorgraphics.atlassian.net\/browse\/IAPLP-468\r\n","author":"ziaa"}]},"HL-367":{"key":"HL-367","status":"Resolved","summary":"Interrupts --Some of the device interrupts are NOT being delivered to CPU1 and CPU2 in VM1","customfield_11642":"","start":"","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":0,"timespent":7200,"labels":["functional","intel_automotive_hyp"],"assignee":"javedm","created":"2017-02-06","issuetype":"Bug","worklogs":[{"id":"144712","started":"2017-03-20","time":"08:14:00.000-0500","timespent":0.25,"timespent_seconds":7200,"displayname":"Javed, Madeeha","comment":"Analyzed log from running Linux natively on target.\r\nDevice interrupts from devices like USB and i2c are always delivered to primary CPU.\r\nFixed code on hypervisor that fixes destination of interrupts based on CPU partitioning to use proper CPU numbering but results are the same.","author":"javedm"}]},"HL-334":{"key":"HL-334","status":"Resolved","summary":"I2C Bus 3 (LPSS_I2C_3) is assigned to cluster (vm0)","customfield_11642":"","start":"","customfield_11643":"2017-02-27","end":"2017-02-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-12-16","issuetype":"Bug","worklogs":[]},"HL-325":{"key":"HL-325","status":"Resolved","summary":"Resource Assignment Correction in VM's","customfield_11642":"","start":"","customfield_11643":"2017-03-20","end":"2017-03-20","timeoriginalestimate":0,"timespent":3600,"labels":["functional","intel_automotive_hyp"],"assignee":"javedm","created":"2016-11-24","issuetype":"Bug","worklogs":[{"id":"143040","started":"2017-03-01","time":"02:31:00.000-0600","timespent":0.125,"timespent_seconds":3600,"displayname":"Javed, Madeeha","comment":"Investigated and replied to all queries in this ticket.","author":"javedm"}]},"HL-320":{"key":"HL-320","status":"Open","summary":"wifi driver fails to load in the IVI after a vmshutdown and vmboot sequence","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":57600,"timespent":0,"labels":["functional","intel_automotive_hyp"],"assignee":"ssohail","created":"2016-11-21","issuetype":"Bug","worklogs":[]},"HL-265":{"key":"HL-265","status":"Open","summary":"IVI Kernel fails to boot with Intel beta release","customfield_11642":"","start":"","customfield_11643":"","end":"","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-09-15","issuetype":"Bug","worklogs":[]},"HL-264":{"key":"HL-264","status":"Resolved","summary":"MMC1 timeout message on Linux console with Intel beta release","customfield_11642":"2017-02-26","start":"2017-02-26","customfield_11643":"2017-02-27","end":"2017-02-27","timeoriginalestimate":null,"timespent":0,"labels":["intel_automotive_hyp"],"assignee":"javedm","created":"2016-09-15","issuetype":"Suggestion","worklogs":[]}}